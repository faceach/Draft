<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:web="http://schemas.live.com/Web/">

<head>
    <script type="text/javascript">
    //<![CDATA[
    si_ST = new Date;
    //]]>
    </script>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <link href="https://cn.bing.com:443/feedback/windows?canvas=HOME&amp;client=windows&amp;clientVersion=1.0.0.0&amp;uncrunched=1" rel="canonical">
    <!--pc-->
    <title>Bing</title>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="/s/a/bing_p_lg.ico" rel="shortcut icon">
    <script type="text/javascript">
    //<![CDATA[
    _G = {
        ST: (si_ST ? si_ST : new Date),
        Mkt: "en-US",
        RTL: false,
        Ver: "9_00_0_4355349",
        IG: "9c1c7847a6d849de9392acc51a925373",
        EventID: "f498037e6edd4593ad738f8c049f4f3e",
        MN: "SERP",
        V: "web",
        P: "SERP",
        DA: "HK2",
        SUIH: "y7fgtGUpj9VUGUfmJtcXUQ",
        gpUrl: "\/fd\/ls\/GLinkPing.aspx?"
    };
    _G.lsUrl = "/fd/ls/l?IG=" + _G.IG;
    curUrl = "https:\/\/cn.bing.com\/feedback\/windows";
    _G.XLS = "\/threshold\/xls.aspx";;
    _G.nclid = '50F32C0FEA4F08EDA2A80D430A20D0FF'; ///<reference path="..\..\..\answers\services\Shared\Content\Content\script\Declarations\Shared.d.ts"/>
    if (!window.onerror) {
        // Chrome recently started passing in 5th argument as errorObject that contains error stack
        window.onerror = function(message, url, lineNumber, columnNumber, errorObject) {
            var logData;
            if (typeof message === "object" && message.srcElement && message.srcElement.src) {
                //BUGBUG: 628140 -  JS Script Error Inst:  Investigate why we never hit the supposed special error 
                //                  handler for Chrome
                //Chrome passes only a ScriptError Object to the onerror function.
                logData = {
                    ScriptSrc: message.srcElement.src
                };
                if (sj_evt) {
                    sj_evt.fire("ErrorInstrumentation", JSON.stringify(logData));
                }
            } else {
                if (typeof SharedLogHelper !== "undefined") {
                    //for others we get a message, url and a line number.
                    SharedLogHelper.LogError(url, message.toString(), errorObject, lineNumber, columnNumber);
                } else {
                    window.addEventListener("load", function() {
                        return SharedLogHelper.LogError(url, message.toString(), errorObject, lineNumber, columnNumber);
                    });
                }
            }
        };
    };
    /*
     * Microsoft grants you the right to use these script files for the sole purpose of either: 
     * (i) interacting through your browser with the Microsoft website, subject to the website�s 
     * terms of use; or (ii) using the files as included with a Microsoft product subject to that
     * product�s license terms. Microsoft reserves all other rights to the files not expressly 
     * granted by Microsoft, whether by implication, estoppel or otherwise. The notices and 
     * licenses below are for informational purposes only.
     *
     * Provided for Informational Purposes Only
     * MIT License
     * Permission is hereby granted, free of charge, to any person obtaining
     * a copy of this software and associated documentation files (the
     * "Software"), to deal in the Software without restriction, including
     * without limitation the rights to use, copy, modify, merge, publish,
     * distribute, sublicense, and/or sell copies of the Software, and to
     * permit persons to whom the Software is furnished to do so, subject to
     * the following conditions:
     *
     * The above copyright notice and this permission notice shall be
     * included in all copies or substantial portions of the Software.
     *
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
     * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
     * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
     * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
     * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
     * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
     * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
     */
    /*! jQuery v2.0.3 -wrap,-event-alias,-effects,-deprecated | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
    //@ sourceMappingURL=jquery.min.map
    */
    (function(e, undefined) {
        var t, n, r = typeof undefined,
            i = e.location,
            o = e.document,
            a = o.documentElement,
            s = e.jQuery,
            u = e.$,
            l = {},
            c = [],
            p = "2.0.3 -wrap,-event-alias,-effects,-deprecated",
            f = c.concat,
            d = c.push,
            h = c.slice,
            g = c.indexOf,
            m = l.toString,
            y = l.hasOwnProperty,
            v = p.trim,
            x = function(e, n) {
                return new x.fn.init(e, n, t)
            },
            b = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
            w = /\S+/g,
            T = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
            C = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
            N = /^-ms-/,
            k = /-([\da-z])/gi,
            S = function(e, t) {
                return t.toUpperCase()
            },
            E = function() {
                o.removeEventListener("DOMContentLoaded", E, !1), e.removeEventListener("load", E, !1), x.ready()
            };
        x.fn = x.prototype = {
            jquery: p,
            constructor: x,
            init: function(e, t, n) {
                var r, i;
                if (!e) return this;
                if ("string" == typeof e) {
                    if (r = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : T.exec(e), !r || !r[1] && t) return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
                    if (r[1]) {
                        if (t = t instanceof x ? t[0] : t, x.merge(this, x.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : o, !0)), C.test(r[1]) && x.isPlainObject(t))
                            for (r in t) x.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
                        return this
                    }
                    return i = o.getElementById(r[2]), i && i.parentNode && (this.length = 1, this[0] = i), this.context = o, this.selector = e, this
                }
                return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : x.isFunction(e) ? n.ready(e) : (e.selector !== undefined && (this.selector = e.selector, this.context = e.context), x.makeArray(e, this))
            },
            selector: "",
            length: 0,
            toArray: function() {
                return h.call(this)
            },
            get: function(e) {
                return null == e ? this.toArray() : 0 > e ? this[this.length + e] : this[e]
            },
            pushStack: function(e) {
                var t = x.merge(this.constructor(), e);
                return t.prevObject = this, t.context = this.context, t
            },
            each: function(e, t) {
                return x.each(this, e, t)
            },
            ready: function(e) {
                return x.ready.promise().done(e), this
            },
            slice: function() {
                return this.pushStack(h.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            eq: function(e) {
                var t = this.length,
                    n = +e + (0 > e ? t : 0);
                return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
            },
            map: function(e) {
                return this.pushStack(x.map(this, function(t, n) {
                    return e.call(t, n, t)
                }))
            },
            end: function() {
                return this.prevObject || this.constructor(null)
            },
            push: d,
            sort: [].sort,
            splice: [].splice
        }, x.fn.init.prototype = x.fn, x.extend = x.fn.extend = function() {
            var e, t, n, r, i, o, a = arguments[0] || {},
                s = 1,
                u = arguments.length,
                l = !1;
            for ("boolean" == typeof a && (l = a, a = arguments[1] || {}, s = 2), "object" == typeof a || x.isFunction(a) || (a = {}), u === s && (a = this, --s); u > s; s++)
                if (null != (e = arguments[s]))
                    for (t in e) n = a[t], r = e[t], a !== r && (l && r && (x.isPlainObject(r) || (i = x.isArray(r))) ? (i ? (i = !1, o = n && x.isArray(n) ? n : []) : o = n && x.isPlainObject(n) ? n : {}, a[t] = x.extend(l, o, r)) : r !== undefined && (a[t] = r));
            return a
        }, x.extend({
            expando: "jQuery" + (p + Math.random()).replace(/\D/g, ""),
            noConflict: function(t) {
                return e.$ === x && (e.$ = u), t && e.jQuery === x && (e.jQuery = s), x
            },
            isReady: !1,
            readyWait: 1,
            holdReady: function(e) {
                e ? x.readyWait++ : x.ready(!0)
            },
            ready: function(e) {
                (e === !0 ? --x.readyWait : x.isReady) || (x.isReady = !0, e !== !0 && --x.readyWait > 0 || (n.resolveWith(o, [x]), x.fn.trigger && x(o).trigger("ready").off("ready")))
            },
            isFunction: function(e) {
                return "function" === x.type(e)
            },
            isArray: Array.isArray,
            isWindow: function(e) {
                return null != e && e === e.window
            },
            isNumeric: function(e) {
                return !isNaN(parseFloat(e)) && isFinite(e)
            },
            type: function(e) {
                return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? l[m.call(e)] || "object" : typeof e
            },
            isPlainObject: function(e) {
                if ("object" !== x.type(e) || e.nodeType || x.isWindow(e)) return !1;
                try {
                    if (e.constructor && !y.call(e.constructor.prototype, "isPrototypeOf")) return !1
                } catch (t) {
                    return !1
                }
                return !0
            },
            isEmptyObject: function(e) {
                var t, JSON = JSON || {};
                for (t in e) return !1;
                return !0
            },
            error: function(e) {
                throw Error(e)
            },
            parseHTML: function(e, t, n) {
                if (!e || "string" != typeof e) return null;
                "boolean" == typeof t && (n = t, t = !1), t = t || o;
                var r = C.exec(e),
                    i = !n && [];
                return r ? [t.createElement(r[1])] : (r = x.buildFragment([e], t, i), i && x(i).remove(), x.merge([], r.childNodes))
            },
            parseJSON: JSON.parse,
            parseXML: function(e) {
                var t, n;
                if (!e || "string" != typeof e) return null;
                try {
                    n = new DOMParser, t = n.parseFromString(e, "text/xml")
                } catch (r) {
                    t = undefined
                }
                return (!t || t.getElementsByTagName("parsererror").length) && x.error("Invalid XML: " + e), t
            },
            noop: function() {},
            globalEval: function(e) {
                var t, n = eval;
                e = x.trim(e), e && (1 === e.indexOf("use strict") ? (t = o.createElement("script"), t.text = e, o.head.appendChild(t).parentNode.removeChild(t)) : n(e))
            },
            camelCase: function(e) {
                return e.replace(N, "ms-").replace(k, S)
            },
            nodeName: function(e, t) {
                return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
            },
            each: function(e, t, n) {
                var r, i = 0,
                    o = e.length,
                    a = j(e);
                if (n) {
                    if (a) {
                        for (; o > i; i++)
                            if (r = t.apply(e[i], n), r === !1) break
                    } else
                        for (i in e)
                            if (r = t.apply(e[i], n), r === !1) break
                } else if (a) {
                    for (; o > i; i++)
                        if (r = t.call(e[i], i, e[i]), r === !1) break
                } else
                    for (i in e)
                        if (r = t.call(e[i], i, e[i]), r === !1) break; return e
            },
            trim: function(e) {
                return null == e ? "" : v.call(e)
            },
            makeArray: function(e, t) {
                var n = t || [];
                return null != e && (j(Object(e)) ? x.merge(n, "string" == typeof e ? [e] : e) : d.call(n, e)), n
            },
            inArray: function(e, t, n) {
                return null == t ? -1 : g.call(t, e, n)
            },
            merge: function(e, t) {
                var n = t.length,
                    r = e.length,
                    i = 0;
                if ("number" == typeof n)
                    for (; n > i; i++) e[r++] = t[i];
                else
                    while (t[i] !== undefined) e[r++] = t[i++];
                return e.length = r, e
            },
            grep: function(e, t, n) {
                var r, i = [],
                    o = 0,
                    a = e.length;
                for (n = !!n; a > o; o++) r = !!t(e[o], o), n !== r && i.push(e[o]);
                return i
            },
            map: function(e, t, n) {
                var r, i = 0,
                    o = e.length,
                    a = j(e),
                    s = [];
                if (a)
                    for (; o > i; i++) r = t(e[i], i, n), null != r && (s[s.length] = r);
                else
                    for (i in e) r = t(e[i], i, n), null != r && (s[s.length] = r);
                return f.apply([], s)
            },
            guid: 1,
            proxy: function(e, t) {
                var n, r, i;
                return "string" == typeof t && (n = e[t], t = e, e = n), x.isFunction(e) ? (r = h.call(arguments, 2), i = function() {
                    return e.apply(t || this, r.concat(h.call(arguments)))
                }, i.guid = e.guid = e.guid || x.guid++, i) : undefined
            },
            access: function(e, t, n, r, i, o, a) {
                var s = 0,
                    u = e.length,
                    l = null == n;
                if ("object" === x.type(n)) {
                    i = !0;
                    for (s in n) x.access(e, t, s, n[s], !0, o, a)
                } else if (r !== undefined && (i = !0, x.isFunction(r) || (a = !0), l && (a ? (t.call(e, r), t = null) : (l = t, t = function(e, t, n) {
                        return l.call(x(e), n)
                    })), t))
                    for (; u > s; s++) t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n)));
                return i ? e : l ? t.call(e) : u ? t(e[0], n) : o
            },
            now: Date.now,
            swap: function(e, t, n, r) {
                var i, o, a = {};
                for (o in t) a[o] = e.style[o], e.style[o] = t[o];
                i = n.apply(e, r || []);
                for (o in t) e.style[o] = a[o];
                return i
            }
        }), x.ready.promise = function(t) {
            return n || (n = x.Deferred(), "complete" === o.readyState ? setTimeout(x.ready) : (o.addEventListener("DOMContentLoaded", E, !1), e.addEventListener("load", E, !1))), n.promise(t)
        }, x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
            l["[object " + t + "]"] = t.toLowerCase()
        });

        function j(e) {
            var t = e.length,
                n = x.type(e);
            return x.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === n || "function" !== n && (0 === t || "number" == typeof t && t > 0 && t - 1 in e)
        }
        t = x(o),
            function(e, undefined) {
                var t, n, r, i, o, a, s, u, l, c, p, f, d, h, g, m, y, v = "sizzle" + -new Date,
                    b = e.document,
                    w = 0,
                    T = 0,
                    C = at(),
                    N = at(),
                    k = at(),
                    S = !1,
                    E = function(e, t) {
                        return e === t ? (S = !0, 0) : 0
                    },
                    j = typeof undefined,
                    D = 1 << 31,
                    A = {}.hasOwnProperty,
                    L = [],
                    H = L.pop,
                    O = L.push,
                    P = L.push,
                    q = L.slice,
                    R = L.indexOf || function(e) {
                        var t = 0,
                            n = this.length;
                        for (; n > t; t++)
                            if (this[t] === e) return t;
                        return -1
                    },
                    F = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                    M = "[\\x20\\t\\r\\n\\f]",
                    W = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                    $ = W.replace("w", "w#"),
                    B = "\\[" + M + "*(" + W + ")" + M + "*(?:([*^$|!~]?=)" + M + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + $ + ")|)|)" + M + "*\\]",
                    I = ":(" + W + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + B.replace(3, 8) + ")*)|.*)\\)|)",
                    z = RegExp("^" + M + "+|((?:^|[^\\\\])(?:\\\\.)*)" + M + "+$", "g"),
                    _ = RegExp("^" + M + "*," + M + "*"),
                    X = RegExp("^" + M + "*([>+~]|" + M + ")" + M + "*"),
                    U = RegExp(M + "*[+~]"),
                    V = RegExp("=" + M + "*([^\\]'\"]*)" + M + "*\\]", "g"),
                    Y = RegExp(I),
                    G = RegExp("^" + $ + "$"),
                    J = {
                        ID: RegExp("^#(" + W + ")"),
                        CLASS: RegExp("^\\.(" + W + ")"),
                        TAG: RegExp("^(" + W.replace("w", "w*") + ")"),
                        ATTR: RegExp("^" + B),
                        PSEUDO: RegExp("^" + I),
                        CHILD: RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + M + "*(even|odd|(([+-]|)(\\d*)n|)" + M + "*(?:([+-]|)" + M + "*(\\d+)|))" + M + "*\\)|)", "i"),
                        bool: RegExp("^(?:" + F + ")$", "i"),
                        needsContext: RegExp("^" + M + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + M + "*((?:-\\d)?\\d*)" + M + "*\\)|)(?=[^-]|$)", "i")
                    },
                    Q = /^[^{]+\{\s*\[native \w/,
                    K = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                    Z = /^(?:input|select|textarea|button)$/i,
                    et = /^h\d$/i,
                    tt = /'|\\/g,
                    nt = RegExp("\\\\([\\da-f]{1,6}" + M + "?|(" + M + ")|.)", "ig"),
                    rt = function(e, t, n) {
                        var r = "0x" + t - 65536;
                        return r !== r || n ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(55296 | r >> 10, 56320 | 1023 & r)
                    };
                try {
                    P.apply(L = q.call(b.childNodes), b.childNodes), L[b.childNodes.length].nodeType
                } catch (it) {
                    P = {
                        apply: L.length ? function(e, t) {
                            O.apply(e, q.call(t))
                        } : function(e, t) {
                            var n = e.length,
                                r = 0;
                            while (e[n++] = t[r++]);
                            e.length = n - 1
                        }
                    }
                }

                function ot(e, t, r, i) {
                    var o, a, s, u, l, f, g, m, x, w;
                    if ((t ? t.ownerDocument || t : b) !== p && c(t), t = t || p, r = r || [], !e || "string" != typeof e) return r;
                    if (1 !== (u = t.nodeType) && 9 !== u) return [];
                    if (d && !i) {
                        if (o = K.exec(e))
                            if (s = o[1]) {
                                if (9 === u) {
                                    if (a = t.getElementById(s), !a || !a.parentNode) return r;
                                    if (a.id === s) return r.push(a), r
                                } else if (t.ownerDocument && (a = t.ownerDocument.getElementById(s)) && y(t, a) && a.id === s) return r.push(a), r
                            } else {
                                if (o[2]) return P.apply(r, t.getElementsByTagName(e)), r;
                                if ((s = o[3]) && n.getElementsByClassName && t.getElementsByClassName) return P.apply(r, t.getElementsByClassName(s)), r
                            }
                        if (n.qsa && (!h || !h.test(e))) {
                            if (m = g = v, x = t, w = 9 === u && e, 1 === u && "object" !== t.nodeName.toLowerCase()) {
                                f = gt(e), (g = t.getAttribute("id")) ? m = g.replace(tt, "\\$&") : t.setAttribute("id", m), m = "[id='" + m + "'] ", l = f.length;
                                while (l--) f[l] = m + mt(f[l]);
                                x = U.test(e) && t.parentNode || t, w = f.join(",")
                            }
                            if (w) try {
                                return P.apply(r, x.querySelectorAll(w)), r
                            } catch (T) {} finally {
                                g || t.removeAttribute("id")
                            }
                        }
                    }
                    return Nt(e.replace(z, "$1"), t, r, i)
                }

                function at() {
                    var e = [];

                    function t(n, r) {
                        return e.push(n += " ") > i.cacheLength && delete t[e.shift()], t[n] = r
                    }
                    return t
                }

                function st(e) {
                    return e[v] = !0, e
                }

                function ut(e) {
                    var t = p.createElement("div");
                    try {
                        return !!e(t)
                    } catch (n) {
                        return !1
                    } finally {
                        t.parentNode && t.parentNode.removeChild(t), t = null
                    }
                }

                function lt(e, t) {
                    var n = e.split("|"),
                        r = e.length;
                    while (r--) i.attrHandle[n[r]] = t
                }

                function ct(e, t) {
                    var n = t && e,
                        r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || D) - (~e.sourceIndex || D);
                    if (r) return r;
                    if (n)
                        while (n = n.nextSibling)
                            if (n === t) return -1;
                    return e ? 1 : -1
                }

                function pt(e) {
                    return function(t) {
                        var n = t.nodeName.toLowerCase();
                        return "input" === n && t.type === e
                    }
                }

                function ft(e) {
                    return function(t) {
                        var n = t.nodeName.toLowerCase();
                        return ("input" === n || "button" === n) && t.type === e
                    }
                }

                function dt(e) {
                    return st(function(t) {
                        return t = +t, st(function(n, r) {
                            var i, o = e([], n.length, t),
                                a = o.length;
                            while (a--) n[i = o[a]] && (n[i] = !(r[i] = n[i]))
                        })
                    })
                }
                a = ot.isXML = function(e) {
                    var t = e && (e.ownerDocument || e).documentElement;
                    return t ? "HTML" !== t.nodeName : !1
                }, n = ot.support = {}, c = ot.setDocument = function(e) {
                    var t = e ? e.ownerDocument || e : b,
                        r = t.defaultView;
                    return t !== p && 9 === t.nodeType && t.documentElement ? (p = t, f = t.documentElement, d = !a(t), r && r.attachEvent && r !== r.top && r.attachEvent("onbeforeunload", function() {
                        c()
                    }), n.attributes = ut(function(e) {
                        return e.className = "i", !e.getAttribute("className")
                    }), n.getElementsByTagName = ut(function(e) {
                        return e.appendChild(t.createComment("")), !e.getElementsByTagName("*").length
                    }), n.getElementsByClassName = ut(function(e) {
                        return e.innerHTML = "<div class='a'></div><div class='a i'></div>", e.firstChild.className = "i", 2 === e.getElementsByClassName("i").length
                    }), n.getById = ut(function(e) {
                        return f.appendChild(e).id = v, !t.getElementsByName || !t.getElementsByName(v).length
                    }), n.getById ? (i.find.ID = function(e, t) {
                        if (typeof t.getElementById !== j && d) {
                            var n = t.getElementById(e);
                            return n && n.parentNode ? [n] : []
                        }
                    }, i.filter.ID = function(e) {
                        var t = e.replace(nt, rt);
                        return function(e) {
                            return e.getAttribute("id") === t
                        }
                    }) : (delete i.find.ID, i.filter.ID = function(e) {
                        var t = e.replace(nt, rt);
                        return function(e) {
                            var n = typeof e.getAttributeNode !== j && e.getAttributeNode("id");
                            return n && n.value === t
                        }
                    }), i.find.TAG = n.getElementsByTagName ? function(e, t) {
                        return typeof t.getElementsByTagName !== j ? t.getElementsByTagName(e) : undefined
                    } : function(e, t) {
                        var n, r = [],
                            i = 0,
                            o = t.getElementsByTagName(e);
                        if ("*" === e) {
                            while (n = o[i++]) 1 === n.nodeType && r.push(n);
                            return r
                        }
                        return o
                    }, i.find.CLASS = n.getElementsByClassName && function(e, t) {
                        return typeof t.getElementsByClassName !== j && d ? t.getElementsByClassName(e) : undefined
                    }, g = [], h = [], (n.qsa = Q.test(t.querySelectorAll)) && (ut(function(e) {
                        e.innerHTML = "<select><option selected=''></option></select>", e.querySelectorAll("[selected]").length || h.push("\\[" + M + "*(?:value|" + F + ")"), e.querySelectorAll(":checked").length || h.push(":checked")
                    }), ut(function(e) {
                        var n = t.createElement("input");
                        n.setAttribute("type", "hidden"), e.appendChild(n).setAttribute("t", ""), e.querySelectorAll("[t^='']").length && h.push("[*^$]=" + M + "*(?:''|\"\")"), e.querySelectorAll(":enabled").length || h.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), h.push(",.*:")
                    })), (n.matchesSelector = Q.test(m = f.webkitMatchesSelector || f.mozMatchesSelector || f.oMatchesSelector || f.msMatchesSelector)) && ut(function(e) {
                        n.disconnectedMatch = m.call(e, "div"), m.call(e, "[s!='']:x"), g.push("!=", I)
                    }), h = h.length && RegExp(h.join("|")), g = g.length && RegExp(g.join("|")), y = Q.test(f.contains) || f.compareDocumentPosition ? function(e, t) {
                        var n = 9 === e.nodeType ? e.documentElement : e,
                            r = t && t.parentNode;
                        return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
                    } : function(e, t) {
                        if (t)
                            while (t = t.parentNode)
                                if (t === e) return !0;
                        return !1
                    }, E = f.compareDocumentPosition ? function(e, r) {
                        if (e === r) return S = !0, 0;
                        var i = r.compareDocumentPosition && e.compareDocumentPosition && e.compareDocumentPosition(r);
                        return i ? 1 & i || !n.sortDetached && r.compareDocumentPosition(e) === i ? e === t || y(b, e) ? -1 : r === t || y(b, r) ? 1 : l ? R.call(l, e) - R.call(l, r) : 0 : 4 & i ? -1 : 1 : e.compareDocumentPosition ? -1 : 1
                    } : function(e, n) {
                        var r, i = 0,
                            o = e.parentNode,
                            a = n.parentNode,
                            s = [e],
                            u = [n];
                        if (e === n) return S = !0, 0;
                        if (!o || !a) return e === t ? -1 : n === t ? 1 : o ? -1 : a ? 1 : l ? R.call(l, e) - R.call(l, n) : 0;
                        if (o === a) return ct(e, n);
                        r = e;
                        while (r = r.parentNode) s.unshift(r);
                        r = n;
                        while (r = r.parentNode) u.unshift(r);
                        while (s[i] === u[i]) i++;
                        return i ? ct(s[i], u[i]) : s[i] === b ? -1 : u[i] === b ? 1 : 0
                    }, t) : p
                }, ot.matches = function(e, t) {
                    return ot(e, null, null, t)
                }, ot.matchesSelector = function(e, t) {
                    if ((e.ownerDocument || e) !== p && c(e), t = t.replace(V, "='$1']"), !(!n.matchesSelector || !d || g && g.test(t) || h && h.test(t))) try {
                        var r = m.call(e, t);
                        if (r || n.disconnectedMatch || e.document && 11 !== e.document.nodeType) return r
                    } catch (i) {}
                    return ot(t, p, null, [e]).length > 0
                }, ot.contains = function(e, t) {
                    return (e.ownerDocument || e) !== p && c(e), y(e, t)
                }, ot.attr = function(e, t) {
                    (e.ownerDocument || e) !== p && c(e);
                    var r = i.attrHandle[t.toLowerCase()],
                        o = r && A.call(i.attrHandle, t.toLowerCase()) ? r(e, t, !d) : undefined;
                    return o === undefined ? n.attributes || !d ? e.getAttribute(t) : (o = e.getAttributeNode(t)) && o.specified ? o.value : null : o
                }, ot.error = function(e) {
                    throw Error("Syntax error, unrecognized expression: " + e)
                }, ot.uniqueSort = function(e) {
                    var t, r = [],
                        i = 0,
                        o = 0;
                    if (S = !n.detectDuplicates, l = !n.sortStable && e.slice(0), e.sort(E), S) {
                        while (t = e[o++]) t === e[o] && (i = r.push(o));
                        while (i--) e.splice(r[i], 1)
                    }
                    return e
                }, o = ot.getText = function(e) {
                    var t, n = "",
                        r = 0,
                        i = e.nodeType;
                    if (i) {
                        if (1 === i || 9 === i || 11 === i) {
                            if ("string" == typeof e.textContent) return e.textContent;
                            for (e = e.firstChild; e; e = e.nextSibling) n += o(e)
                        } else if (3 === i || 4 === i) return e.nodeValue
                    } else
                        for (; t = e[r]; r++) n += o(t);
                    return n
                }, i = ot.selectors = {
                    cacheLength: 50,
                    createPseudo: st,
                    match: J,
                    attrHandle: {},
                    find: {},
                    relative: {
                        ">": {
                            dir: "parentNode",
                            first: !0
                        },
                        " ": {
                            dir: "parentNode"
                        },
                        "+": {
                            dir: "previousSibling",
                            first: !0
                        },
                        "~": {
                            dir: "previousSibling"
                        }
                    },
                    preFilter: {
                        ATTR: function(e) {
                            return e[1] = e[1].replace(nt, rt), e[3] = (e[4] || e[5] || "").replace(nt, rt), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                        },
                        CHILD: function(e) {
                            return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || ot.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && ot.error(e[0]), e
                        },
                        PSEUDO: function(e) {
                            var t, n = !e[5] && e[2];
                            return J.CHILD.test(e[0]) ? null : (e[3] && e[4] !== undefined ? e[2] = e[4] : n && Y.test(n) && (t = gt(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                        }
                    },
                    filter: {
                        TAG: function(e) {
                            var t = e.replace(nt, rt).toLowerCase();
                            return "*" === e ? function() {
                                return !0
                            } : function(e) {
                                return e.nodeName && e.nodeName.toLowerCase() === t
                            }
                        },
                        CLASS: function(e) {
                            var t = C[e + " "];
                            return t || (t = RegExp("(^|" + M + ")" + e + "(" + M + "|$)")) && C(e, function(e) {
                                return t.test("string" == typeof e.className && e.className || typeof e.getAttribute !== j && e.getAttribute("class") || "")
                            })
                        },
                        ATTR: function(e, t, n) {
                            return function(r) {
                                var i = ot.attr(r, e);
                                return null == i ? "!=" === t : t ? (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.slice(-n.length) === n : "~=" === t ? (" " + i + " ").indexOf(n) > -1 : "|=" === t ? i === n || i.slice(0, n.length + 1) === n + "-" : !1) : !0
                            }
                        },
                        CHILD: function(e, t, n, r, i) {
                            var o = "nth" !== e.slice(0, 3),
                                a = "last" !== e.slice(-4),
                                s = "of-type" === t;
                            return 1 === r && 0 === i ? function(e) {
                                return !!e.parentNode
                            } : function(t, n, u) {
                                var l, c, p, f, d, h, g = o !== a ? "nextSibling" : "previousSibling",
                                    m = t.parentNode,
                                    y = s && t.nodeName.toLowerCase(),
                                    x = !u && !s;
                                if (m) {
                                    if (o) {
                                        while (g) {
                                            p = t;
                                            while (p = p[g])
                                                if (s ? p.nodeName.toLowerCase() === y : 1 === p.nodeType) return !1;
                                            h = g = "only" === e && !h && "nextSibling"
                                        }
                                        return !0
                                    }
                                    if (h = [a ? m.firstChild : m.lastChild], a && x) {
                                        c = m[v] || (m[v] = {}), l = c[e] || [], d = l[0] === w && l[1], f = l[0] === w && l[2], p = d && m.childNodes[d];
                                        while (p = ++d && p && p[g] || (f = d = 0) || h.pop())
                                            if (1 === p.nodeType && ++f && p === t) {
                                                c[e] = [w, d, f];
                                                break
                                            }
                                    } else if (x && (l = (t[v] || (t[v] = {}))[e]) && l[0] === w) f = l[1];
                                    else
                                        while (p = ++d && p && p[g] || (f = d = 0) || h.pop())
                                            if ((s ? p.nodeName.toLowerCase() === y : 1 === p.nodeType) && ++f && (x && ((p[v] || (p[v] = {}))[e] = [w, f]), p === t)) break; return f -= i, f === r || 0 === f % r && f / r >= 0
                                }
                            }
                        },
                        PSEUDO: function(e, t) {
                            var n, r = i.pseudos[e] || i.setFilters[e.toLowerCase()] || ot.error("unsupported pseudo: " + e);
                            return r[v] ? r(t) : r.length > 1 ? (n = [e, e, "", t], i.setFilters.hasOwnProperty(e.toLowerCase()) ? st(function(e, n) {
                                var i, o = r(e, t),
                                    a = o.length;
                                while (a--) i = R.call(e, o[a]), e[i] = !(n[i] = o[a])
                            }) : function(e) {
                                return r(e, 0, n)
                            }) : r
                        }
                    },
                    pseudos: {
                        not: st(function(e) {
                            var t = [],
                                n = [],
                                r = s(e.replace(z, "$1"));
                            return r[v] ? st(function(e, t, n, i) {
                                var o, a = r(e, null, i, []),
                                    s = e.length;
                                while (s--)(o = a[s]) && (e[s] = !(t[s] = o))
                            }) : function(e, i, o) {
                                return t[0] = e, r(t, null, o, n), !n.pop()
                            }
                        }),
                        has: st(function(e) {
                            return function(t) {
                                return ot(e, t).length > 0
                            }
                        }),
                        contains: st(function(e) {
                            return function(t) {
                                return (t.textContent || t.innerText || o(t)).indexOf(e) > -1
                            }
                        }),
                        lang: st(function(e) {
                            return G.test(e || "") || ot.error("unsupported lang: " + e), e = e.replace(nt, rt).toLowerCase(),
                                function(t) {
                                    var n;
                                    do
                                        if (n = d ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-");
                                    while ((t = t.parentNode) && 1 === t.nodeType);
                                    return !1
                                }
                        }),
                        target: function(t) {
                            var n = e.location && e.location.hash;
                            return n && n.slice(1) === t.id
                        },
                        root: function(e) {
                            return e === f
                        },
                        focus: function(e) {
                            return e === p.activeElement && (!p.hasFocus || p.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                        },
                        enabled: function(e) {
                            return e.disabled === !1
                        },
                        disabled: function(e) {
                            return e.disabled === !0
                        },
                        checked: function(e) {
                            var t = e.nodeName.toLowerCase();
                            return "input" === t && !!e.checked || "option" === t && !!e.selected
                        },
                        selected: function(e) {
                            return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                        },
                        empty: function(e) {
                            for (e = e.firstChild; e; e = e.nextSibling)
                                if (e.nodeName > "@" || 3 === e.nodeType || 4 === e.nodeType) return !1;
                            return !0
                        },
                        parent: function(e) {
                            return !i.pseudos.empty(e)
                        },
                        header: function(e) {
                            return et.test(e.nodeName)
                        },
                        input: function(e) {
                            return Z.test(e.nodeName)
                        },
                        button: function(e) {
                            var t = e.nodeName.toLowerCase();
                            return "input" === t && "button" === e.type || "button" === t
                        },
                        text: function(e) {
                            var t;
                            return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || t.toLowerCase() === e.type)
                        },
                        first: dt(function() {
                            return [0]
                        }),
                        last: dt(function(e, t) {
                            return [t - 1]
                        }),
                        eq: dt(function(e, t, n) {
                            return [0 > n ? n + t : n]
                        }),
                        even: dt(function(e, t) {
                            var n = 0;
                            for (; t > n; n += 2) e.push(n);
                            return e
                        }),
                        odd: dt(function(e, t) {
                            var n = 1;
                            for (; t > n; n += 2) e.push(n);
                            return e
                        }),
                        lt: dt(function(e, t, n) {
                            var r = 0 > n ? n + t : n;
                            for (; --r >= 0;) e.push(r);
                            return e
                        }),
                        gt: dt(function(e, t, n) {
                            var r = 0 > n ? n + t : n;
                            for (; t > ++r;) e.push(r);
                            return e
                        })
                    }
                }, i.pseudos.nth = i.pseudos.eq;
                for (t in {
                        radio: !0,
                        checkbox: !0,
                        file: !0,
                        password: !0,
                        image: !0
                    }) i.pseudos[t] = pt(t);
                for (t in {
                        submit: !0,
                        reset: !0
                    }) i.pseudos[t] = ft(t);

                function ht() {}
                ht.prototype = i.filters = i.pseudos, i.setFilters = new ht;

                function gt(e, t) {
                    var n, r, o, a, s, u, l, c = N[e + " "];
                    if (c) return t ? 0 : c.slice(0);
                    s = e, u = [], l = i.preFilter;
                    while (s) {
                        (!n || (r = _.exec(s))) && (r && (s = s.slice(r[0].length) || s), u.push(o = [])), n = !1, (r = X.exec(s)) && (n = r.shift(), o.push({
                            value: n,
                            type: r[0].replace(z, " ")
                        }), s = s.slice(n.length));
                        for (a in i.filter) !(r = J[a].exec(s)) || l[a] && !(r = l[a](r)) || (n = r.shift(), o.push({
                            value: n,
                            type: a,
                            matches: r
                        }), s = s.slice(n.length));
                        if (!n) break
                    }
                    return t ? s.length : s ? ot.error(e) : N(e, u).slice(0)
                }

                function mt(e) {
                    var t = 0,
                        n = e.length,
                        r = "";
                    for (; n > t; t++) r += e[t].value;
                    return r
                }

                function yt(e, t, n) {
                    var i = t.dir,
                        o = n && "parentNode" === i,
                        a = T++;
                    return t.first ? function(t, n, r) {
                        while (t = t[i])
                            if (1 === t.nodeType || o) return e(t, n, r)
                    } : function(t, n, s) {
                        var u, l, c, p = w + " " + a;
                        if (s) {
                            while (t = t[i])
                                if ((1 === t.nodeType || o) && e(t, n, s)) return !0
                        } else
                            while (t = t[i])
                                if (1 === t.nodeType || o)
                                    if (c = t[v] || (t[v] = {}), (l = c[i]) && l[0] === p) {
                                        if ((u = l[1]) === !0 || u === r) return u === !0
                                    } else if (l = c[i] = [p], l[1] = e(t, n, s) || r, l[1] === !0) return !0
                    }
                }

                function vt(e) {
                    return e.length > 1 ? function(t, n, r) {
                        var i = e.length;
                        while (i--)
                            if (!e[i](t, n, r)) return !1;
                        return !0
                    } : e[0]
                }

                function xt(e, t, n, r, i) {
                    var o, a = [],
                        s = 0,
                        u = e.length,
                        l = null != t;
                    for (; u > s; s++)(o = e[s]) && (!n || n(o, r, i)) && (a.push(o), l && t.push(s));
                    return a
                }

                function bt(e, t, n, r, i, o) {
                    return r && !r[v] && (r = bt(r)), i && !i[v] && (i = bt(i, o)), st(function(o, a, s, u) {
                        var l, c, p, f = [],
                            d = [],
                            h = a.length,
                            g = o || Ct(t || "*", s.nodeType ? [s] : s, []),
                            m = !e || !o && t ? g : xt(g, f, e, s, u),
                            y = n ? i || (o ? e : h || r) ? [] : a : m;
                        if (n && n(m, y, s, u), r) {
                            l = xt(y, d), r(l, [], s, u), c = l.length;
                            while (c--)(p = l[c]) && (y[d[c]] = !(m[d[c]] = p))
                        }
                        if (o) {
                            if (i || e) {
                                if (i) {
                                    l = [], c = y.length;
                                    while (c--)(p = y[c]) && l.push(m[c] = p);
                                    i(null, y = [], l, u)
                                }
                                c = y.length;
                                while (c--)(p = y[c]) && (l = i ? R.call(o, p) : f[c]) > -1 && (o[l] = !(a[l] = p))
                            }
                        } else y = xt(y === a ? y.splice(h, y.length) : y), i ? i(null, a, y, u) : P.apply(a, y)
                    })
                }

                function wt(e) {
                    var t, n, r, o = e.length,
                        a = i.relative[e[0].type],
                        s = a || i.relative[" "],
                        l = a ? 1 : 0,
                        c = yt(function(e) {
                            return e === t
                        }, s, !0),
                        p = yt(function(e) {
                            return R.call(t, e) > -1
                        }, s, !0),
                        f = [function(e, n, r) {
                            return !a && (r || n !== u) || ((t = n).nodeType ? c(e, n, r) : p(e, n, r))
                        }];
                    for (; o > l; l++)
                        if (n = i.relative[e[l].type]) f = [yt(vt(f), n)];
                        else {
                            if (n = i.filter[e[l].type].apply(null, e[l].matches), n[v]) {
                                for (r = ++l; o > r; r++)
                                    if (i.relative[e[r].type]) break;
                                return bt(l > 1 && vt(f), l > 1 && mt(e.slice(0, l - 1).concat({
                                    value: " " === e[l - 2].type ? "*" : ""
                                })).replace(z, "$1"), n, r > l && wt(e.slice(l, r)), o > r && wt(e = e.slice(r)), o > r && mt(e))
                            }
                            f.push(n)
                        }
                    return vt(f)
                }

                function Tt(e, t) {
                    var n = 0,
                        o = t.length > 0,
                        a = e.length > 0,
                        s = function(s, l, c, f, d) {
                            var h, g, m, y = [],
                                v = 0,
                                x = "0",
                                b = s && [],
                                T = null != d,
                                C = u,
                                N = s || a && i.find.TAG("*", d && l.parentNode || l),
                                k = w += null == C ? 1 : Math.random() || .1;
                            for (T && (u = l !== p && l, r = n); null != (h = N[x]); x++) {
                                if (a && h) {
                                    g = 0;
                                    while (m = e[g++])
                                        if (m(h, l, c)) {
                                            f.push(h);
                                            break
                                        }
                                    T && (w = k, r = ++n)
                                }
                                o && ((h = !m && h) && v--, s && b.push(h))
                            }
                            if (v += x, o && x !== v) {
                                g = 0;
                                while (m = t[g++]) m(b, y, l, c);
                                if (s) {
                                    if (v > 0)
                                        while (x--) b[x] || y[x] || (y[x] = H.call(f));
                                    y = xt(y)
                                }
                                P.apply(f, y), T && !s && y.length > 0 && v + t.length > 1 && ot.uniqueSort(f)
                            }
                            return T && (w = k, u = C), b
                        };
                    return o ? st(s) : s
                }
                s = ot.compile = function(e, t) {
                    var n, r = [],
                        i = [],
                        o = k[e + " "];
                    if (!o) {
                        t || (t = gt(e)), n = t.length;
                        while (n--) o = wt(t[n]), o[v] ? r.push(o) : i.push(o);
                        o = k(e, Tt(i, r))
                    }
                    return o
                };

                function Ct(e, t, n) {
                    var r = 0,
                        i = t.length;
                    for (; i > r; r++) ot(e, t[r], n);
                    return n
                }

                function Nt(e, t, r, o) {
                    var a, u, l, c, p, f = gt(e);
                    if (!o && 1 === f.length) {
                        if (u = f[0] = f[0].slice(0), u.length > 2 && "ID" === (l = u[0]).type && n.getById && 9 === t.nodeType && d && i.relative[u[1].type]) {
                            if (t = (i.find.ID(l.matches[0].replace(nt, rt), t) || [])[0], !t) return r;
                            e = e.slice(u.shift().value.length)
                        }
                        a = J.needsContext.test(e) ? 0 : u.length;
                        while (a--) {
                            if (l = u[a], i.relative[c = l.type]) break;
                            if ((p = i.find[c]) && (o = p(l.matches[0].replace(nt, rt), U.test(u[0].type) && t.parentNode || t))) {
                                if (u.splice(a, 1), e = o.length && mt(u), !e) return P.apply(r, o), r;
                                break
                            }
                        }
                    }
                    return s(e, f)(o, t, !d, r, U.test(e)), r
                }
                n.sortStable = v.split("").sort(E).join("") === v, n.detectDuplicates = S, c(), n.sortDetached = ut(function(e) {
                    return 1 & e.compareDocumentPosition(p.createElement("div"))
                }), ut(function(e) {
                    return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
                }) || lt("type|href|height|width", function(e, t, n) {
                    return n ? undefined : e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
                }), n.attributes && ut(function(e) {
                    return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
                }) || lt("value", function(e, t, n) {
                    return n || "input" !== e.nodeName.toLowerCase() ? undefined : e.defaultValue
                }), ut(function(e) {
                    return null == e.getAttribute("disabled")
                }) || lt(F, function(e, t, n) {
                    var r;
                    return n ? undefined : (r = e.getAttributeNode(t)) && r.specified ? r.value : e[t] === !0 ? t.toLowerCase() : null
                }), x.find = ot, x.expr = ot.selectors, x.expr[":"] = x.expr.pseudos, x.unique = ot.uniqueSort, x.text = ot.getText, x.isXMLDoc = ot.isXML, x.contains = ot.contains
            }(e);
        var D = {};

        function A(e) {
            var t = D[e] = {};
            return x.each(e.match(w) || [], function(e, n) {
                t[n] = !0
            }), t
        }
        x.Callbacks = function(e) {
            e = "string" == typeof e ? D[e] || A(e) : x.extend({}, e);
            var t, n, r, i, o, a, s = [],
                u = !e.once && [],
                l = function(p) {
                    for (t = e.memory && p, n = !0, a = i || 0, i = 0, o = s.length, r = !0; s && o > a; a++)
                        if (s[a].apply(p[0], p[1]) === !1 && e.stopOnFalse) {
                            t = !1;
                            break
                        }
                    r = !1, s && (u ? u.length && l(u.shift()) : t ? s = [] : c.disable())
                },
                c = {
                    add: function() {
                        if (s) {
                            var n = s.length;
                            (function a(t) {
                                x.each(t, function(t, n) {
                                    var r = x.type(n);
                                    "function" === r ? e.unique && c.has(n) || s.push(n) : n && n.length && "string" !== r && a(n)
                                })
                            })(arguments), r ? o = s.length : t && (i = n, l(t))
                        }
                        return this
                    },
                    remove: function() {
                        return s && x.each(arguments, function(e, t) {
                            var n;
                            while ((n = x.inArray(t, s, n)) > -1) s.splice(n, 1), r && (o >= n && o--, a >= n && a--)
                        }), this
                    },
                    has: function(e) {
                        return e ? x.inArray(e, s) > -1 : !(!s || !s.length)
                    },
                    empty: function() {
                        return s = [], o = 0, this
                    },
                    disable: function() {
                        return s = u = t = undefined, this
                    },
                    disabled: function() {
                        return !s
                    },
                    lock: function() {
                        return u = undefined, t || c.disable(), this
                    },
                    locked: function() {
                        return !u
                    },
                    fireWith: function(e, t) {
                        return !s || n && !u || (t = t || [], t = [e, t.slice ? t.slice() : t], r ? u.push(t) : l(t)), this
                    },
                    fire: function() {
                        return c.fireWith(this, arguments), this
                    },
                    fired: function() {
                        return !!n
                    }
                };
            return c
        }, x.extend({
            Deferred: function(e) {
                var t = [
                        ["resolve", "done", x.Callbacks("once memory"), "resolved"],
                        ["reject", "fail", x.Callbacks("once memory"), "rejected"],
                        ["notify", "progress", x.Callbacks("memory")]
                    ],
                    n = "pending",
                    r = {
                        state: function() {
                            return n
                        },
                        always: function() {
                            return i.done(arguments).fail(arguments), this
                        },
                        then: function() {
                            var e = arguments;
                            return x.Deferred(function(n) {
                                x.each(t, function(t, o) {
                                    var a = o[0],
                                        s = x.isFunction(e[t]) && e[t];
                                    i[o[1]](function() {
                                        var e = s && s.apply(this, arguments);
                                        e && x.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[a + "With"](this === r ? n.promise() : this, s ? [e] : arguments)
                                    })
                                }), e = null
                            }).promise()
                        },
                        promise: function(e) {
                            return null != e ? x.extend(e, r) : r
                        }
                    },
                    i = {};
                return r.pipe = r.then, x.each(t, function(e, o) {
                    var a = o[2],
                        s = o[3];
                    r[o[1]] = a.add, s && a.add(function() {
                        n = s
                    }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function() {
                        return i[o[0] + "With"](this === i ? r : this, arguments), this
                    }, i[o[0] + "With"] = a.fireWith
                }), r.promise(i), e && e.call(i, i), i
            },
            when: function(e) {
                var t = 0,
                    n = h.call(arguments),
                    r = n.length,
                    i = 1 !== r || e && x.isFunction(e.promise) ? r : 0,
                    o = 1 === i ? e : x.Deferred(),
                    a = function(e, t, n) {
                        return function(r) {
                            t[e] = this, n[e] = arguments.length > 1 ? h.call(arguments) : r, n === s ? o.notifyWith(t, n) : --i || o.resolveWith(t, n)
                        }
                    },
                    s, u, l;
                if (r > 1)
                    for (s = Array(r), u = Array(r), l = Array(r); r > t; t++) n[t] && x.isFunction(n[t].promise) ? n[t].promise().done(a(t, l, n)).fail(o.reject).progress(a(t, u, s)) : --i;
                return i || o.resolveWith(l, n), o.promise()
            }
        }), x.support = function(t) {
            var n = o.createElement("input"),
                r = o.createDocumentFragment(),
                i = o.createElement("div"),
                a = o.createElement("select"),
                s = a.appendChild(o.createElement("option"));
            return n.type ? (n.type = "checkbox", t.checkOn = "" !== n.value, t.optSelected = s.selected, t.reliableMarginRight = !0, t.boxSizingReliable = !0, t.pixelPosition = !1, n.checked = !0, t.noCloneChecked = n.cloneNode(!0).checked, a.disabled = !0, t.optDisabled = !s.disabled, n = o.createElement("input"), n.value = "t", n.type = "radio", t.radioValue = "t" === n.value, n.setAttribute("checked", "t"), n.setAttribute("name", "t"), r.appendChild(n), t.checkClone = r.cloneNode(!0).cloneNode(!0).lastChild.checked, t.focusinBubbles = "onfocusin" in e, i.style.backgroundClip = "content-box", i.cloneNode(!0).style.backgroundClip = "", t.clearCloneStyle = "content-box" === i.style.backgroundClip, x(function() {
                var n, r, a = "padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",
                    s = o.getElementsByTagName("body")[0];
                s && (n = o.createElement("div"), n.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", s.appendChild(n).appendChild(i), i.innerHTML = "", i.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%", x.swap(s, null != s.style.zoom ? {
                    zoom: 1
                } : {}, function() {
                    t.boxSizing = 4 === i.offsetWidth
                }), e.getComputedStyle && (t.pixelPosition = "1%" !== (e.getComputedStyle(i, null) || {}).top, t.boxSizingReliable = "4px" === (e.getComputedStyle(i, null) || {
                    width: "4px"
                }).width, r = i.appendChild(o.createElement("div")), r.style.cssText = i.style.cssText = a, r.style.marginRight = r.style.width = "0", i.style.width = "1px", t.reliableMarginRight = !parseFloat((e.getComputedStyle(r, null) || {}).marginRight)), s.removeChild(n))
            }), t) : t
        }({});
        var L, H, O = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
            P = /([A-Z])/g;

        function q() {
            Object.defineProperty(this.cache = {}, 0, {
                get: function() {
                    return {}
                }
            }), this.expando = x.expando + Math.random()
        }
        q.uid = 1, q.accepts = function(e) {
            return e.nodeType ? 1 === e.nodeType || 9 === e.nodeType : !0
        }, q.prototype = {
            key: function(e) {
                if (!q.accepts(e)) return 0;
                var t = {},
                    n = e[this.expando];
                if (!n) {
                    n = q.uid++;
                    try {
                        t[this.expando] = {
                            value: n
                        }, Object.defineProperties(e, t)
                    } catch (r) {
                        t[this.expando] = n, x.extend(e, t)
                    }
                }
                return this.cache[n] || (this.cache[n] = {}), n
            },
            set: function(e, t, n) {
                var r, i = this.key(e),
                    o = this.cache[i];
                if ("string" == typeof t) o[t] = n;
                else if (x.isEmptyObject(o)) x.extend(this.cache[i], t);
                else
                    for (r in t) o[r] = t[r];
                return o
            },
            get: function(e, t) {
                var n = this.cache[this.key(e)];
                return t === undefined ? n : n[t]
            },
            access: function(e, t, n) {
                var r;
                return t === undefined || t && "string" == typeof t && n === undefined ? (r = this.get(e, t), r !== undefined ? r : this.get(e, x.camelCase(t))) : (this.set(e, t, n), n !== undefined ? n : t)
            },
            remove: function(e, t) {
                var n, r, i, o = this.key(e),
                    a = this.cache[o];
                if (t === undefined) this.cache[o] = {};
                else {
                    x.isArray(t) ? r = t.concat(t.map(x.camelCase)) : (i = x.camelCase(t), t in a ? r = [t, i] : (r = i, r = r in a ? [r] : r.match(w) || [])), n = r.length;
                    while (n--) delete a[r[n]]
                }
            },
            hasData: function(e) {
                return !x.isEmptyObject(this.cache[e[this.expando]] || {})
            },
            discard: function(e) {
                e[this.expando] && delete this.cache[e[this.expando]]
            }
        }, L = new q, H = new q, x.extend({
            acceptData: q.accepts,
            hasData: function(e) {
                return L.hasData(e) || H.hasData(e)
            },
            data: function(e, t, n) {
                return L.access(e, t, n)
            },
            removeData: function(e, t) {
                L.remove(e, t)
            },
            _data: function(e, t, n) {
                return H.access(e, t, n)
            },
            _removeData: function(e, t) {
                H.remove(e, t)
            }
        }), x.fn.extend({
            data: function(e, t) {
                var n, r, i = this[0],
                    o = 0,
                    a = null;
                if (e === undefined) {
                    if (this.length && (a = L.get(i), 1 === i.nodeType && !H.get(i, "hasDataAttrs"))) {
                        for (n = i.attributes; n.length > o; o++) r = n[o].name, 0 === r.indexOf("data-") && (r = x.camelCase(r.slice(5)), R(i, r, a[r]));
                        H.set(i, "hasDataAttrs", !0)
                    }
                    return a
                }
                return "object" == typeof e ? this.each(function() {
                    L.set(this, e)
                }) : x.access(this, function(t) {
                    var n, r = x.camelCase(e);
                    if (i && t === undefined) {
                        if (n = L.get(i, e), n !== undefined) return n;
                        if (n = L.get(i, r), n !== undefined) return n;
                        if (n = R(i, r, undefined), n !== undefined) return n
                    } else this.each(function() {
                        var n = L.get(this, r);
                        L.set(this, r, t), -1 !== e.indexOf("-") && n !== undefined && L.set(this, e, t)
                    })
                }, null, t, arguments.length > 1, null, !0)
            },
            removeData: function(e) {
                return this.each(function() {
                    L.remove(this, e)
                })
            }
        });

        function R(e, t, n) {
            var r;
            if (n === undefined && 1 === e.nodeType)
                if (r = "data-" + t.replace(P, "-$1").toLowerCase(), n = e.getAttribute(r), "string" == typeof n) {
                    try {
                        n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null : +n + "" === n ? +n : O.test(n) ? JSON.parse(n) : n
                    } catch (i) {}
                    L.set(e, t, n)
                } else n = undefined;
            return n
        }
        x.extend({
            queue: function(e, t, n) {
                var r;
                return e ? (t = (t || "fx") + "queue", r = H.get(e, t), n && (!r || x.isArray(n) ? r = H.access(e, t, x.makeArray(n)) : r.push(n)), r || []) : undefined
            },
            dequeue: function(e, t) {
                t = t || "fx";
                var n = x.queue(e, t),
                    r = n.length,
                    i = n.shift(),
                    o = x._queueHooks(e, t),
                    a = function() {
                        x.dequeue(e, t)
                    };
                "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, a, o)), !r && o && o.empty.fire()
            },
            _queueHooks: function(e, t) {
                var n = t + "queueHooks";
                return H.get(e, n) || H.access(e, n, {
                    empty: x.Callbacks("once memory").add(function() {
                        H.remove(e, [t + "queue", n])
                    })
                })
            }
        }), x.fn.extend({
            queue: function(e, t) {
                var n = 2;
                return "string" != typeof e && (t = e, e = "fx", n--), n > arguments.length ? x.queue(this[0], e) : t === undefined ? this : this.each(function() {
                    var n = x.queue(this, e, t);
                    x._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && x.dequeue(this, e)
                })
            },
            dequeue: function(e) {
                return this.each(function() {
                    x.dequeue(this, e)
                })
            },
            delay: function(e, t) {
                return e = x.fx ? x.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, n) {
                    var r = setTimeout(t, e);
                    n.stop = function() {
                        clearTimeout(r)
                    }
                })
            },
            clearQueue: function(e) {
                return this.queue(e || "fx", [])
            },
            promise: function(e, t) {
                var n, r = 1,
                    i = x.Deferred(),
                    o = this,
                    a = this.length,
                    s = function() {
                        --r || i.resolveWith(o, [o])
                    };
                "string" != typeof e && (t = e, e = undefined), e = e || "fx";
                while (a--) n = H.get(o[a], e + "queueHooks"), n && n.empty && (r++, n.empty.add(s));
                return s(), i.promise(t)
            }
        });
        var F, M, W = /[\t\r\n\f]/g,
            $ = /\r/g,
            B = /^(?:input|select|textarea|button)$/i;
        x.fn.extend({
            attr: function(e, t) {
                return x.access(this, x.attr, e, t, arguments.length > 1)
            },
            removeAttr: function(e) {
                return this.each(function() {
                    x.removeAttr(this, e)
                })
            },
            prop: function(e, t) {
                return x.access(this, x.prop, e, t, arguments.length > 1)
            },
            removeProp: function(e) {
                return this.each(function() {
                    delete this[x.propFix[e] || e]
                })
            },
            addClass: function(e) {
                var t, n, r, i, o, a = 0,
                    s = this.length,
                    u = "string" == typeof e && e;
                if (x.isFunction(e)) return this.each(function(t) {
                    x(this).addClass(e.call(this, t, this.className))
                });
                if (u)
                    for (t = (e || "").match(w) || []; s > a; a++)
                        if (n = this[a], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(W, " ") : " ")) {
                            o = 0;
                            while (i = t[o++]) 0 > r.indexOf(" " + i + " ") && (r += i + " ");
                            n.className = x.trim(r)
                        }
                return this
            },
            removeClass: function(e) {
                var t, n, r, i, o, a = 0,
                    s = this.length,
                    u = 0 === arguments.length || "string" == typeof e && e;
                if (x.isFunction(e)) return this.each(function(t) {
                    x(this).removeClass(e.call(this, t, this.className))
                });
                if (u)
                    for (t = (e || "").match(w) || []; s > a; a++)
                        if (n = this[a], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(W, " ") : "")) {
                            o = 0;
                            while (i = t[o++])
                                while (r.indexOf(" " + i + " ") >= 0) r = r.replace(" " + i + " ", " ");
                            n.className = e ? x.trim(r) : ""
                        }
                return this
            },
            toggleClass: function(e, t) {
                var n = typeof e;
                return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : x.isFunction(e) ? this.each(function(n) {
                    x(this).toggleClass(e.call(this, n, this.className, t), t)
                }) : this.each(function() {
                    if ("string" === n) {
                        var t, i = 0,
                            o = x(this),
                            a = e.match(w) || [];
                        while (t = a[i++]) o.hasClass(t) ? o.removeClass(t) : o.addClass(t)
                    } else(n === r || "boolean" === n) && (this.className && H.set(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : H.get(this, "__className__") || "")
                })
            },
            hasClass: function(e) {
                var t = " " + e + " ",
                    n = 0,
                    r = this.length;
                for (; r > n; n++)
                    if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(W, " ").indexOf(t) >= 0) return !0;
                return !1
            },
            val: function(e) {
                var t, n, r, i = this[0]; {
                    if (arguments.length) return r = x.isFunction(e), this.each(function(n) {
                        var i;
                        1 === this.nodeType && (i = r ? e.call(this, n, x(this).val()) : e, null == i ? i = "" : "number" == typeof i ? i += "" : x.isArray(i) && (i = x.map(i, function(e) {
                            return null == e ? "" : e + ""
                        })), t = x.valHooks[this.type] || x.valHooks[this.nodeName.toLowerCase()], t && "set" in t && t.set(this, i, "value") !== undefined || (this.value = i))
                    });
                    if (i) return t = x.valHooks[i.type] || x.valHooks[i.nodeName.toLowerCase()], t && "get" in t && (n = t.get(i, "value")) !== undefined ? n : (n = i.value, "string" == typeof n ? n.replace($, "") : null == n ? "" : n)
                }
            }
        }), x.extend({
            valHooks: {
                option: {
                    get: function(e) {
                        var t = e.attributes.value;
                        return !t || t.specified ? e.value : e.text
                    }
                },
                select: {
                    get: function(e) {
                        var t, n, r = e.options,
                            i = e.selectedIndex,
                            o = "select-one" === e.type || 0 > i,
                            a = o ? null : [],
                            s = o ? i + 1 : r.length,
                            u = 0 > i ? s : o ? i : 0;
                        for (; s > u; u++)
                            if (n = r[u], !(!n.selected && u !== i || (x.support.optDisabled ? n.disabled : null !== n.getAttribute("disabled")) || n.parentNode.disabled && x.nodeName(n.parentNode, "optgroup"))) {
                                if (t = x(n).val(), o) return t;
                                a.push(t)
                            }
                        return a
                    },
                    set: function(e, t) {
                        var n, r, i = e.options,
                            o = x.makeArray(t),
                            a = i.length;
                        while (a--) r = i[a], (r.selected = x.inArray(x(r).val(), o) >= 0) && (n = !0);
                        return n || (e.selectedIndex = -1), o
                    }
                }
            },
            attr: function(e, t, n) {
                var i, o, a = e.nodeType;
                if (e && 3 !== a && 8 !== a && 2 !== a) return typeof e.getAttribute === r ? x.prop(e, t, n) : (1 === a && x.isXMLDoc(e) || (t = t.toLowerCase(), i = x.attrHooks[t] || (x.expr.match.bool.test(t) ? M : F)), n === undefined ? i && "get" in i && null !== (o = i.get(e, t)) ? o : (o = x.find.attr(e, t), null == o ? undefined : o) : null !== n ? i && "set" in i && (o = i.set(e, n, t)) !== undefined ? o : (e.setAttribute(t, n + ""), n) : (x.removeAttr(e, t), undefined))
            },
            removeAttr: function(e, t) {
                var n, r, i = 0,
                    o = t && t.match(w);
                if (o && 1 === e.nodeType)
                    while (n = o[i++]) r = x.propFix[n] || n, x.expr.match.bool.test(n) && (e[r] = !1), e.removeAttribute(n)
            },
            attrHooks: {
                type: {
                    set: function(e, t) {
                        if (!x.support.radioValue && "radio" === t && x.nodeName(e, "input")) {
                            var n = e.value;
                            return e.setAttribute("type", t), n && (e.value = n), t
                        }
                    }
                }
            },
            propFix: {
                "for": "htmlFor",
                "class": "className"
            },
            prop: function(e, t, n) {
                var r, i, o, a = e.nodeType;
                if (e && 3 !== a && 8 !== a && 2 !== a) return o = 1 !== a || !x.isXMLDoc(e), o && (t = x.propFix[t] || t, i = x.propHooks[t]), n !== undefined ? i && "set" in i && (r = i.set(e, n, t)) !== undefined ? r : e[t] = n : i && "get" in i && null !== (r = i.get(e, t)) ? r : e[t]
            },
            propHooks: {
                tabIndex: {
                    get: function(e) {
                        return e.hasAttribute("tabindex") || B.test(e.nodeName) || e.href ? e.tabIndex : -1
                    }
                }
            }
        }), M = {
            set: function(e, t, n) {
                return t === !1 ? x.removeAttr(e, n) : e.setAttribute(n, n), n
            }
        }, x.each(x.expr.match.bool.source.match(/\w+/g), function(e, t) {
            var n = x.expr.attrHandle[t] || x.find.attr;
            x.expr.attrHandle[t] = function(e, t, r) {
                var i = x.expr.attrHandle[t],
                    o = r ? undefined : (x.expr.attrHandle[t] = undefined) != n(e, t, r) ? t.toLowerCase() : null;
                return x.expr.attrHandle[t] = i, o
            }
        }), x.support.optSelected || (x.propHooks.selected = {
            get: function(e) {
                var t = e.parentNode;
                return t && t.parentNode && t.parentNode.selectedIndex, null
            }
        }), x.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
            x.propFix[this.toLowerCase()] = this
        }), x.each(["radio", "checkbox"], function() {
            x.valHooks[this] = {
                set: function(e, t) {
                    return x.isArray(t) ? e.checked = x.inArray(x(e).val(), t) >= 0 : undefined
                }
            }, x.support.checkOn || (x.valHooks[this].get = function(e) {
                return null === e.getAttribute("value") ? "on" : e.value
            })
        });
        var I = /^key/,
            z = /^(?:mouse|contextmenu)|click/,
            _ = /^(?:focusinfocus|focusoutblur)$/,
            X = /^([^.]*)(?:\.(.+)|)$/;

        function U() {
            return !0
        }

        function V() {
            return !1
        }

        function Y() {
            try {
                return o.activeElement
            } catch (e) {}
        }
        x.event = {
            global: {},
            add: function(e, t, n, i, o) {
                var a, s, u, l, c, p, f, d, h, g, m, y = H.get(e);
                if (y) {
                    n.handler && (a = n, n = a.handler, o = a.selector), n.guid || (n.guid = x.guid++), (l = y.events) || (l = y.events = {}), (s = y.handle) || (s = y.handle = function(e) {
                        return typeof x === r || e && x.event.triggered === e.type ? undefined : x.event.dispatch.apply(s.elem, arguments)
                    }, s.elem = e), t = (t || "").match(w) || [""], c = t.length;
                    while (c--) u = X.exec(t[c]) || [], h = m = u[1], g = (u[2] || "").split(".").sort(), h && (f = x.event.special[h] || {}, h = (o ? f.delegateType : f.bindType) || h, f = x.event.special[h] || {}, p = x.extend({
                        type: h,
                        origType: m,
                        data: i,
                        handler: n,
                        guid: n.guid,
                        selector: o,
                        needsContext: o && x.expr.match.needsContext.test(o),
                        namespace: g.join(".")
                    }, a), (d = l[h]) || (d = l[h] = [], d.delegateCount = 0, f.setup && f.setup.call(e, i, g, s) !== !1 || e.addEventListener && e.addEventListener(h, s, !1)), f.add && (f.add.call(e, p), p.handler.guid || (p.handler.guid = n.guid)), o ? d.splice(d.delegateCount++, 0, p) : d.push(p), x.event.global[h] = !0);
                    e = null
                }
            },
            remove: function(e, t, n, r, i) {
                var o, a, s, u, l, c, p, f, d, h, g, m = H.hasData(e) && H.get(e);
                if (m && (u = m.events)) {
                    t = (t || "").match(w) || [""], l = t.length;
                    while (l--)
                        if (s = X.exec(t[l]) || [], d = g = s[1], h = (s[2] || "").split(".").sort(), d) {
                            p = x.event.special[d] || {}, d = (r ? p.delegateType : p.bindType) || d, f = u[d] || [], s = s[2] && RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = f.length;
                            while (o--) c = f[o], !i && g !== c.origType || n && n.guid !== c.guid || s && !s.test(c.namespace) || r && r !== c.selector && ("**" !== r || !c.selector) || (f.splice(o, 1), c.selector && f.delegateCount--, p.remove && p.remove.call(e, c));
                            a && !f.length && (p.teardown && p.teardown.call(e, h, m.handle) !== !1 || x.removeEvent(e, d, m.handle), delete u[d])
                        } else
                            for (d in u) x.event.remove(e, d + t[l], n, r, !0);
                    x.isEmptyObject(u) && (delete m.handle, H.remove(e, "events"))
                }
            },
            trigger: function(t, n, r, i) {
                var a, s, u, l, c, p, f, d = [r || o],
                    h = y.call(t, "type") ? t.type : t,
                    g = y.call(t, "namespace") ? t.namespace.split(".") : [];
                if (s = u = r = r || o, 3 !== r.nodeType && 8 !== r.nodeType && !_.test(h + x.event.triggered) && (h.indexOf(".") >= 0 && (g = h.split("."), h = g.shift(), g.sort()), c = 0 > h.indexOf(":") && "on" + h, t = t[x.expando] ? t : new x.Event(h, "object" == typeof t && t), t.isTrigger = i ? 2 : 3, t.namespace = g.join("."), t.namespace_re = t.namespace ? RegExp("(^|\\.)" + g.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = undefined, t.target || (t.target = r), n = null == n ? [t] : x.makeArray(n, [t]), f = x.event.special[h] || {}, i || !f.trigger || f.trigger.apply(r, n) !== !1)) {
                    if (!i && !f.noBubble && !x.isWindow(r)) {
                        for (l = f.delegateType || h, _.test(l + h) || (s = s.parentNode); s; s = s.parentNode) d.push(s), u = s;
                        u === (r.ownerDocument || o) && d.push(u.defaultView || u.parentWindow || e)
                    }
                    a = 0;
                    while ((s = d[a++]) && !t.isPropagationStopped()) t.type = a > 1 ? l : f.bindType || h, p = (H.get(s, "events") || {})[t.type] && H.get(s, "handle"), p && p.apply(s, n), p = c && s[c], p && x.acceptData(s) && p.apply && p.apply(s, n) === !1 && t.preventDefault();
                    return t.type = h, i || t.isDefaultPrevented() || f._default && f._default.apply(d.pop(), n) !== !1 || !x.acceptData(r) || c && x.isFunction(r[h]) && !x.isWindow(r) && (u = r[c], u && (r[c] = null), x.event.triggered = h, r[h](), x.event.triggered = undefined, u && (r[c] = u)), t.result
                }
            },
            dispatch: function(e) {
                e = x.event.fix(e);
                var t, n, r, i, o, a = [],
                    s = h.call(arguments),
                    u = (H.get(this, "events") || {})[e.type] || [],
                    l = x.event.special[e.type] || {};
                if (s[0] = e, e.delegateTarget = this, !l.preDispatch || l.preDispatch.call(this, e) !== !1) {
                    a = x.event.handlers.call(this, e, u), t = 0;
                    while ((i = a[t++]) && !e.isPropagationStopped()) {
                        e.currentTarget = i.elem, n = 0;
                        while ((o = i.handlers[n++]) && !e.isImmediatePropagationStopped())(!e.namespace_re || e.namespace_re.test(o.namespace)) && (e.handleObj = o, e.data = o.data, r = ((x.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, s), r !== undefined && (e.result = r) === !1 && (e.preventDefault(), e.stopPropagation()))
                    }
                    return l.postDispatch && l.postDispatch.call(this, e), e.result
                }
            },
            handlers: function(e, t) {
                var n, r, i, o, a = [],
                    s = t.delegateCount,
                    u = e.target;
                if (s && u.nodeType && (!e.button || "click" !== e.type))
                    for (; u !== this; u = u.parentNode || this)
                        if (u.disabled !== !0 || "click" !== e.type) {
                            for (r = [], n = 0; s > n; n++) o = t[n], i = o.selector + " ", r[i] === undefined && (r[i] = o.needsContext ? x(i, this).index(u) >= 0 : x.find(i, this, null, [u]).length), r[i] && r.push(o);
                            r.length && a.push({
                                elem: u,
                                handlers: r
                            })
                        }
                return t.length > s && a.push({
                    elem: this,
                    handlers: t.slice(s)
                }), a
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function(e, t) {
                    return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function(e, t) {
                    var n, r, i, a = t.button;
                    return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || o, r = n.documentElement, i = n.body, e.pageX = t.clientX + (r && r.scrollLeft || i && i.scrollLeft || 0) - (r && r.clientLeft || i && i.clientLeft || 0), e.pageY = t.clientY + (r && r.scrollTop || i && i.scrollTop || 0) - (r && r.clientTop || i && i.clientTop || 0)), e.which || a === undefined || (e.which = 1 & a ? 1 : 2 & a ? 3 : 4 & a ? 2 : 0), e
                }
            },
            fix: function(e) {
                if (e[x.expando]) return e;
                var t, n, r, i = e.type,
                    a = e,
                    s = this.fixHooks[i];
                s || (this.fixHooks[i] = s = z.test(i) ? this.mouseHooks : I.test(i) ? this.keyHooks : {}), r = s.props ? this.props.concat(s.props) : this.props, e = new x.Event(a), t = r.length;
                while (t--) n = r[t], e[n] = a[n];
                return e.target || (e.target = o), 3 === e.target.nodeType && (e.target = e.target.parentNode), s.filter ? s.filter(e, a) : e
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function() {
                        return this !== Y() && this.focus ? (this.focus(), !1) : undefined
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function() {
                        return this === Y() && this.blur ? (this.blur(), !1) : undefined
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function() {
                        return "checkbox" === this.type && this.click && x.nodeName(this, "input") ? (this.click(), !1) : undefined
                    },
                    _default: function(e) {
                        return x.nodeName(e.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(e) {
                        e.result !== undefined && (e.originalEvent.returnValue = e.result)
                    }
                }
            },
            simulate: function(e, t, n, r) {
                var i = x.extend(new x.Event, n, {
                    type: e,
                    isSimulated: !0,
                    originalEvent: {}
                });
                r ? x.event.trigger(i, null, t) : x.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()
            }
        }, x.removeEvent = function(e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n, !1)
        }, x.Event = function(e, t) {
            return this instanceof x.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.getPreventDefault && e.getPreventDefault() ? U : V) : this.type = e, t && x.extend(this, t), this.timeStamp = e && e.timeStamp || x.now(), this[x.expando] = !0, undefined) : new x.Event(e, t)
        }, x.Event.prototype = {
            isDefaultPrevented: V,
            isPropagationStopped: V,
            isImmediatePropagationStopped: V,
            preventDefault: function() {
                var e = this.originalEvent;
                this.isDefaultPrevented = U, e && e.preventDefault && e.preventDefault()
            },
            stopPropagation: function() {
                var e = this.originalEvent;
                this.isPropagationStopped = U, e && e.stopPropagation && e.stopPropagation()
            },
            stopImmediatePropagation: function() {
                this.isImmediatePropagationStopped = U, this.stopPropagation()
            }
        }, x.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout"
        }, function(e, t) {
            x.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function(e) {
                    var n, r = this,
                        i = e.relatedTarget,
                        o = e.handleObj;
                    return (!i || i !== r && !x.contains(r, i)) && (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t), n
                }
            }
        }), x.support.focusinBubbles || x.each({
            focus: "focusin",
            blur: "focusout"
        }, function(e, t) {
            var n = 0,
                r = function(e) {
                    x.event.simulate(t, e.target, x.event.fix(e), !0)
                };
            x.event.special[t] = {
                setup: function() {
                    0 === n++ && o.addEventListener(e, r, !0)
                },
                teardown: function() {
                    0 === --n && o.removeEventListener(e, r, !0)
                }
            }
        }), x.fn.extend({
            on: function(e, t, n, r, i) {
                var o, a;
                if ("object" == typeof e) {
                    "string" != typeof t && (n = n || t, t = undefined);
                    for (a in e) this.on(a, t, n, e[a], i);
                    return this
                }
                if (null == n && null == r ? (r = t, n = t = undefined) : null == r && ("string" == typeof t ? (r = n, n = undefined) : (r = n, n = t, t = undefined)), r === !1) r = V;
                else if (!r) return this;
                return 1 === i && (o = r, r = function(e) {
                    return x().off(e), o.apply(this, arguments)
                }, r.guid = o.guid || (o.guid = x.guid++)), this.each(function() {
                    x.event.add(this, e, r, n, t)
                })
            },
            one: function(e, t, n, r) {
                return this.on(e, t, n, r, 1)
            },
            off: function(e, t, n) {
                var r, i;
                if (e && e.preventDefault && e.handleObj) return r = e.handleObj, x(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this;
                if ("object" == typeof e) {
                    for (i in e) this.off(i, t, e[i]);
                    return this
                }
                return (t === !1 || "function" == typeof t) && (n = t, t = undefined), n === !1 && (n = V), this.each(function() {
                    x.event.remove(this, e, n, t)
                })
            },
            trigger: function(e, t) {
                return this.each(function() {
                    x.event.trigger(e, t, this)
                })
            },
            triggerHandler: function(e, t) {
                var n = this[0];
                return n ? x.event.trigger(e, t, n, !0) : undefined
            }
        });
        var G = /^.[^:#\[\.,]*$/,
            J = /^(?:parents|prev(?:Until|All))/,
            Q = x.expr.match.needsContext,
            K = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        x.fn.extend({
            find: function(e) {
                var t, n = [],
                    r = this,
                    i = r.length;
                if ("string" != typeof e) return this.pushStack(x(e).filter(function() {
                    for (t = 0; i > t; t++)
                        if (x.contains(r[t], this)) return !0
                }));
                for (t = 0; i > t; t++) x.find(e, r[t], n);
                return n = this.pushStack(i > 1 ? x.unique(n) : n), n.selector = this.selector ? this.selector + " " + e : e, n
            },
            has: function(e) {
                var t = x(e, this),
                    n = t.length;
                return this.filter(function() {
                    var e = 0;
                    for (; n > e; e++)
                        if (x.contains(this, t[e])) return !0
                })
            },
            not: function(e) {
                return this.pushStack(et(this, e || [], !0))
            },
            filter: function(e) {
                return this.pushStack(et(this, e || [], !1))
            },
            is: function(e) {
                return !!et(this, "string" == typeof e && Q.test(e) ? x(e) : e || [], !1).length
            },
            closest: function(e, t) {
                var n, r = 0,
                    i = this.length,
                    o = [],
                    a = Q.test(e) || "string" != typeof e ? x(e, t || this.context) : 0;
                for (; i > r; r++)
                    for (n = this[r]; n && n !== t; n = n.parentNode)
                        if (11 > n.nodeType && (a ? a.index(n) > -1 : 1 === n.nodeType && x.find.matchesSelector(n, e))) {
                            n = o.push(n);
                            break
                        }
                return this.pushStack(o.length > 1 ? x.unique(o) : o)
            },
            index: function(e) {
                return e ? "string" == typeof e ? g.call(x(e), this[0]) : g.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(e, t) {
                var n = "string" == typeof e ? x(e, t) : x.makeArray(e && e.nodeType ? [e] : e),
                    r = x.merge(this.get(), n);
                return this.pushStack(x.unique(r))
            },
            addBack: function(e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }
        });

        function Z(e, t) {
            while ((e = e[t]) && 1 !== e.nodeType);
            return e
        }
        x.each({
            parent: function(e) {
                var t = e.parentNode;
                return t && 11 !== t.nodeType ? t : null
            },
            parents: function(e) {
                return x.dir(e, "parentNode")
            },
            parentsUntil: function(e, t, n) {
                return x.dir(e, "parentNode", n)
            },
            next: function(e) {
                return Z(e, "nextSibling")
            },
            prev: function(e) {
                return Z(e, "previousSibling")
            },
            nextAll: function(e) {
                return x.dir(e, "nextSibling")
            },
            prevAll: function(e) {
                return x.dir(e, "previousSibling")
            },
            nextUntil: function(e, t, n) {
                return x.dir(e, "nextSibling", n)
            },
            prevUntil: function(e, t, n) {
                return x.dir(e, "previousSibling", n)
            },
            siblings: function(e) {
                return x.sibling((e.parentNode || {}).firstChild, e)
            },
            children: function(e) {
                return x.sibling(e.firstChild)
            },
            contents: function(e) {
                return e.contentDocument || x.merge([], e.childNodes)
            }
        }, function(e, t) {
            x.fn[e] = function(n, r) {
                var i = x.map(this, t, n);
                return "Until" !== e.slice(-5) && (r = n), r && "string" == typeof r && (i = x.filter(r, i)), this.length > 1 && (K[e] || x.unique(i), J.test(e) && i.reverse()), this.pushStack(i)
            }
        }), x.extend({
            filter: function(e, t, n) {
                var r = t[0];
                return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? x.find.matchesSelector(r, e) ? [r] : [] : x.find.matches(e, x.grep(t, function(e) {
                    return 1 === e.nodeType
                }))
            },
            dir: function(e, t, n) {
                var r = [],
                    i = n !== undefined;
                while ((e = e[t]) && 9 !== e.nodeType)
                    if (1 === e.nodeType) {
                        if (i && x(e).is(n)) break;
                        r.push(e)
                    }
                return r
            },
            sibling: function(e, t) {
                var n = [];
                for (; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
                return n
            }
        });

        function et(e, t, n) {
            if (x.isFunction(t)) return x.grep(e, function(e, r) {
                return !!t.call(e, r, e) !== n
            });
            if (t.nodeType) return x.grep(e, function(e) {
                return e === t !== n
            });
            if ("string" == typeof t) {
                if (G.test(t)) return x.filter(t, e, n);
                t = x.filter(t, e)
            }
            return x.grep(e, function(e) {
                return g.call(t, e) >= 0 !== n
            })
        }
        var tt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
            nt = /<([\w:]+)/,
            rt = /<|&#?\w+;/,
            it = /<(?:script|style|link)/i,
            ot = /^(?:checkbox|radio)$/i,
            at = /checked\s*(?:[^=]|=\s*.checked.)/i,
            st = /^$|\/(?:java|ecma)script/i,
            ut = /^true\/(.*)/,
            lt = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
            ct = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        ct.optgroup = ct.option, ct.tbody = ct.tfoot = ct.colgroup = ct.caption = ct.thead, ct.th = ct.td, x.fn.extend({
            text: function(e) {
                return x.access(this, function(e) {
                    return e === undefined ? x.text(this) : this.empty().append((this[0] && this[0].ownerDocument || o).createTextNode(e))
                }, null, e, arguments.length)
            },
            append: function() {
                return this.domManip(arguments, function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = pt(this, e);
                        t.appendChild(e)
                    }
                })
            },
            prepend: function() {
                return this.domManip(arguments, function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = pt(this, e);
                        t.insertBefore(e, t.firstChild)
                    }
                })
            },
            before: function() {
                return this.domManip(arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this)
                })
            },
            after: function() {
                return this.domManip(arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                })
            },
            remove: function(e, t) {
                var n, r = e ? x.filter(e, this) : this,
                    i = 0;
                for (; null != (n = r[i]); i++) t || 1 !== n.nodeType || x.cleanData(mt(n)), n.parentNode && (t && x.contains(n.ownerDocument, n) && ht(mt(n, "script")), n.parentNode.removeChild(n));
                return this
            },
            empty: function() {
                var e, t = 0;
                for (; null != (e = this[t]); t++) 1 === e.nodeType && (x.cleanData(mt(e, !1)), e.textContent = "");
                return this
            },
            clone: function(e, t) {
                return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function() {
                    return x.clone(this, e, t)
                })
            },
            html: function(e) {
                return x.access(this, function(e) {
                    var t = this[0] || {},
                        n = 0,
                        r = this.length;
                    if (e === undefined && 1 === t.nodeType) return t.innerHTML;
                    if ("string" == typeof e && !it.test(e) && !ct[(nt.exec(e) || ["", ""])[1].toLowerCase()]) {
                        e = e.replace(tt, "<$1></$2>");
                        try {
                            for (; r > n; n++) t = this[n] || {}, 1 === t.nodeType && (x.cleanData(mt(t, !1)), t.innerHTML = e);
                            t = 0
                        } catch (i) {}
                    }
                    t && this.empty().append(e)
                }, null, e, arguments.length)
            },
            replaceWith: function() {
                var e = x.map(this, function(e) {
                        return [e.nextSibling, e.parentNode]
                    }),
                    t = 0;
                return this.domManip(arguments, function(n) {
                    var r = e[t++],
                        i = e[t++];
                    i && (r && r.parentNode !== i && (r = this.nextSibling), x(this).remove(), i.insertBefore(n, r))
                }, !0), t ? this : this.remove()
            },
            detach: function(e) {
                return this.remove(e, !0)
            },
            domManip: function(e, t, n) {
                e = f.apply([], e);
                var r, i, o, a, s, u, l = 0,
                    c = this.length,
                    p = this,
                    d = c - 1,
                    h = e[0],
                    g = x.isFunction(h);
                if (g || !(1 >= c || "string" != typeof h || x.support.checkClone) && at.test(h)) return this.each(function(r) {
                    var i = p.eq(r);
                    g && (e[0] = h.call(this, r, i.html())), i.domManip(e, t, n)
                });
                if (c && (r = x.buildFragment(e, this[0].ownerDocument, !1, !n && this), i = r.firstChild, 1 === r.childNodes.length && (r = i), i)) {
                    for (o = x.map(mt(r, "script"), ft), a = o.length; c > l; l++) s = r, l !== d && (s = x.clone(s, !0, !0), a && x.merge(o, mt(s, "script"))), t.call(this[l], s, l);
                    if (a)
                        for (u = o[o.length - 1].ownerDocument, x.map(o, dt), l = 0; a > l; l++) s = o[l], st.test(s.type || "") && !H.access(s, "globalEval") && x.contains(u, s) && (s.src ? x._evalUrl(s.src) : x.globalEval(s.textContent.replace(lt, "")))
                }
                return this
            }
        }), x.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function(e, t) {
            x.fn[e] = function(e) {
                var n, r = [],
                    i = x(e),
                    o = i.length - 1,
                    a = 0;
                for (; o >= a; a++) n = a === o ? this : this.clone(!0), x(i[a])[t](n), d.apply(r, n.get());
                return this.pushStack(r)
            }
        }), x.extend({
            clone: function(e, t, n) {
                var r, i, o, a, s = e.cloneNode(!0),
                    u = x.contains(e.ownerDocument, e);
                if (!(x.support.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || x.isXMLDoc(e)))
                    for (a = mt(s), o = mt(e), r = 0, i = o.length; i > r; r++) yt(o[r], a[r]);
                if (t)
                    if (n)
                        for (o = o || mt(e), a = a || mt(s), r = 0, i = o.length; i > r; r++) gt(o[r], a[r]);
                    else gt(e, s);
                return a = mt(s, "script"), a.length > 0 && ht(a, !u && mt(e, "script")), s
            },
            buildFragment: function(e, t, n, r) {
                var i, o, a, s, u, l, c = 0,
                    p = e.length,
                    f = t.createDocumentFragment(),
                    d = [];
                for (; p > c; c++)
                    if (i = e[c], i || 0 === i)
                        if ("object" === x.type(i)) x.merge(d, i.nodeType ? [i] : i);
                        else if (rt.test(i)) {
                    o = o || f.appendChild(t.createElement("div")), a = (nt.exec(i) || ["", ""])[1].toLowerCase(), s = ct[a] || ct._default, o.innerHTML = s[1] + i.replace(tt, "<$1></$2>") + s[2], l = s[0];
                    while (l--) o = o.lastChild;
                    x.merge(d, o.childNodes), o = f.firstChild, o.textContent = ""
                } else d.push(t.createTextNode(i));
                f.textContent = "", c = 0;
                while (i = d[c++])
                    if ((!r || -1 === x.inArray(i, r)) && (u = x.contains(i.ownerDocument, i), o = mt(f.appendChild(i), "script"), u && ht(o), n)) {
                        l = 0;
                        while (i = o[l++]) st.test(i.type || "") && n.push(i)
                    }
                return f
            },
            cleanData: function(e) {
                var t, n, r, i, o, a, s = x.event.special,
                    u = 0;
                for (;
                    (n = e[u]) !== undefined; u++) {
                    if (q.accepts(n) && (o = n[H.expando], o && (t = H.cache[o]))) {
                        if (r = Object.keys(t.events || {}), r.length)
                            for (a = 0;
                                (i = r[a]) !== undefined; a++) s[i] ? x.event.remove(n, i) : x.removeEvent(n, i, t.handle);
                        H.cache[o] && delete H.cache[o]
                    }
                    delete L.cache[n[L.expando]]
                }
            },
            _evalUrl: function(e) {
                return x.ajax({
                    url: e,
                    type: "GET",
                    dataType: "script",
                    async: !1,
                    global: !1,
                    "throws": !0
                })
            }
        });

        function pt(e, t) {
            return x.nodeName(e, "table") && x.nodeName(1 === t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
        }

        function ft(e) {
            return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e
        }

        function dt(e) {
            var t = ut.exec(e.type);
            return t ? e.type = t[1] : e.removeAttribute("type"), e
        }

        function ht(e, t) {
            var n = e.length,
                r = 0;
            for (; n > r; r++) H.set(e[r], "globalEval", !t || H.get(t[r], "globalEval"))
        }

        function gt(e, t) {
            var n, r, i, o, a, s, u, l;
            if (1 === t.nodeType) {
                if (H.hasData(e) && (o = H.access(e), a = H.set(t, o), l = o.events)) {
                    delete a.handle, a.events = {};
                    for (i in l)
                        for (n = 0, r = l[i].length; r > n; n++) x.event.add(t, i, l[i][n])
                }
                L.hasData(e) && (s = L.access(e), u = x.extend({}, s), L.set(t, u))
            }
        }

        function mt(e, t) {
            var n = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
            return t === undefined || t && x.nodeName(e, t) ? x.merge([e], n) : n
        }

        function yt(e, t) {
            var n = t.nodeName.toLowerCase();
            "input" === n && ot.test(e.type) ? t.checked = e.checked : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue)
        }
        var vt, xt, bt = /^(none|table(?!-c[ea]).+)/,
            wt = /^margin/,
            Tt = RegExp("^(" + b + ")(.*)$", "i"),
            Ct = RegExp("^(" + b + ")(?!px)[a-z%]+$", "i"),
            Nt = RegExp("^([+-])=(" + b + ")", "i"),
            kt = {
                BODY: "block"
            },
            St = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            },
            Et = {
                letterSpacing: 0,
                fontWeight: 400
            },
            jt = ["Top", "Right", "Bottom", "Left"],
            Dt = ["Webkit", "O", "Moz", "ms"];

        function At(e, t) {
            if (t in e) return t;
            var n = t.charAt(0).toUpperCase() + t.slice(1),
                r = t,
                i = Dt.length;
            while (i--)
                if (t = Dt[i] + n, t in e) return t;
            return r
        }

        function Lt(e, t) {
            return e = t || e, "none" === x.css(e, "display") || !x.contains(e.ownerDocument, e)
        }

        function Ht(t) {
            return e.getComputedStyle(t, null)
        }

        function Ot(e, t) {
            var n, r, i, o = [],
                a = 0,
                s = e.length;
            for (; s > a; a++) r = e[a], r.style && (o[a] = H.get(r, "olddisplay"), n = r.style.display, t ? (o[a] || "none" !== n || (r.style.display = ""), "" === r.style.display && Lt(r) && (o[a] = H.access(r, "olddisplay", Ft(r.nodeName)))) : o[a] || (i = Lt(r), (n && "none" !== n || !i) && H.set(r, "olddisplay", i ? n : x.css(r, "display"))));
            for (a = 0; s > a; a++) r = e[a], r.style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? o[a] || "" : "none"));
            return e
        }
        x.fn.extend({
            css: function(e, t) {
                return x.access(this, function(e, t, n) {
                    var r, i, o = {},
                        a = 0;
                    if (x.isArray(t)) {
                        for (r = Ht(e), i = t.length; i > a; a++) o[t[a]] = x.css(e, t[a], !1, r);
                        return o
                    }
                    return n !== undefined ? x.style(e, t, n) : x.css(e, t)
                }, e, t, arguments.length > 1)
            },
            show: function() {
                return Ot(this, !0)
            },
            hide: function() {
                return Ot(this)
            },
            toggle: function(e) {
                return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                    Lt(this) ? x(this).show() : x(this).hide()
                })
            }
        }), x.extend({
            cssHooks: {
                opacity: {
                    get: function(e, t) {
                        if (t) {
                            var n = vt(e, "opacity");
                            return "" === n ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                columnCount: !0,
                fillOpacity: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                "float": "cssFloat"
            },
            style: function(e, t, n, r) {
                if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                    var i, o, a, s = x.camelCase(t),
                        u = e.style;
                    return t = x.cssProps[s] || (x.cssProps[s] = At(u, s)), a = x.cssHooks[t] || x.cssHooks[s], n === undefined ? a && "get" in a && (i = a.get(e, !1, r)) !== undefined ? i : u[t] : (o = typeof n, "string" === o && (i = Nt.exec(n)) && (n = (i[1] + 1) * i[2] + parseFloat(x.css(e, t)), o = "number"), null == n || "number" === o && isNaN(n) || ("number" !== o || x.cssNumber[s] || (n += "px"), x.support.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (u[t] = "inherit"), a && "set" in a && (n = a.set(e, n, r)) === undefined || (u[t] = n)), undefined)
                }
            },
            css: function(e, t, n, r) {
                var i, o, a, s = x.camelCase(t);
                return t = x.cssProps[s] || (x.cssProps[s] = At(e.style, s)), a = x.cssHooks[t] || x.cssHooks[s], a && "get" in a && (i = a.get(e, !0, n)), i === undefined && (i = vt(e, t, r)), "normal" === i && t in Et && (i = Et[t]), "" === n || n ? (o = parseFloat(i), n === !0 || x.isNumeric(o) ? o || 0 : i) : i
            }
        }), vt = function(e, t, n) {
            var r, i, o, a = n || Ht(e),
                s = a ? a.getPropertyValue(t) || a[t] : undefined,
                u = e.style;
            return a && ("" !== s || x.contains(e.ownerDocument, e) || (s = x.style(e, t)), Ct.test(s) && wt.test(t) && (r = u.width, i = u.minWidth, o = u.maxWidth, u.minWidth = u.maxWidth = u.width = s, s = a.width, u.width = r, u.minWidth = i, u.maxWidth = o)), s
        };

        function Pt(e, t, n) {
            var r = Tt.exec(t);
            return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t
        }

        function qt(e, t, n, r, i) {
            var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0,
                a = 0;
            for (; 4 > o; o += 2) "margin" === n && (a += x.css(e, n + jt[o], !0, i)), r ? ("content" === n && (a -= x.css(e, "padding" + jt[o], !0, i)), "margin" !== n && (a -= x.css(e, "border" + jt[o] + "Width", !0, i))) : (a += x.css(e, "padding" + jt[o], !0, i), "padding" !== n && (a += x.css(e, "border" + jt[o] + "Width", !0, i)));
            return a
        }

        function Rt(e, t, n) {
            var r = !0,
                i = "width" === t ? e.offsetWidth : e.offsetHeight,
                o = Ht(e),
                a = x.support.boxSizing && "border-box" === x.css(e, "boxSizing", !1, o);
            if (0 >= i || null == i) {
                if (i = vt(e, t, o), (0 > i || null == i) && (i = e.style[t]), Ct.test(i)) return i;
                r = a && (x.support.boxSizingReliable || i === e.style[t]), i = parseFloat(i) || 0
            }
            return i + qt(e, t, n || (a ? "border" : "content"), r, o) + "px"
        }

        function Ft(e) {
            var t = o,
                n = kt[e];
            return n || (n = Mt(e, t), "none" !== n && n || (xt = (xt || x("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(t.documentElement), t = (xt[0].contentWindow || xt[0].contentDocument).document, t.write("<!doctype html><html><body>"), t.close(), n = Mt(e, t), xt.detach()), kt[e] = n), n
        }

        function Mt(e, t) {
            var n = x(t.createElement(e)).appendTo(t.body),
                r = x.css(n[0], "display");
            return n.remove(), r
        }
        x.each(["height", "width"], function(e, t) {
            x.cssHooks[t] = {
                get: function(e, n, r) {
                    return n ? 0 === e.offsetWidth && bt.test(x.css(e, "display")) ? x.swap(e, St, function() {
                        return Rt(e, t, r)
                    }) : Rt(e, t, r) : undefined
                },
                set: function(e, n, r) {
                    var i = r && Ht(e);
                    return Pt(e, n, r ? qt(e, t, r, x.support.boxSizing && "border-box" === x.css(e, "boxSizing", !1, i), i) : 0)
                }
            }
        }), x(function() {
            x.support.reliableMarginRight || (x.cssHooks.marginRight = {
                get: function(e, t) {
                    return t ? x.swap(e, {
                        display: "inline-block"
                    }, vt, [e, "marginRight"]) : undefined
                }
            }), !x.support.pixelPosition && x.fn.position && x.each(["top", "left"], function(e, t) {
                x.cssHooks[t] = {
                    get: function(e, n) {
                        return n ? (n = vt(e, t), Ct.test(n) ? x(e).position()[t] + "px" : n) : undefined
                    }
                }
            })
        }), x.expr && x.expr.filters && (x.expr.filters.hidden = function(e) {
            return 0 >= e.offsetWidth && 0 >= e.offsetHeight
        }, x.expr.filters.visible = function(e) {
            return !x.expr.filters.hidden(e)
        }), x.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function(e, t) {
            x.cssHooks[e + t] = {
                expand: function(n) {
                    var r = 0,
                        i = {},
                        o = "string" == typeof n ? n.split(" ") : [n];
                    for (; 4 > r; r++) i[e + jt[r] + t] = o[r] || o[r - 2] || o[0];
                    return i
                }
            }, wt.test(e) || (x.cssHooks[e + t].set = Pt)
        });
        var Wt = /%20/g,
            $t = /\[\]$/,
            Bt = /\r?\n/g,
            It = /^(?:submit|button|image|reset|file)$/i,
            zt = /^(?:input|select|textarea|keygen)/i;
        x.fn.extend({
            serialize: function() {
                return x.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map(function() {
                    var e = x.prop(this, "elements");
                    return e ? x.makeArray(e) : this
                }).filter(function() {
                    var e = this.type;
                    return this.name && !x(this).is(":disabled") && zt.test(this.nodeName) && !It.test(e) && (this.checked || !ot.test(e))
                }).map(function(e, t) {
                    var n = x(this).val();
                    return null == n ? null : x.isArray(n) ? x.map(n, function(e) {
                        return {
                            name: t.name,
                            value: e.replace(Bt, "\r\n")
                        }
                    }) : {
                        name: t.name,
                        value: n.replace(Bt, "\r\n")
                    }
                }).get()
            }
        }), x.param = function(e, t) {
            var n, r = [],
                i = function(e, t) {
                    t = x.isFunction(t) ? t() : null == t ? "" : t, r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
                };
            if (t === undefined && (t = x.ajaxSettings && x.ajaxSettings.traditional), x.isArray(e) || e.jquery && !x.isPlainObject(e)) x.each(e, function() {
                i(this.name, this.value)
            });
            else
                for (n in e) _t(n, e[n], t, i);
            return r.join("&").replace(Wt, "+")
        };

        function _t(e, t, n, r) {
            var i;
            if (x.isArray(t)) x.each(t, function(t, i) {
                n || $t.test(e) ? r(e, i) : _t(e + "[" + ("object" == typeof i ? t : "") + "]", i, n, r)
            });
            else if (n || "object" !== x.type(t)) r(e, t);
            else
                for (i in t) _t(e + "[" + i + "]", t[i], n, r)
        }
        var Xt, Ut, Vt = x.now(),
            Yt = /\?/,
            Gt = /#.*$/,
            Jt = /([?&])_=[^&]*/,
            Qt = /^(.*?):[ \t]*([^\r\n]*)$/gm,
            Kt = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
            Zt = /^(?:GET|HEAD)$/,
            en = /^\/\//,
            tn = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
            nn = x.fn.load,
            rn = {},
            on = {},
            an = "*/".concat("*");
        try {
            Ut = i.href
        } catch (sn) {
            Ut = o.createElement("a"), Ut.href = "", Ut = Ut.href
        }
        Xt = tn.exec(Ut.toLowerCase()) || [];

        function un(e) {
            return function(t, n) {
                "string" != typeof t && (n = t, t = "*");
                var r, i = 0,
                    o = t.toLowerCase().match(w) || [];
                if (x.isFunction(n))
                    while (r = o[i++]) "+" === r[0] ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
            }
        }

        function ln(e, t, n, r) {
            var i = {},
                o = e === on;

            function a(s) {
                var u;
                return i[s] = !0, x.each(e[s] || [], function(e, s) {
                    var l = s(t, n, r);
                    return "string" != typeof l || o || i[l] ? o ? !(u = l) : undefined : (t.dataTypes.unshift(l), a(l), !1)
                }), u
            }
            return a(t.dataTypes[0]) || !i["*"] && a("*")
        }

        function cn(e, t) {
            var n, r, i = x.ajaxSettings.flatOptions || {};
            for (n in t) t[n] !== undefined && ((i[n] ? e : r || (r = {}))[n] = t[n]);
            return r && x.extend(!0, e, r), e
        }
        x.fn.load = function(e, t, n) {
            if ("string" != typeof e && nn) return nn.apply(this, arguments);
            var r, i, o, a = this,
                s = e.indexOf(" ");
            return s >= 0 && (r = e.slice(s), e = e.slice(0, s)), x.isFunction(t) ? (n = t, t = undefined) : t && "object" == typeof t && (i = "POST"), a.length > 0 && x.ajax({
                url: e,
                type: i,
                dataType: "html",
                data: t
            }).done(function(e) {
                o = arguments, a.html(r ? x("<div>").append(x.parseHTML(e)).find(r) : e)
            }).complete(n && function(e, t) {
                a.each(n, o || [e.responseText, t, e])
            }), this
        }, x.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
            x.fn[t] = function(e) {
                return this.on(t, e)
            }
        }), x.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: Ut,
                type: "GET",
                isLocal: Kt.test(Xt[1]),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": an,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /xml/,
                    html: /html/,
                    json: /json/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": x.parseJSON,
                    "text xml": x.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(e, t) {
                return t ? cn(cn(e, x.ajaxSettings), t) : cn(x.ajaxSettings, e)
            },
            ajaxPrefilter: un(rn),
            ajaxTransport: un(on),
            ajax: function(e, t) {
                "object" == typeof e && (t = e, e = undefined), t = t || {};
                var n, r, i, o, a, s, u, l, c = x.ajaxSetup({}, t),
                    p = c.context || c,
                    f = c.context && (p.nodeType || p.jquery) ? x(p) : x.event,
                    d = x.Deferred(),
                    h = x.Callbacks("once memory"),
                    g = c.statusCode || {},
                    m = {},
                    y = {},
                    v = 0,
                    b = "canceled",
                    T = {
                        readyState: 0,
                        getResponseHeader: function(e) {
                            var t;
                            if (2 === v) {
                                if (!o) {
                                    o = {};
                                    while (t = Qt.exec(i)) o[t[1].toLowerCase()] = t[2]
                                }
                                t = o[e.toLowerCase()]
                            }
                            return null == t ? null : t
                        },
                        getAllResponseHeaders: function() {
                            return 2 === v ? i : null
                        },
                        setRequestHeader: function(e, t) {
                            var n = e.toLowerCase();
                            return v || (e = y[n] = y[n] || e, m[e] = t), this
                        },
                        overrideMimeType: function(e) {
                            return v || (c.mimeType = e), this
                        },
                        statusCode: function(e) {
                            var t;
                            if (e)
                                if (2 > v)
                                    for (t in e) g[t] = [g[t], e[t]];
                                else T.always(e[T.status]);
                            return this
                        },
                        abort: function(e) {
                            var t = e || b;
                            return n && n.abort(t), N(0, t), this
                        }
                    };
                if (d.promise(T).complete = h.add, T.success = T.done, T.error = T.fail, c.url = ((e || c.url || Ut) + "").replace(Gt, "").replace(en, Xt[1] + "//"), c.type = t.method || t.type || c.method || c.type, c.dataTypes = x.trim(c.dataType || "*").toLowerCase().match(w) || [""], null == c.crossDomain && (s = tn.exec(c.url.toLowerCase()), c.crossDomain = !(!s || s[1] === Xt[1] && s[2] === Xt[2] && (s[3] || ("http:" === s[1] ? "80" : "443")) === (Xt[3] || ("http:" === Xt[1] ? "80" : "443")))), c.data && c.processData && "string" != typeof c.data && (c.data = x.param(c.data, c.traditional)), ln(rn, c, t, T), 2 === v) return T;
                u = c.global, u && 0 === x.active++ && x.event.trigger("ajaxStart"), c.type = c.type.toUpperCase(), c.hasContent = !Zt.test(c.type), r = c.url, c.hasContent || (c.data && (r = c.url += (Yt.test(r) ? "&" : "?") + c.data, delete c.data), c.cache === !1 && (c.url = Jt.test(r) ? r.replace(Jt, "$1_=" + Vt++) : r + (Yt.test(r) ? "&" : "?") + "_=" + Vt++)), c.ifModified && (x.lastModified[r] && T.setRequestHeader("If-Modified-Since", x.lastModified[r]), x.etag[r] && T.setRequestHeader("If-None-Match", x.etag[r])), (c.data && c.hasContent && c.contentType !== !1 || t.contentType) && T.setRequestHeader("Content-Type", c.contentType), T.setRequestHeader("Accept", c.dataTypes[0] && c.accepts[c.dataTypes[0]] ? c.accepts[c.dataTypes[0]] + ("*" !== c.dataTypes[0] ? ", " + an + "; q=0.01" : "") : c.accepts["*"]);
                for (l in c.headers) T.setRequestHeader(l, c.headers[l]);
                if (c.beforeSend && (c.beforeSend.call(p, T, c) === !1 || 2 === v)) return T.abort();
                b = "abort";
                for (l in {
                        success: 1,
                        error: 1,
                        complete: 1
                    }) T[l](c[l]);
                if (n = ln(on, c, t, T)) {
                    T.readyState = 1, u && f.trigger("ajaxSend", [T, c]), c.async && c.timeout > 0 && (a = setTimeout(function() {
                        T.abort("timeout")
                    }, c.timeout));
                    try {
                        v = 1, n.send(m, N)
                    } catch (C) {
                        if (!(2 > v)) throw C;
                        N(-1, C)
                    }
                } else N(-1, "No Transport");

                function N(e, t, o, s) {
                    var l, m, y, b, w, C = t;
                    2 !== v && (v = 2, a && clearTimeout(a), n = undefined, i = s || "", T.readyState = e > 0 ? 4 : 0, l = e >= 200 && 300 > e || 304 === e, o && (b = pn(c, T, o)), b = fn(c, b, T, l), l ? (c.ifModified && (w = T.getResponseHeader("Last-Modified"), w && (x.lastModified[r] = w), w = T.getResponseHeader("etag"), w && (x.etag[r] = w)), 204 === e || "HEAD" === c.type ? C = "nocontent" : 304 === e ? C = "notmodified" : (C = b.state, m = b.data, y = b.error, l = !y)) : (y = C, (e || !C) && (C = "error", 0 > e && (e = 0))), T.status = e, T.statusText = (t || C) + "", l ? d.resolveWith(p, [m, C, T]) : d.rejectWith(p, [T, C, y]), T.statusCode(g), g = undefined, u && f.trigger(l ? "ajaxSuccess" : "ajaxError", [T, c, l ? m : y]), h.fireWith(p, [T, C]), u && (f.trigger("ajaxComplete", [T, c]), --x.active || x.event.trigger("ajaxStop")))
                }
                return T
            },
            getJSON: function(e, t, n) {
                return x.get(e, t, n, "json")
            },
            getScript: function(e, t) {
                return x.get(e, undefined, t, "script")
            }
        }), x.each(["get", "post"], function(e, t) {
            x[t] = function(e, n, r, i) {
                return x.isFunction(n) && (i = i || r, r = n, n = undefined), x.ajax({
                    url: e,
                    type: t,
                    dataType: i,
                    data: n,
                    success: r
                })
            }
        });

        function pn(e, t, n) {
            var r, i, o, a, s = e.contents,
                u = e.dataTypes;
            while ("*" === u[0]) u.shift(), r === undefined && (r = e.mimeType || t.getResponseHeader("Content-Type"));
            if (r)
                for (i in s)
                    if (s[i] && s[i].test(r)) {
                        u.unshift(i);
                        break
                    }
            if (u[0] in n) o = u[0];
            else {
                for (i in n) {
                    if (!u[0] || e.converters[i + " " + u[0]]) {
                        o = i;
                        break
                    }
                    a || (a = i)
                }
                o = o || a
            }
            return o ? (o !== u[0] && u.unshift(o), n[o]) : undefined
        }

        function fn(e, t, n, r) {
            var i, o, a, s, u, l = {},
                c = e.dataTypes.slice();
            if (c[1])
                for (a in e.converters) l[a.toLowerCase()] = e.converters[a];
            o = c.shift();
            while (o)
                if (e.responseFields[o] && (n[e.responseFields[o]] = t), !u && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), u = o, o = c.shift())
                    if ("*" === o) o = u;
                    else if ("*" !== u && u !== o) {
                if (a = l[u + " " + o] || l["* " + o], !a)
                    for (i in l)
                        if (s = i.split(" "), s[1] === o && (a = l[u + " " + s[0]] || l["* " + s[0]])) {
                            a === !0 ? a = l[i] : l[i] !== !0 && (o = s[0], c.unshift(s[1]));
                            break
                        }
                if (a !== !0)
                    if (a && e["throws"]) t = a(t);
                    else try {
                        t = a(t)
                    } catch (p) {
                        return {
                            state: "parsererror",
                            error: a ? p : "No conversion from " + u + " to " + o
                        }
                    }
            }
            return {
                state: "success",
                data: t
            }
        }
        x.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /(?:java|ecma)script/
            },
            converters: {
                "text script": function(e) {
                    return x.globalEval(e), e
                }
            }
        }), x.ajaxPrefilter("script", function(e) {
            e.cache === undefined && (e.cache = !1), e.crossDomain && (e.type = "GET")
        }), x.ajaxTransport("script", function(e) {
            if (e.crossDomain) {
                var t, n;
                return {
                    send: function(r, i) {
                        t = x("<script>").prop({
                            async: !0,
                            charset: e.scriptCharset,
                            src: e.url
                        }).on("load error", n = function(e) {
                            t.remove(), n = null, e && i("error" === e.type ? 404 : 200, e.type)
                        }), o.head.appendChild(t[0])
                    },
                    abort: function() {
                        n && n()
                    }
                }
            }
        });
        var dn = [],
            hn = /(=)\?(?=&|$)|\?\?/;
        x.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var e = dn.pop() || x.expando + "_" + Vt++;
                return this[e] = !0, e
            }
        }), x.ajaxPrefilter("json jsonp", function(t, n, r) {
            var i, o, a, s = t.jsonp !== !1 && (hn.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && hn.test(t.data) && "data");
            return s || "jsonp" === t.dataTypes[0] ? (i = t.jsonpCallback = x.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, s ? t[s] = t[s].replace(hn, "$1" + i) : t.jsonp !== !1 && (t.url += (Yt.test(t.url) ? "&" : "?") + t.jsonp + "=" + i), t.converters["script json"] = function() {
                return a || x.error(i + " was not called"), a[0]
            }, t.dataTypes[0] = "json", o = e[i], e[i] = function() {
                a = arguments
            }, r.always(function() {
                e[i] = o, t[i] && (t.jsonpCallback = n.jsonpCallback, dn.push(i)), a && x.isFunction(o) && o(a[0]), a = o = undefined
            }), "script") : undefined
        }), x.ajaxSettings.xhr = function() {
            try {
                return new XMLHttpRequest
            } catch (e) {}
        };
        var gn = x.ajaxSettings.xhr(),
            mn = {
                0: 200,
                1223: 204
            },
            yn = 0,
            vn = {};
        e.ActiveXObject && x(e).on("unload", function() {
            for (var e in vn) vn[e]();
            vn = undefined
        }), x.support.cors = !!gn && "withCredentials" in gn, x.support.ajax = gn = !!gn, x.ajaxTransport(function(e) {
            var t;
            return x.support.cors || gn && !e.crossDomain ? {
                send: function(n, r) {
                    var i, o, a = e.xhr();
                    if (a.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields)
                        for (i in e.xhrFields) a[i] = e.xhrFields[i];
                    e.mimeType && a.overrideMimeType && a.overrideMimeType(e.mimeType), e.crossDomain || n["X-Requested-With"] || (n["X-Requested-With"] = "XMLHttpRequest");
                    for (i in n) a.setRequestHeader(i, n[i]);
                    t = function(e) {
                        return function() {
                            t && (delete vn[o], t = a.onload = a.onerror = null, "abort" === e ? a.abort() : "error" === e ? r(a.status || 404, a.statusText) : r(mn[a.status] || a.status, a.statusText, "string" == typeof a.responseText ? {
                                text: a.responseText
                            } : undefined, a.getAllResponseHeaders()))
                        }
                    }, a.onload = t(), a.onerror = t("error"), t = vn[o = yn++] = t("abort"), a.send(e.hasContent && e.data || null)
                },
                abort: function() {
                    t && t()
                }
            } : undefined
        }), x.fn.offset = function(e) {
            if (arguments.length) return e === undefined ? this : this.each(function(t) {
                x.offset.setOffset(this, e, t)
            });
            var t, n, i = this[0],
                o = {
                    top: 0,
                    left: 0
                },
                a = i && i.ownerDocument;
            if (a) return t = a.documentElement, x.contains(t, i) ? (typeof i.getBoundingClientRect !== r && (o = i.getBoundingClientRect()), n = xn(a), {
                top: o.top + n.pageYOffset - t.clientTop,
                left: o.left + n.pageXOffset - t.clientLeft
            }) : o
        }, x.offset = {
            setOffset: function(e, t, n) {
                var r, i, o, a, s, u, l, c = x.css(e, "position"),
                    p = x(e),
                    f = {};
                "static" === c && (e.style.position = "relative"), s = p.offset(), o = x.css(e, "top"), u = x.css(e, "left"), l = ("absolute" === c || "fixed" === c) && (o + u).indexOf("auto") > -1, l ? (r = p.position(), a = r.top, i = r.left) : (a = parseFloat(o) || 0, i = parseFloat(u) || 0), x.isFunction(t) && (t = t.call(e, n, s)), null != t.top && (f.top = t.top - s.top + a), null != t.left && (f.left = t.left - s.left + i), "using" in t ? t.using.call(e, f) : p.css(f)
            }
        }, x.fn.extend({
            position: function() {
                if (this[0]) {
                    var e, t, n = this[0],
                        r = {
                            top: 0,
                            left: 0
                        };
                    return "fixed" === x.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), x.nodeName(e[0], "html") || (r = e.offset()), r.top += x.css(e[0], "borderTopWidth", !0), r.left += x.css(e[0], "borderLeftWidth", !0)), {
                        top: t.top - r.top - x.css(n, "marginTop", !0),
                        left: t.left - r.left - x.css(n, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function() {
                return this.map(function() {
                    var e = this.offsetParent || a;
                    while (e && !x.nodeName(e, "html") && "static" === x.css(e, "position")) e = e.offsetParent;
                    return e || a
                })
            }
        }), x.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function(t, n) {
            var r = "pageYOffset" === n;
            x.fn[t] = function(i) {
                return x.access(this, function(t, i, o) {
                    var a = xn(t);
                    return o === undefined ? a ? a[n] : t[i] : (a ? a.scrollTo(r ? e.pageXOffset : o, r ? o : e.pageYOffset) : t[i] = o, undefined)
                }, t, i, arguments.length, null)
            }
        });

        function xn(e) {
            return x.isWindow(e) ? e : 9 === e.nodeType && e.defaultView
        }
        x.each({
            Height: "height",
            Width: "width"
        }, function(e, t) {
            x.each({
                padding: "inner" + e,
                content: t,
                "": "outer" + e
            }, function(n, r) {
                x.fn[r] = function(r, i) {
                    var o = arguments.length && (n || "boolean" != typeof r),
                        a = n || (r === !0 || i === !0 ? "margin" : "border");
                    return x.access(this, function(t, n, r) {
                        var i;
                        return x.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (i = t.documentElement, Math.max(t.body["scroll" + e], i["scroll" + e], t.body["offset" + e], i["offset" + e], i["client" + e])) : r === undefined ? x.css(t, n, a) : x.style(t, n, r, a)
                    }, t, o ? r : undefined, o, null)
                }
            })
        }), "object" == typeof module && module && "object" == typeof module.exports ? module.exports = x : "function" == typeof define && define.amd && define("jquery", [], function() {
            return x
        }), "object" == typeof e && "object" == typeof e.document && (e.jQuery = e.$ = x)
    })(window);;
    //]]>
    </script>
    <style type="text/css">
    /* Prevent pinch and zoom and double tap zoom */
    
    html,
    body {
        -ms-content-zooming: none;
    }
    /* THBRAND Combined Asset Start */
    
    .sw_plus,
    .sw_up,
    .sw_down,
    .sw_st,
    .sw_sth,
    .sw_ste,
    .sw_tpcbk,
    .sw_play,
    .sw_playd,
    /* disabled */
    
    .sw_playa,
    /* active */
    
    .sw_playp
    /* paused */
    
    {
        background-image: url(/sa/simg/sw_mg_l_4f_m_g_blackstars.png);
        background-repeat: no-repeat;
        background-size: 320px 38px;
    }
    /* Add icon */
    
    .sw_plus {
        background-position: -216px 0;
        height: 10px;
        width: 10px;
    }
    
    .sw_play,
    /*Play icon*/
    
    .sw_playa,
    /* active */
    
    .sw_playd,
    /* disabled */
    
    .sw_playp
    /* paused */
    
    {
        height: 16px;
        width: 16px;
    }
    
    .sw_play {
        background-position: -228px 0;
    }
    
    .sw_playa,
    .sw_playd {
        background-position: -246px 0;
    }
    
    .sw_playp {
        background-position: -264px 0;
    }
    
    .sw_up,
    /* Up (collapse) */
    
    .sw_down
    /* down (expand) */
    
    {
        height: 14px;
        width: 14px;
    }
    
    .sw_down {
        background-position: -184px 0;
    }
    
    .sw_up {
        background-position: -152px 0;
    }
    
    *:active > .sw_up,
    *:focus > .sw_up {
        background-position: -168px 0;
    }
    
    *:active > .sw_down,
    *:focus > .sw_down {
        background-position: -200px 0;
    }
    /* rating star */
    
    .sw_st,
    /* full gold */
    
    .sw_sth,
    /* left half star */
    
    .sw_ste
    /* empty (light grey) */
    
    {
        height: 12px;
        width: 12px;
        display: inline-block;
        padding-right: 1px;
    }
    
    .sw_st {
        background-position: -238px -22px;
    }
    
    .sw_sth {
        background-position: -266px -22px;
    }
    
    .sw_ste {
        background-position: -252px -22px;
    }
    
    .sw_tpcbk {
        background-position: -124px 0px;
    }
    /* START COLORS */
    
    html,
    body {
        background-color: white;
    }
    
    #b_results > .b_pag
    /* Task 1249184 : [Mobile 1st][wholepage] Paginiation - Remove legacy style after change ajax pagination */
    
    {
        background-color: white;
    }
    
    body,
    .b_corActList,
    .b_corActList a,
    .b_corActList a:visited,
    .b_promoteText,
    .b_action {
        color: black;
    }
    
    input[type="text"] {
        color: #404040;
        border-color: #bbbbbb;
    }
    
    input[type="text"]:focus {
        color: black;
        border-color: #404040;
    }
    
    #b_pole .b_ans {
        background-color: white;
    }
    
    #b_results,
    #b_results .b_defaultText,
    .cbl
    /* label in Factrow */
    
    {
        color: black;
    }
    
    #b_results > li a {
        color: black;
    }
    
    .sb_pag a.sb_pagS,
    /* Task 1249184 : [Mobile 1st][wholepage] Paginiation - Remove legacy style after change ajax pagination */
    
    #b_results > li,
    #b_content > .sml
    /* Morepage pagination */
    
    {
        background-color: white;
    }
    
    .sb_pagS {
        border-color: #cccccc;
    }
    
    #b_results > .b_ad {
        color: #303030;
        background-color: #f9fcf7;
    }
    
    #b_results > .b_ad a {
        color: #0078d7;
    }
    
    #b_results > .b_ad a:visited {
        color: #6010d0;
    }
    
    #b_results p {
        color: black;
    }
    
    a,
    #b_results .b_no a {
        color: black;
    }
    
    a:visited,
    #b_results > li a:visited,
    #sb_feedback:visited {
        color: #600090;
    }
    
    cite,
    #b_results cite.sb_crmb a,
    /* Even breadcrumb links in the cite tag need to respect its color */
    
    #b_results cite a.sb_metalink
    /* Even attribution links in the cite tag need to respect its color */
    
    {
        color: #767676;
    }
    
    .b_factrow,
    .b_attribution,
    .b_focusLabel,
    .b_secondaryFocus,
    .b_secondaryText,
    .b_demoteText,
    .b_footnote,
    .b_dropdown,
    .b_footnote .cbl,
    .b_meta,
    .b_entitySubTitle,
    #b_results .b_footnote a,
    #b_results .b_footnote a:visited {
        color: #767676;
    }
    /* footer */
    
    footer {
        color: #777777;
        background-color: #333333;
    }
    
    footer a,
    footer a:visited,
    footer span {
        color: white;
    }
    /* end of footer */
    /*secondary text styles*/
    
    .sb_meta,
    label {
        color: #767676;
    }
    
    .s_btn.brd.b_highlighted {
        background: #0078d7;
        border-color: #0078d7;
    }
    
    input.b_highlighted:focus,
    #b_results .s_btn.b_highlighted a:visited,
    #b_results .s_btn.b_highlighted a,
    #b_results .s_btn.b_highlighted
    /* #b_results is needed to fix a bug that the button text color remains blue when the background turns blue in highlighted mode, and it is to revert "#b_results>li a { color:blue}" */
    
    {
        color: white;
    }
    
    select {
        background-color: white;
    }
    
    .b_subModule,
    .b_suppModule {
        border-bottom-color: #eeeeee;
    }
    /* Primary alteration in spell suggest */
    
    #b_results .b_pAlt {
        color: #d90026;
    }
    
    .b_alert,
    #b_results .b_no .b_alert {
        color: #d90026;
    }
    
    #b_results .b_alert {
        color: #d90026;
    }
    
    .pushpin {
        background: #4499ff;
        color: white;
    }
    
    .b_posText {
        color: #339900;
    }
    
    .b_negText {
        color: #d90026;
    }
    
    .b_dropdown {
        background-color: white;
    }
    /* Override for High Contrast White */
    
    @media screen and (-ms-high-contrast: black-on-white) {
        /* Apply to everything. This is effectively what Windows itself does */
        * {
            background-color/* bingcss-ignore: need explicit override for accessibility */
            : white;
            color/* bingcss-ignore: need explicit override for accessibility */
            : black;
        }
    }
    /* END COLORS */
    /* START COLORS_MOBILE */
    
    html,
    html.peekExpand,
    body,
    body.peekExpand {
        background-color: #eeeeee;
    }
    
    a,
    #b_results > li a,
    #b_results .b_no a {
        color: #0078d7;
    }
    /* END COLORS_MOBILE */
    
    @font-face {
        font-family: Segoe;
        font-weight: 200;
        src: local("Segoe UI Light"), local("Segoe WP Light");
    }
    
    @font-face {
        font-family: Segoe;
        font-weight: 300;
        src: local("Segoe UI Semilight"), local("Segoe WP Semilight");
    }
    
    @font-face {
        font-family: Segoe;
        font-weight: normal;
        src: local("Segoe UI"), local("Segoe WP");
    }
    
    @font-face {
        font-family: Segoe;
        font-weight: 600;
        src: local("Segoe UI Semibold"), local("Segoe WP Semibold");
    }
    
    @font-face {
        font-family: Segoe;
        font-weight: 700;
        src: local("Segoe UI Bold"), local("Segoe WP Bold");
    }
    
    body {
        font-weight: normal;
        /* Regular variant */
        font-size: 15px;
        line-height: 20px;
    }
    
    cite {
        font-style: normal;
    }
    
    .b_groupLabel,
    .b_strong,
    strong,
    .b_no h4,
    .pushpin,
    .cardLabel {
        font-weight: 600;
        /* Semibold variant */
    }
    
    h1,
    h2,
    .b_secondaryFocus,
    .b_focusTextExtraSmall {
        font-size: 20px;
        line-height: 24px;
        font-weight: normal;
        /* Regular variant */
    }
    
    h3,
    h4,
    h5 {
        font-size: 15px;
        line-height: 20px;
        font-weight: normal;
        /* Regular variant */
    }
    
    .b_groupLabel {
        font-size: 15px;
        line-height: 20px;
    }
    
    .b_anno {
        font-size: 20px;
        line-height: 24px;
        font-weight: normal;
        /* Regular variant */
    }
    
    select,
    .s_btn.b_highlighted a,
    input[type="text"],
    .cbtn input {
        /* we need to override the default css in each browser, e.g. http://www.iecss.com/ */
        font-size: 15px;
    }
    
    #fti3,
    #ftrLnks,
    #id_rwds_b,
    .b_focusLabel,
    .b_footnote,
    .b_meta,
    .b_corActList,
    .pushpin,
    .cardLabel,
    .sb_count {
        font-size: 13px;
        line-height: 16px;
    }
    /*Focus text styles*/
    
    .b_xlText {
        font-size: 18px;
    }
    
    .b_focusTextSmall,
    .b_focusTextMedium,
    .b_focusTextLarge {
        font-weight: 300;
        /* Semilight variant */
    }
    
    .b_focusTextSmall {
        font-size: 24px;
        line-height: 28px;
    }
    
    .b_focusTextMedium {
        font-size: 34px;
        line-height: 40px;
    }
    
    .b_focusTextLarge {
        font-size: 46px;
        line-height: 56px;
    }
    
    cite,
    .nowrap {
        white-space: nowrap;
    }
    
    a,
    #b_results .b_rs li a {
        text-decoration: none;
    }
    
    #sp_requery a {
        font-style: italic;
    }
    
    th {
        font-weight: normal;
        /* Regular variant */
    }
    
    .b_ad {
        line-height: 17px;
    }
    
    sup,
    sub {
        line-height: normal;
    }
    
    .sb_pag a {
        text-decoration: none;
        text-align: center;
        font-size: 16px;
    }
    
    a.sb_pagP,
    a.sb_pagN {
        text-decoration: none;
        white-space: nowrap;
    }
    
    .sb_pagIconN .sw_next,
    .sb_pagIconP .sw_prev {
        font-family: "Segoe MDL2 Assets";
    }
    
    body,
    input,
    textarea,
    button,
    select,
    option {
        font-family: Segoe, Arial, sans-serif;
    }
    
    body:-ms-lang(am, ti),
    input:-ms-lang(am, ti),
    textarea:-ms-lang(am, ti),
    button:-ms-lang(am, ti),
    select:-ms-lang(am, ti),
    option:-ms-lang(am, ti) {
        font-family: Ebrima, Segoe, Arial, sans-serif;
    }
    
    body:-ms-lang(as, bn, gu, hi, kn, kok, ml, mr, ne, or, pa, si, ta, te),
    input:-ms-lang(as, bn, gu, hi, kn, kok, ml, mr, ne, or, pa, si, ta, te),
    textarea:-ms-lang(as, bn, gu, hi, kn, kok, ml, mr, ne, or, pa, si, ta, te),
    button:-ms-lang(as, bn, gu, hi, kn, kok, ml, mr, ne, or, pa, si, ta, te),
    select:-ms-lang(as, bn, gu, hi, kn, kok, ml, mr, ne, or, pa, si, ta, te),
    option:-ms-lang(as, bn, gu, hi, kn, kok, ml, mr, ne, or, pa, si, ta, te) {
        font-family: "Nirmala UI", Segoe, Arial, sans-serif;
    }
    
    body:-ms-lang(chr-CHER-US),
    input:-ms-lang(chr-CHER-US),
    textarea:-ms-lang(chr-CHER-US),
    button:-ms-lang(chr-CHER-US),
    select:-ms-lang(chr-CHER-US),
    option:-ms-lang(chr-CHER-US) {
        font-family: Gadugi, Segoe, Arial, sans-serif;
    }
    
    body:-ms-lang(ja),
    input:-ms-lang(ja),
    textarea:-ms-lang(ja),
    button:-ms-lang(ja),
    select:-ms-lang(ja),
    option:-ms-lang(ja) {
        font-family: "Yu Gothic UI", Segoe, Arial, sans-serif;
    }
    
    body:-ms-lang(ko),
    input:-ms-lang(ko),
    textarea:-ms-lang(ko),
    button:-ms-lang(ko),
    select:-ms-lang(ko),
    option:-ms-lang(ko) {
        font-family: "Malgun Gothic", Segoe, Arial, sans-serif;
    }
    
    body:-ms-lang(th, km, lo),
    input:-ms-lang(th, km, lo),
    textarea:-ms-lang(th, km, lo),
    button:-ms-lang(th, km, lo),
    select:-ms-lang(th, km, lo),
    option:-ms-lang(th, km, lo) {
        font-family: "Leelawadee UI", Segoe, Arial, sans-serif;
    }
    
    body:-ms-lang(zh-CN, zh-Hans, zh-SG),
    input:-ms-lang(zh-CN, zh-Hans, zh-SG),
    textarea:-ms-lang(zh-CN, zh-Hans, zh-SG),
    button:-ms-lang(zh-CN, zh-Hans, zh-SG),
    select:-ms-lang(zh-CN, zh-Hans, zh-SG),
    option:-ms-lang(zh-CN, zh-Hans, zh-SG) {
        font-family: "Microsoft YaHei UI", Segoe, Arial, sans-serif;
    }
    
    body:-ms-lang(zh-HK, zh-TW, zh-Hant, zh-MO),
    input:-ms-lang(zh-HK, zh-TW, zh-Hant, zh-MO),
    textarea:-ms-lang(zh-HK, zh-TW, zh-Hant, zh-MO),
    button:-ms-lang(zh-HK, zh-TW, zh-Hant, zh-MO),
    select:-ms-lang(zh-HK, zh-TW, zh-Hant, zh-MO),
    option:-ms-lang(zh-HK, zh-TW, zh-Hant, zh-MO) {
        font-family: "Microsoft JhengHei UI", Segoe, Arial, sans-serif;
    }
    /* begin basic page values */
    
    html,
    body,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    img,
    ol,
    ul,
    li,
    form,
    table,
    tr,
    th,
    td {
        border: 0;
        border-collapse: collapse;
        border-spacing: 0;
        list-style: none;
        margin: 0;
        padding/* bingcss-ignore TFS: 641967 - Fix existing whitelist files to be complaint with CSS Cop rules */
        : 0;
    }
    
    html {
        -ms-content-zooming: none;
        -ms-user-select: none;
        cursor: default;
    }
    /* This ensures that any words that we will not fit in the width are wrapped */
    /* We first try to hyphenate it, and only if that fails we break the word */
    
    body {
        word-wrap: break-word;
        overflow-x: hidden;
        /* no left and right movement */
        -webkit-text-size-adjust: none;
        /* no text adjustment on phone rotation */
    }
    /* end basic page values */
    
    header#b_header:not(:empty):not(.b_hide) ~ #b_content {
        margin-top: 45px;
    }
    
    .b_footnote {
        padding-bottom: 24px;
    }
    
    .b_imagePair .cico + .b_footnote,
    img + .b_footnote {
        padding-top/* bingcss-ignore: we need to add padding between the image and the footnote */
        : 2px;
        padding-bottom: 0;
    }
    
    .b_hList {
        padding-bottom: 12px;
    }
    
    input[type="text"] {
        -webkit-appearance: none;
        margin: 0 0 20px 0;
        padding: 0 10px;
        height: 38px;
        border-width: 1px;
        border-style: solid;
        border-radius: 0;
        max-width: 100%;
        min-width: 50px;
    }
    
    h2,
    .b_focusLabel {
        padding-bottom: 4px;
    }
    
    h4,
    label,
    .b_attribution,
    .b_groupLabel,
    .b_label,
    .b_poiPair,
    .b_secondaryFocus,
    .b_sSpace,
    .b_focusTextExtraSmall,
    .b_focusTextSmall,
    .b_focusTextMedium,
    .b_focusTextLarge {
        padding-bottom: 2px;
    }
    
    h2 a,
    h3 a,
    h4 a,
    h5 a,
    .b_rs a,
    label {
        display: block;
    }
    
    .inline label {
        display: inline;
    }
    
    #sp_requery a {
        display: inline-block;
    }
    
    .b_lBMargin,
    h2.b_entityTitle {
        padding-bottom: 12px;
    }
    
    .b_entitySubTitle {
        margin-top: -8px;
    }
    
    .b_rich {
        padding: 8px 0 24px;
    }
    
    .b_rich > *:last-child,
    .b_caption > *:last-child {
        padding-bottom: 0;
        margin-bottom: 0;
    }
    
    .b_caption {
        padding-bottom: 24px;
    }
    
    .b_factrow {
        display: -webkit-box;
        -webkit-box-orient: vertical;
    }
    
    .b_attribution {
        width: 100%;
    }
    
    .b_attribution,
    .b_factrow {
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .b_factrow {
        padding-bottom: 3px;
    }
    
    .b_dataList > li > *,
    .b_imagePair .b_attribution > *,
    .b_factrow > * {
        display: inline;
    }
    
    .b_anno {
        padding: 0 8px 24px 0;
    }
    
    .b_anno + .b_rich,
    .b_anno + h2 + .b_rich {
        padding-top/* bingcss-ignore: Need to eat the top padding from b_rich */
        : 0;
    }
    
    .b_vPanel > div,
    .b_vList > li {
        padding-bottom: 12px;
    }
    
    .b_vPanel.b_loose > div,
    .b_vList.b_loose > li {
        padding-bottom: 24px;
    }
    
    .b_vPanel.b_narrow > div,
    .b_vList.b_narrow > li {
        padding-bottom: 4px;
    }
    
    #b_results > li.si_pp,
    .sb_hbop,
    .b_hide,
    #fRmsDefer,
    #b_error,
    #b_loadingmsg,
    .sw_prev,
    .sw_next {
        display: none;
    }
    /* begin vertical lists */
    
    .b_rich > *:last-child,
    .b_rich > .b_vList > li:last-child,
    .b_rich > .b_vPanel > div:last-child,
    .b_vPanel .b_vList > li:last-child,
    .b_vList .b_vPanel > div:last-child,
    .b_hList .b_vList > li:last-child,
    .b_hList .b_vPanel > div:last-child,
    .b_vList > li > *:last-child:not(a),
    /* the last non-link child of vertical list items should have no bottom padding */
    
    .b_vList:last-child > li:last-child,
    /* if the vList is within another container, and is the last child, then the last element of the vlist should have no padding*/
    
    .b_vPanel > div > *:last-child:not(a),
    /* the last non-link child of vertical stack panel items should have no bottom padding */
    
    .b_subModule > *:last-child,
    .b_subModule .b_vPanel > *:last-child,
    .b_subModule > .b_vList:last-child > *:last-child,
    .b_suppModule > *:last-child,
    .b_suppModule .b_vPanel > *:last-child,
    .b_infocardContent > .b_vList:last-child > *:last-child,
    .b_infocardContent > *:last-child,
    .sa_uc > .b_vList > li:last-child,
    .sa_uc > .b_vList > li:last-child > .b_vList:last-child > li:last-child,
    .b_ans > .b_vList > li:last-child,
    .b_vlist2col li:last-child,
    .b_ans > *:last-child,
    .b_algo > *:last-child,
    .b_corActList:last-child {
        padding-bottom: 0;
    }
    
    .b_vlist2col > ul {
        min-width: 40%;
        display: inline-block;
        word-wrap: break-word;
        vertical-align: top;
        padding-bottom: 12px;
    }
    
    .b_vlist2col > ul:first-child {
        padding-right: 28px;
    }
    
    .b_vlist2col:last-child {
        margin-bottom: -12px;
        /* When a 2col list is the last child it should have no bottom padding. Use neg margin to override the child UL bottom padding. 
                                                  Can't just remove the UL bottom padding because we can't know if the content is in 2 columns or wrapped down to one. */
    }
    
    .b_vlist2col li {
        padding-bottom: 12px;
    }
    /* end vertical lists */
    /* horizontal stack panel */
    
    .b_hPanel > span:not(:last-child),
    .b_hList > li:not(:last-child) {
        padding-right: 12px;
    }
    
    .b_hPanel.b_loose > span:not(:last-child),
    .b_hList.b_loose > li:not(:last-child) {
        padding-right: 24px;
    }
    
    .b_hPanel.b_narrow > span:not(:last-child),
    .b_hList.b_narrow > li:not(:last-child) {
        padding-right: 4px;
    }
    
    .b_hList > li {
        vertical-align: top;
    }
    
    .b_suffix {
        padding-left: 12px;
        /* intentionally matches horizontal stack panel spacing */
    }
    /* begin image/content horizontal pair */
    
    .b_imagePair img {
        vertical-align: bottom;
    }
    
    .b_imagePair {
        display: flex;
    }
    
    .b_imagePair > * {
        flex-shrink: 0;
    }
    
    .b_imagePair > *:last-child,
    .b_imagePair.reverse > *:first-child {
        flex: 0 1 100%;
    }
    
    .b_imagePair.reverse > *:last-child {
        flex: 0 0 auto;
    }
    
    .b_imagePair.reverse > *:only-child {
        flex: 0 1 100%;
    }
    
    .b_imagePair > *:last-child {
        margin-left: 12px;
    }
    
    .b_imagePair > *:only-child {
        flex: 0 1 100%;
        margin-left: 0;
        /* Override the margin back to 0 in case the first element is the last element */
    }
    /* vm=vertial middle. This can be used in control/component/views to vertically middle align the content of the element who uses this class. */
    
    .b_vmparent {
        align-items: center;
    }
    /* end image/content horizontal pair */
    
    button,
    .button {
        /* The width and style are intentionally set separate so the color is not overridden */
        border-width: 3px;
        border-style: solid;
        padding/* bingcss-ignore TFS: 641967 - Fix existing whitelist files to be complaint with CSS Cop rules */
        : 8px 18px 12px;
    }
    
    .b_hPanel > span,
    .b_footnote .cico,
    .b_hList > li,
    .b_title div,
    .csrc
    /*csrc - Mobile Common Star Rating Control*/
    
    {
        display: inline-block;
    }
    
    .b_hPanel > span {
        vertical-align: middle;
    }
    
    .b_title h2
    /* inline title prefix and suffix */
    
    {
        display: inline;
    }
    
    .b_title .b_imagePair .rms_img {
        margin-top: 3px;
        /* align with the title */
    }
    
    .b_relative {
        position: relative;
    }
    
    .b_footnote .cico {
        padding-left: 10px;
    }
    
    #b_error div {
        padding-bottom: 20px;
    }
    /* floats */
    
    .b_mhdr h2,
    .b_float {
        float: left;
    }
    
    .b_floatR {
        float: right;
    }
    /* end floats */
    
    .b_rTxt {
        text-align: right;
    }
    
    .b_cTxt {
        text-align: center;
    }
    
    .b_jTxt {
        text-align: justify;
    }
    
    select::-ms-expand {
        display: none;
    }
    
    select {
        padding-left: 10px;
        margin-bottom: 20px;
        height: 40px;
        border-radius: 0;
        vertical-align: middle;
        border: 1px solid #cccccc;
    }
    
    .b_moreLink {
        padding-bottom: 24px;
        display: block;
    }
    
    .b_moreLink .b_symb {
        vertical-align: middle;
        float: right;
    }
    
    .b_mhdr .b_floatR {
        margin-top/* bingcss-ignore: vertically align floated text in module header */
        : 4px;
    }
    
    .b_mhdr .b_moreLink {
        padding-bottom: 0;
    }
    
    .b_factrow:after {
        content: "";
    }
    /* results stack */
    
    #b_results > li,
    #b_pole .b_ans {
        padding/* bingcss-ignore:  Top padding is OK before first element in a container */
        : 12px 12px;
    }
    
    #b_results > li .b_fullb,
    #b_pole .b_ans .b_fullb {
        margin-left: -12px;
        margin-right: -12px;
    }
    
    #b_pole .b_ans .b_fullb:first-child {
        margin-top/* bingcss-ignore: full bleed needs to eat the parent's top margin. */
        : -12px;
    }
    
    #b_results > li:not(:first-child) {
        border-top: 1px solid #eeeeee;
    }
    
    #b_pole .b_ans {
        margin-bottom: 4px;
    }
    
    #b_results > .b_ans,
    #b_pole .b_ans {
        padding-bottom: 24px;
    }
    
    #b_results .b_ans + .b_ad,
    #b_results .b_algo + .b_ad,
    #b_results .b_msg + .b_ad {
        border-top: 1px solid #eeeeee;
    }
    
    #b_results > li > *:last-child,
    .b_caption > *:last-child,
    .vlist > li:last-child,
    .b_vPanel > li:last-child,
    .lft > *:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
    }
    
    #b_results > .b_pag
    /* Task 1249184 : [Mobile 1st][wholepage] Paginiation - Remove legacy style after change ajax pagination */
    
    {
        padding/* bingcss-ignore:  Top padding is OK before first element in a container */
        : 12px;
    }
    
    #b_tween
    /* Task 1249184 : [Mobile 1st][wholepage] Paginiation - Remove legacy style after change ajax pagination */
    
    {
        padding/* bingcss-ignore:  Top padding is OK before first element in a container */
        : 8px 10px;
        margin: 0 12px;
    }
    /* end of results stack */
    /* related search and deeplink */
    
    #b_results > li > .b_rs,
    /*override the rule of #b_results > li > *:last-child which default is 0*/
    
    #b_results > li .b_deep
    /*override the rule of #b_results > li > *:last-child which default is 0*/
    
    {
        margin-bottom: -12px;
    }
    
    .b_deep li > a,
    .b_deep li > span > a {
        width: 110px;
        text-overflow: ellipsis;
        display: block;
        white-space: nowrap;
        overflow: hidden;
    }
    
    .b_rs > .b_rich {
        padding-bottom: 0;
    }
    /* end of related search */
    
    .clrfix:after,
    /* Task 1249184 : [Mobile 1st][wholepage] Paginiation - Remove legacy style after change ajax pagination */
    
    .crch:after,
    .b_imagePair:after,
    .b_clearfix:after,
    .sb_vdl:after {
        clear: both;
        content: '.';
        display: block;
        visibility: hidden;
        height: 0;
    }
    /* footer styles */
    
    #ftrLnks li {
        display: inline-block;
        padding: 0 20px 15px 0;
    }
    
    #ftrLnks > *:last-child {
        padding-right: 0;
    }
    
    footer {
        padding/* bingcss-ignore:  Top padding is OK before first element in a container */
        : 15px 0 10px 10px;
    }
    /* begin table */
    
    table {
        width: 100%;
    }
    
    th,
    td {
        vertical-align: top;
        padding: 0 0 12px 12px;
    }
    
    th:first-child,
    td:first-child {
        padding-left: 0;
    }
    
    th {
        text-align: left;
    }
    
    .b_caption > table:last-child tr:last-child td,
    .b_caption > .b_vPanel:last-child > div:last-child > table:last-child tr:last-child td {
        padding-bottom: 0;
    }
    /* end table */
    
    #fti3 {
        margin-bottom: 12px;
    }
    
    #id_rwds_b {
        margin-bottom: 20px;
        display: inline-block;
    }
    /*Label item styles*/
    
    .b_label {
        padding-right: 4px;
    }
    /*Dropdown filter item styles*/
    
    .b_dropdown {
        border: 1px solid #e1e0df;
        position: absolute;
        z-index: 6;
    }
    /*SubModule and SupplementaryModule*/
    
    .b_subModule,
    .b_suppModule {
        border-bottom-width: 1px;
        border-bottom-style: solid;
    }
    
    .b_subModule {
        padding-bottom: 24px;
        margin-bottom: 12px;
    }
    
    .b_suppModule {
        padding-bottom: 24px;
    }
    
    .b_subModule:last-child,
    .b_suppModule:last-child {
        padding-bottom: 0;
        margin-bottom: 0;
        border-bottom: none;
    }
    /*End SubModule and SupplementaryModule*/
    
    .nowrap {
        white-space: nowrap;
    }
    
    .pushpin {
        border-radius: 9px;
        text-align: center;
        width: 16px;
        height: 16px;
        margin-top: 2px;
        padding-bottom: 0;
        /* override label padding */
        line-height: 16px;
    }
    
    #b_results .b_no {
        margin-bottom: 80px;
    }
    
    .b_no h1,
    .b_no h4,
    .b_no li {
        padding-bottom: 10px;
    }
    
    .b_factrow .csrc {
        margin-right: 4px;
    }
    
    .sw_next,
    .sw_prev {
        display: none;
    }
    
    .sb_pagIconN,
    .sb_pagIconP {
        padding/* bingcss-ignore: to enlarge the click area, need top padding to center the icon */
        : 8px;
        margin-top/* bingcss-ignore: make sure next/prev icosn align with other pages */
        : 2px;
    }
    /*Entity Card*/
    
    .b_infocardTop .b_entitySubTitle {
        padding-bottom: 4px;
    }
    
    .wpc_tp .b_lBottom,
    #b_pole .b_lBottom {
        padding-bottom: 12px;
    }
    
    .wpc_tp .b_swipable {
        margin-bottom: 12px;
    }
    /*Entity Card*/
    
    .b_meta {
        padding-bottom: 2px;
    }
    /*Cortana Actions*/
    
    .b_corActList {
        display: flex;
        padding-bottom: 24px;
    }
    
    .b_corActList li {
        display: inline-flex;
        flex: 1;
        text-align: center;
        padding: 0;
    }
    
    .b_corActList li:only-child {
        flex: none;
    }
    
    .b_corActList li:only-child a > * {
        display: inline-block;
        vertical-align: middle;
    }
    
    .b_corActList li:only-child a:first-child {
        margin-right: 8px;
    }
    
    .b_corActList li:not(:first-child) {
        border-left: 1px solid #eeeeee;
    }
    
    .b_corActList a {
        width: 100%;
    }
    
    .b_corActList li:not(:only-child) a >:first-child {
        margin-left: auto;
        margin-right: auto;
        display: block;
        margin-bottom: 8px;
    }
    
    .b_hList.b_corActList .cico {
        padding: 0;
    }
    /*End Cortana Actions*/
    
    @media screen and (min-width: 641px) {
        .b_imagePair > *:last-child {
            margin-left: 24px;
        }
        .b_hList {
            padding-bottom: 24px;
        }
        .b_hPanel > span:not(:last-child),
        .b_hList > li:not(:last-child) {
            padding-right: 24px;
        }
        #b_pole .b_ans,
        #b_results > li,
        #b_results > .b_pag {
            padding-left: 24px;
            padding-right: 24px;
        }
        #b_results > li .b_fullb,
        #b_pole .b_ans .b_fullb {
            margin-left: -24px;
            margin-right: -24px;
        }
    }
    
    .sb_pag {
        clear: both;
        overflow: hidden;
    }
    
    .sb_pag > li {
        float: left;
        margin: 0;
        padding: 0;
        max-width: 160px;
    }
    
    .sb_pag a {
        margin: 0 12px 0 0;
        box-sizing: border-box;
        display: inline-block;
        padding/*bingcss-ignore: top padding by design in spec*/
        : 12px;
        cursor: pointer;
    }
    
    .sb_pagS {
        border-width: 1px;
        border-style: solid;
    }
    
    .sb_pag a:last-child {
        margin: 0;
    }
    
    a.sb_pagN .sb_pagIconN,
    a.sb_pagP .sb_pagIconP {
        padding: 0;
        margin-top: 0;
    }
    
    .sb_pagIconN .sw_next,
    .sb_pagIconP .sw_prev {
        display: inline-block;
        margin-top/*bingcss-ignore: fix to center icon*/
        : 2px;
    }
    
    .e_mhdr .b_symb {
        float: none;
    }
    
    .b_flexboxSpacer {
        flex: 1 auto;
    }
    /*
The browser support for the latest flexbox specification is:
Chrome 29+
Firefox 28+
Internet Explorer 11+
Opera 17+
Safari 6.1+ (prefixed with -webkit-)
Android 4.4+
iOS 7.1+ (prefixed with -webkit-)
*/
    
    .b_imagePair {
        display: -webkit-box;
        display: -webkit-flex;
        display: flex;
    }
    
    .b_imagePair > * {
        -webkit-flex-shrink: 0;
        flex-shrink: 0;
    }
    
    .b_imagePair > *:last-child,
    .b_imagePair.reverse > *:first-child {
        -webkit-flex: 0 1 100%;
        flex: 0 1 100%;
    }
    
    .b_imagePair.reverse > *:last-child {
        -webkit-flex: 0 0 auto;
        flex: 0 0 auto;
    }
    
    .b_imagePair.reverse > *:only-child {
        -webkit-flex: 0 1 100%;
        flex: 0 1 100%;
    }
    
    .b_imagePair > *:only-child {
        -webkit-flex: 0 1 100%;
        flex: 0 1 100%;
    }
    /*Cortana Actions*/
    
    .b_corActList {
        display: -webkit-box;
        display: -webkit-flex;
        display: flex;
    }
    
    .b_corActList li {
        display: -webkit-inline-flex;
        display: inline-flex;
        -webkit-flex: 1;
        flex: 1;
    }
    
    .b_corActList li:only-child {
        -webkit-flex: none;
        flex: none;
    }
    /*This file is intentionally left empty*/
    
    z {
        a: 1;
    }
    /*This file is intentionally left empty*/
    
    z {
        a: 1;
    }
    /* header colors for mobile threshold */
    
    .b_scopebar {
        background-color: #eeeeee;
    }
    
    .b_scopebar,
    .b_scopebar a,
    .b_scopebar a:visited,
    .b_mystuff:before {
        color: #767676;
    }
    
    .b_scopebar li.b_active a,
    .b_scopebar li.b_active a:visited,
    .b_scopebar span {
        border-color: #f84e29;
        color: black;
    }
    
    .b_scopebar a,
    .b_scopebar span {
        text-decoration: none;
        text-transform: uppercase;
    }
    
    .b_mystuff {
        font-size: 12px;
        line-height: 16px;
        height: 18px;
    }
    
    .b_mystuff:before {
        font-size: 16px;
        vertical-align: middle;
    }
    
    .b_scopebar a {
        text-transform: capitalize;
    }
    /* Scopebar styles */
    
    #b_header:not(:empty) {
        border-bottom: 1px solid #cccccc;
        position: fixed;
        top: 0;
        width: 100%;
        z-index/* bingcss-ignore: to keep consistent with legacy mobile */
        : 1000;
    }
    
    .b_scopebar li {
        margin: 0 10px;
        /* Use margin for sides instead of padding so the active bottom border displays correctly. */
        display: inline-flex;
    }
    
    .b_scopebar li:last-child,
    .b_mystuff {
        margin-right: 12px;
        flex: none;
    }
    
    .b_scopebar li:first-child {
        margin-left: 12px;
    }
    
    .b_scopebar ul {
        display: flex;
    }
    
    .b_scopebar a,
    .b_scopebar span,
    .b_mystuff {
        padding/* bingcss-ignore: vertically align with padding */
        : 12px 0;
    }
    
    .b_scopebar li.b_active a,
    .b_scopebar li.b_active span {
        padding-bottom: 10px;
        border-bottom-width: 2px;
        border-bottom-style: solid;
    }
    
    @media screen and (min-width: 641px) {
        #b_header nav li:first-child {
            margin-left: 0;
        }
        #b_header nav li:last-child {
            margin-right: 0;
        }
        #b_header nav,
        header nav {
            padding: 0 24px;
        }
    }
    
    .b_mystuff {
        display: block;
        text-align: right;
    }
    
    .b_mystuff:before {
        padding-right: 12px;
    }
    
    .linkAction {
        padding-bottom: 24px;
    }
    /*
The browser support for the latest flexbox specification is:
Chrome 29+
Firefox 28+
Internet Explorer 11+
Opera 17+
Safari 6.1+ (prefixed with -webkit-)
Android 4.4+
iOS 7.1+ (prefixed with -webkit-)
*/
    
    .b_scopebar ul {
        display: -webkit-box;
        display: -webkit-flex;
        display: flex;
    }
    
    .b_scopebar li {
        display: -webkit-inline-box;
        display: -webkit-inline-flex;
        display: inline-flex;
    }
    
    .b_scopebar li:last-child,
    .b_mystuff {
        -webkit-flex: none;
        flex: none;
    }
    
    .b_accentColor,
    .b_accentColor strong,
    strong.b_accentColor,
    strong .b_accentColor,
    .qcard a,
    #sb_feedback,
    .b_anno,
    .appifyCaptionAccent,
    #b_results a.b_accentColor,
    #b_results a.b_accentColor:visited {
        color: #f90;
    }
    
    .b_accentColorStroke {
        stroke: #f90;
    }
    
    .b_accentColorFill {
        fill: #f90;
    }
    
    .b_accentColorBackground {
        background-color: #f90;
    }
    
    input[type="text"]:focus {
        border-color: #f90;
    }
    
    select:active {
        background-color: #f90;
    }
    
    select {
        color: #f90;
    }
    
    select::-ms-expand {
        color: #f90;
    }
    
    .b_moreLink,
    .b_moreLink:visited,
    #b_results .b_moreLink,
    #b_results .b_moreLink:visited {
        color: #f90;
    }
    
    .sml,
    .sml a,
    .sml a:visited,
    .btm_sml a,
    .btm_sml a:visited {
        color: #f90;
    }
    
    .b_corActList,
    .b_corActList a,
    .b_corActList a:visited {
        color: #f90;
    }
    /* feedback page dialog */
    
    #fbpgdg {
        background: #f2f2f2;
        bottom: 0;
        position: fixed;
        color: black;
        z-index: 9;
        font-size: 15px;
        right: 0px;
        width: 100%;
        height: 100%;
        /* Leave space for the overlay scroll bar on the right */
        overflow: no-display;
    }
    
    #fbpgdg .btns {
        position: fixed;
        bottom: 12px;
        width: 310px;
        margin-top: 8px;
    }
    
    #fbpgdg .buttonVGap {
        font-size: 15px;
        /* Need to override parent, otherwise 13px */
        height: 34px;
        text-align: center;
        display: inline-block;
    }
    /* Short canvas */
    
    @media (max-height: 599px) {
        #fbpgdg .btns {
            width: 315px;
        }
        #fbpgdg .buttonVGap {
            width: 144px;
        }
    }
    /* Tall canvas */
    
    @media (min-height: 600px) {
        #fbpgdg .btns {
            padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
            : 17px 0 0 0;
            position: relative;
            width: 315px;
        }
        #fbpgdg .buttonVGap {
            width: 144px;
        }
    }
    /* Narrow canvas */
    
    @media (max-width: 329px) {
        #fbpgdg .btns {
            width: 310px;
        }
        #fbpgdg .buttonVGap {
            width: 142px;
        }
    }
    /* Wide canvas */
    
    @media (min-width: 330px) {
        #fbpgdg .btns {
            width: 315px;
        }
        #fbpgdg .buttonVGap {
            width: 144px;
        }
    }
    
    #fbpgdg .step2 {
        display: none;
    }
    
    #fbpgdg > * {
        margin-left: 12px;
        margin-right: 12px;
    }
    
    #fbpgdgptx {
        display: none;
    }
    /* feedback page dialog close icon */
    
    #fbpgdgcl {
        cursor: pointer;
        background: url('/fd/s/a/sw17.png') -97px -17px no-repeat;
        display: block;
        float: right;
        height: 9px;
        width: 9px;
        margin: 0 -10px 0;
        border: 10px solid #f2f2f2;
    }
    
    #fbpgdgcl:hover {
        background: url('/fd/s/a/sw17.png') -107px -17px no-repeat;
    }
    /*The first child of the btns class is the submit button(or the close button in step 2). want to override the geneeric button color to make it blue*/
    
    #fbpgdg .step1 .buttonVGap:first-child {
        background-color: #0078d7;
        border: 1px solid #0078d7;
        margin-right: 11px;
        margin-left: 11px;
        height: 34px;
    }
    
    #fbpgdg .step2 .buttonVGap:first-child {
        background-color: #0078d7;
        border: 1px solid #0078d7;
        margin-right: 156px;
        margin-left: 11px;
        height: 34px;
    }
    
    #fbpgdg div > ul > li {
        background-color: #cccccc;
        border: 1px solid #cccccc;
        cursor: pointer;
        display: block;
    }
    
    #fbpgdg #fbpgdgsbbt {
        color: white;
        cursor: pointer;
        vertical-align: middle;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
        : 6px 0px 9px 0px;
        border: 1px solid #cccccc;
    }
    
    #fbpgdg #fbpgdgcnclbt {
        color: black;
        cursor: pointer;
        vertical-align: middle;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
        : 6px 0px 9px 0px;
        display: block;
    }
    
    #fbpgdg #fbpgdgclbt {
        color: white;
        cursor: pointer;
        vertical-align: middle;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
        : 6px 0px 9px 0px;
        display: block;
    }
    
    #fbpgdghd {
        cursor: default;
        margin-top: 12px;
    }
    /*Form Title Text*/
    
    #fbpgdghd > span {
        font-size: 100%;
        font-weight: normal;
        line-height: 1;
        margin: 0;
        padding: 0;
        text-transform: none;
    }
    
    #fbpgdghd > span > h2 {
        font-weight: normal;
        margin: 0;
        padding-bottom: 10px;
    }
    /*Microsoft Internal Text*/
    
    #fbpgdg > div > h3 {
        color: black;
        font-size: 12px;
    }
    /*Send email to the bing team*/
    
    #fbpgdg > p > label:first-child {
        font-size: 12px;
    }
    
    #fbpgdg > p > span {
        font-size: 12px;
    }
    
    #fbpgdg > p > label {
        font-size: 12px;
    }
    
    #fbpgdg > ul {
        list-style: none;
        margin: 0px 12px 0;
        padding: 0;
    }
    /*list of Suggest, Like and Dislike radio buttons*/
    
    #fbpgdg > ul > li {
        margin-bottom: 12px;
    }
    
    #fbpgdg > ul > li:first-child {
        margin-left: 0;
    }
    
    #fbpgdg > ul > li > label,
    #fbpgdg > p > label {
        /* redundant styles needed to override the ones defined on /toolbox */
        color: black;
        background: none;
        background-position: inherit;
        height: inherit;
        margin: 0;
        position: static;
        /* what's actually needed to style given there's a CSS reset in place */
        padding: 0 0 3px 6px;
        display: initial;
        cursor: pointer;
    }
    
    #fbpgdg input {
        margin-left: 0;
        vertical-align: middle;
        margin-right: 7px;
        /* Inputs are now inside the labels so we can avoid using CSS IDs everywhere, hence the difference margins */
    }
    
    #fbpgdg input[type="checkbox"] {
        margin: 0;
        padding: 0;
    }
    
    #fbpgdg input[type="radio"] {
        margin: 0;
        padding: 0;
    }
    
    #fbpgdg textarea,
    #fbpgdg input[type="text"] {
        color: #999999;
        /* firefox fix as textarea tags don't inherit the font size from parent */
        font-size: 15px;
    }
    
    #fbpgdg textarea.active,
    #fbpgdg input[type="text"].active {
        color: black;
    }
    
    #fbpgdg textarea.error,
    #fbpgdg input[type="text"].error {
        color: #cc0000;
    }
    
    #fbpgdg textarea {
        line-height: 16px;
        resize: none;
    }
    
    #fbpgdg input[type="text"] {
        width: 100%;
        box-sizing: border-box;
        color: black;
        padding-left: 10px;
        height: 25px;
        margin: 0;
        margin-top: 5px;
    }
    
    #fbpgdg .disabled,
    #fbpgdg input[disabled] {
        color: #777777 !important;
    }
    
    #fbpgdg .controls {
        margin: 15px 0 0;
        text-align: right;
    }
    
    #fbpgdg .button {
        background: white;
        border: 1px solid #cccccc;
        color: #3366bb !important;
        cursor: pointer;
        font-size: 13px;
        font-weight: bold;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules */
        : 6px 32px;
    }
    
    #fbpgdg .button:hover {
        background-color: #e5e5e5;
        text-decoration: none;
    }
    
    #fbpgdg .button:active {
        background-color: #3366bb;
        color: white !important;
    }
    
    #fbpgdg .button[disabled] {
        background: #f2f2f2;
        color: #cccccc !important;
        cursor: default;
    }
    
    #fbpgdg .foot {
        background-color: #eeeeee;
        margin: 10px -10px -10px;
    }
    /* feedback page dialog spin control */
    
    #fbpgdgsp {
        /* for these to work, #fbpgdg needs to have position: fixed or absolute (not static!) */
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
        background: black;
        filter: alpha(opacity=75);
        opacity: 0.75;
        display: none;
    }
    
    #fbpgdgsp > div {
        position: absolute;
        top: 45%;
        left: 0;
        right: 0;
        color: white;
        text-align: center;
    }
    
    #fbpgdgsp > div > img {
        /* creates margin around the image so that the text below it doesn't show up so close to it */
        display: inline-block;
    }
    
    #fbpgdg #fbpgdgtx {
        width: 100%;
        box-sizing: border-box;
        overflow: auto;
        height: 83px;
        font-size: 15px;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
        : 5px 10px;
        height: 62px;
        margin-right: 10px;
    }
    /* feedback page dialog comment box counter for remaining number of characters */
    
    #fbpgdgtxct {
        background-color: white;
        border-top: 0;
        text-align: left;
        color: #999999;
        font-size: 12px;
        margin-bottom: 12px;
        border: none;
        margin-top: -4px;
        margin-bottom: 0px;
        padding-bottom: 6px;
    }
    
    #fbpgdg #fbpgdgsbbt {
        border: 0px;
        display: block;
    }
    
    #fbpgdg {
        background: white;
        position: fixed;
    }
    
    #fbpgdgreg {
        height: 100%;
    }
    
    #fbpgdgplmlk {
        float: left;
        clear: left;
        color: #0078d7;
        margin-top: 7px;
    }
    
    #fbpgdgpslk {
        float: left;
        clear: left;
        color: #0078d7;
    }
    
    #fbpgdgpnlcnt {
        position: relative;
        bottom: 0;
        left: 0px;
        width: 298px;
        float: none;
        margin-top: 7px;
    }
    
    #fbpgdgpnl {
        position: relative;
        display: inline-block;
        left: 0px;
        width: 100%;
        height: 63px;
    }
    
    #fbpgdgtx {
        border: 1px solid #cccccc;
    }
    
    #fbpgdgsschklbl {
        color: black;
        padding: 0 0 3px 6px;
        vertical-align: middle;
    }
    
    #fbpgdg > ul > li > label {
        vertical-align: middle;
    }
    
    #fbpgdgbtn {
        background: white;
    }
    
    .btns {
        overflow: hidden;
    }
    
    .splt {
        position: relative;
        float: left;
        height: 40px;
        margin-bottom: 10px;
    }
    
    .splt_2btns {
        width: 50%;
    }
    
    .splt_3btns {
        width: 33.33%;
    }
    
    .splt_nm {
        margin-bottom: 0;
    }
    
    .brd {
        border: 1px solid;
    }
    
    .s_btn {
        height: 38px;
        /*height of button is 40 pixels, including 2 pixels of border*/
        cursor: pointer;
        color: black;
    }
    
    .s_btn a {
        display: inline-block;
        width: 100%;
    }
    
    .s_btn a:visited {
        color: black;
    }
    
    .s_btn.brd {
        border-color: #bbbbbb;
    }
    
    .s_btn.brd:active {
        background-color: #999999;
        border-color: #999999;
    }
    
    .s_btn:active,
    #b_results .s_btn:active a {
        color: white;
    }
    /*center the text inside the box*/
    
    .s_btn div {
        text-align: center;
        height: 38px;
        line-height: 38px;
        overflow: hidden;
    }
    
    .lBtn,
    .mBtn {
        margin-right: 5px;
    }
    
    .rBtn,
    .mBtn {
        margin-left: 5px;
    }
    /* feedback page dialog */
    
    #fbpgdg {
        background: #f2f2f2;
        bottom: 0;
        position: fixed;
        color: black;
        z-index: 9;
        font-size: 15px;
        right: 0px;
        width: 100%;
        height: 100%;
        /* Leave space for the overlay scroll bar on the right */
        overflow: no-display;
    }
    
    #fbpgdg .btns {
        position: fixed;
        bottom: 12px;
        width: 310px;
        margin-top: 8px;
    }
    
    #fbpgdg .buttonVGap {
        font-size: 15px;
        /* Need to override parent, otherwise 13px */
        height: 34px;
        text-align: center;
        display: inline-block;
    }
    /* Short canvas */
    
    @media (max-height: 599px) {
        #fbpgdg .btns {
            width: 315px;
        }
        #fbpgdg .buttonVGap {
            width: 144px;
        }
    }
    /* Tall canvas */
    
    @media (min-height: 600px) {
        #fbpgdg .btns {
            padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
            : 17px 0 0 0;
            position: relative;
            width: 315px;
        }
        #fbpgdg .buttonVGap {
            width: 144px;
        }
    }
    /* Narrow canvas */
    
    @media (max-width: 329px) {
        #fbpgdg .btns {
            width: 310px;
        }
        #fbpgdg .buttonVGap {
            width: 142px;
        }
    }
    /* Wide canvas */
    
    @media (min-width: 330px) {
        #fbpgdg .btns {
            width: 315px;
        }
        #fbpgdg .buttonVGap {
            width: 144px;
        }
    }
    
    #fbpgdg .step2 {
        display: none;
    }
    
    #fbpgdg > * {
        margin-left: 12px;
        margin-right: 12px;
    }
    
    #fbpgdgptx {
        display: none;
    }
    /* feedback page dialog close icon */
    
    #fbpgdgcl {
        cursor: pointer;
        background: url('/fd/s/a/sw17.png') -97px -17px no-repeat;
        display: block;
        float: right;
        height: 9px;
        width: 9px;
        margin: 0 -10px 0;
        border: 10px solid #f2f2f2;
    }
    
    #fbpgdgcl:hover {
        background: url('/fd/s/a/sw17.png') -107px -17px no-repeat;
    }
    /*The first child of the btns class is the submit button(or the close button in step 2). want to override the geneeric button color to make it blue*/
    
    #fbpgdg .step1 .buttonVGap:first-child {
        background-color: #0078d7;
        border: 1px solid #0078d7;
        margin-right: 11px;
        margin-left: 11px;
        height: 34px;
    }
    
    #fbpgdg .step2 .buttonVGap:first-child {
        background-color: #0078d7;
        border: 1px solid #0078d7;
        margin-right: 156px;
        margin-left: 11px;
        height: 34px;
    }
    
    #fbpgdg div > ul > li {
        background-color: #cccccc;
        border: 1px solid #cccccc;
        cursor: pointer;
        display: block;
    }
    
    #fbpgdg #fbpgdgsbbt {
        color: white;
        cursor: pointer;
        vertical-align: middle;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
        : 6px 0px 9px 0px;
        border: 1px solid #cccccc;
    }
    
    #fbpgdg #fbpgdgcnclbt {
        color: black;
        cursor: pointer;
        vertical-align: middle;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
        : 6px 0px 9px 0px;
        display: block;
    }
    
    #fbpgdg #fbpgdgclbt {
        color: white;
        cursor: pointer;
        vertical-align: middle;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
        : 6px 0px 9px 0px;
        display: block;
    }
    
    #fbpgdghd {
        cursor: default;
        margin-top: 12px;
    }
    /*Form Title Text*/
    
    #fbpgdghd > span {
        font-size: 100%;
        font-weight: normal;
        line-height: 1;
        margin: 0;
        padding: 0;
        text-transform: none;
    }
    
    #fbpgdghd > span > h2 {
        font-weight: normal;
        margin: 0;
        padding-bottom: 10px;
    }
    /*Microsoft Internal Text*/
    
    #fbpgdg > div > h3 {
        color: black;
        font-size: 12px;
    }
    /*Send email to the bing team*/
    
    #fbpgdg > p > label:first-child {
        font-size: 12px;
    }
    
    #fbpgdg > p > span {
        font-size: 12px;
    }
    
    #fbpgdg > p > label {
        font-size: 12px;
    }
    
    #fbpgdg > ul {
        list-style: none;
        margin: 0px 12px 0;
        padding: 0;
    }
    /*list of Suggest, Like and Dislike radio buttons*/
    
    #fbpgdg > ul > li {
        margin-bottom: 12px;
    }
    
    #fbpgdg > ul > li:first-child {
        margin-left: 0;
    }
    
    #fbpgdg > ul > li > label,
    #fbpgdg > p > label {
        /* redundant styles needed to override the ones defined on /toolbox */
        color: black;
        background: none;
        background-position: inherit;
        height: inherit;
        margin: 0;
        position: static;
        /* what's actually needed to style given there's a CSS reset in place */
        padding: 0 0 3px 6px;
        display: initial;
        cursor: pointer;
    }
    
    #fbpgdg input {
        margin-left: 0;
        vertical-align: middle;
        margin-right: 7px;
        /* Inputs are now inside the labels so we can avoid using CSS IDs everywhere, hence the difference margins */
    }
    
    #fbpgdg input[type="checkbox"] {
        margin: 0;
        padding: 0;
    }
    
    #fbpgdg input[type="radio"] {
        margin: 0;
        padding: 0;
    }
    
    #fbpgdg textarea,
    #fbpgdg input[type="text"] {
        color: #999999;
        /* firefox fix as textarea tags don't inherit the font size from parent */
        font-size: 15px;
    }
    
    #fbpgdg textarea.active,
    #fbpgdg input[type="text"].active {
        color: black;
    }
    
    #fbpgdg textarea.error,
    #fbpgdg input[type="text"].error {
        color: #cc0000;
    }
    
    #fbpgdg textarea {
        line-height: 16px;
        resize: none;
    }
    
    #fbpgdg input[type="text"] {
        width: 100%;
        box-sizing: border-box;
        color: black;
        padding-left: 10px;
        height: 25px;
        margin: 0;
        margin-top: 5px;
    }
    
    #fbpgdg .disabled,
    #fbpgdg input[disabled] {
        color: #777777 !important;
    }
    
    #fbpgdg .controls {
        margin: 15px 0 0;
        text-align: right;
    }
    
    #fbpgdg .button {
        background: white;
        border: 1px solid #cccccc;
        color: #3366bb !important;
        cursor: pointer;
        font-size: 13px;
        font-weight: bold;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules */
        : 6px 32px;
    }
    
    #fbpgdg .button:hover {
        background-color: #e5e5e5;
        text-decoration: none;
    }
    
    #fbpgdg .button:active {
        background-color: #3366bb;
        color: white !important;
    }
    
    #fbpgdg .button[disabled] {
        background: #f2f2f2;
        color: #cccccc !important;
        cursor: default;
    }
    
    #fbpgdg .foot {
        background-color: #eeeeee;
        margin: 10px -10px -10px;
    }
    /* feedback page dialog spin control */
    
    #fbpgdgsp {
        /* for these to work, #fbpgdg needs to have position: fixed or absolute (not static!) */
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
        background: black;
        filter: alpha(opacity=75);
        opacity: 0.75;
        display: none;
    }
    
    #fbpgdgsp > div {
        position: absolute;
        top: 45%;
        left: 0;
        right: 0;
        color: white;
        text-align: center;
    }
    
    #fbpgdgsp > div > img {
        /* creates margin around the image so that the text below it doesn't show up so close to it */
        display: inline-block;
    }
    
    #fbpgdg #fbpgdgtx {
        width: 100%;
        box-sizing: border-box;
        overflow: auto;
        height: 83px;
        font-size: 15px;
        padding/* bingcss-ignore TFS: 772495 - Fix feedback CSS files to be complaint with CSS Cop rules. Why on Earth am I not allowed to use padding-top? */
        : 5px 10px;
        height: 62px;
        margin-right: 10px;
    }
    /* feedback page dialog comment box counter for remaining number of characters */
    
    #fbpgdgtxct {
        background-color: white;
        border-top: 0;
        text-align: left;
        color: #999999;
        font-size: 12px;
        margin-bottom: 12px;
        border: none;
        margin-top: -4px;
        margin-bottom: 0px;
        padding-bottom: 6px;
    }
    
    #fbpgdg #fbpgdgsbbt {
        border: 0px;
        display: block;
    }
    
    #fbpgdg {
        background: white;
        position: fixed;
    }
    
    #fbpgdgreg {
        height: 100%;
    }
    
    #fbpgdgplmlk {
        float: left;
        clear: left;
        color: #0078d7;
        margin-top: 7px;
    }
    
    #fbpgdgpslk {
        float: left;
        clear: left;
        color: #0078d7;
    }
    
    #fbpgdgpnlcnt {
        position: relative;
        bottom: 0;
        left: 0px;
        width: 298px;
        float: none;
        margin-top: 7px;
    }
    
    #fbpgdgpnl {
        position: relative;
        display: inline-block;
        left: 0px;
        width: 100%;
        height: 63px;
    }
    
    #fbpgdgtx {
        border: 1px solid #cccccc;
    }
    
    #fbpgdgsschklbl {
        color: black;
        padding: 0 0 3px 6px;
        vertical-align: middle;
    }
    
    #fbpgdg > ul > li > label {
        vertical-align: middle;
    }
    
    #fbpgdgbtn {
        background: white;
    }
    </style>
    <style type="text/css">
    .b_select {
        background-color: #ffe0b3;
        border-color: #f90;
    }
    </style>
    <script type="text/javascript">
    //<![CDATA[
    // Declaring Feature Team ID for Win8App Error Handling
    // <feature  id="8"  />
    var amd;
    (function(amd) {
        var defineMap = {};
        var cache = {};
        var initialized = false;

        function define(moduleName, dependencies, callback) {
            if (!defineMap[moduleName]) {
                defineMap[moduleName] = {
                    dependencies: dependencies,
                    callback: callback
                };
                // Invoke this module as it is registered
                require(moduleName);
            }
        }

        function require(requestedModuleName) {
            if (!requestedModuleName) {
                // Initialize all the modules and return the cache
                if (!initialized) {
                    for (var moduleName in defineMap) {
                        requireModule(moduleName);
                    }
                    initialized = true;
                }
                return cache;
            } else if (requestedModuleName) {
                // Initialize just the module asked for
                return requireModule(requestedModuleName);
            }
        }

        function requireModule(moduleName) {
            // This should break the recursion in case of circular dependency
            if (cache[moduleName]) {
                return cache[moduleName];
            }
            // If the module has a define entry
            if (defineMap.hasOwnProperty(moduleName)) {
                // Create this module
                var moduleDetails = defineMap[moduleName];
                var deps = moduleDetails.dependencies;
                var callback = moduleDetails.callback;
                // add req and exports as first two dependencies
                var req = require;
                var exports = {};
                var dependencies = [req, exports];
                if (deps.length < 2) {
                    throw "invalid usage";
                } else if (deps.length > 2) {
                    // Recursively fetch dependencies
                    var dependentModules = deps.slice(2, deps.length);
                    for (var i = 0; i < dependentModules.length; i++) {
                        dependencies.push(requireModule(dependentModules[i]));
                    }
                }
                // Call the callback -- this should add objects to exports
                // This means we do not support the callback itself returning an object.
                // It should be simple to support that. For now, STRADA generates
                // exports syntax.
                callback.apply(this, dependencies);
                // Cache the module
                cache[moduleName] = exports;
                return exports;
            }
        }
        amd.define = define;
        amd.require = require;
    })(amd || (amd = {}));
    var define = amd.define;
    var require = amd.require;; /// <reference path="HitHighlightingParser.d.ts" />
    var HitHighlightingParserImpl;
    (function(HitHighlightingParserImpl) {
        var startMarker = String.fromCharCode(57344);
        var endMarker = String.fromCharCode(57345);
        // Add hit highlighting to a string. If 'start' or 'end' parameters are provided, then 
        // start and end markers are inserted directly before the characters at those indices 
        // in the original string. If 'start' or 'end' parameters are not provided, then the
        // markers are placed at the beginning and end of the string.
        function AddHitHighlighting(text, start, end) {
            start = start ? start : 0;
            end = end ? end : text.length;
            if (start < 0 || start >= end || end > text.length) {
                return text;
            }
            return text.substring(0, start) + startMarker + text.substring(start, end) + endMarker + text.substring(end, text.length);
        }
        HitHighlightingParserImpl.AddHitHighlighting = AddHitHighlighting;

        function RemoveHitHighlighting(text, start, end) {
            start = start ? start : 0;
            end = end ? end : text.length;
            if (start === end)
                return text;
            var subString = [];
            var character;
            for (var index = start; index < end; index++) {
                character = text.charAt(index);
                if (character !== startMarker && character !== endMarker) {
                    subString.push(character);
                }
            }
            // default separator for join is comma(,)
            return subString.join('');
        }
        HitHighlightingParserImpl.RemoveHitHighlighting = RemoveHitHighlighting;
        // Uses the marker characters returned from the server or local items
        // To convert the text into a series of text segments which can be highlighted or not individually
        function split(text) {
            if (!text) {
                return [];
            }
            var parts = [];
            var currentPartIsHighlighted = false;
            var markerstarted = false;
            var currentStart = 0;
            for (var i = 0; i <= text.length; ++i) {
                if (!currentPartIsHighlighted) {
                    if (text[i] === startMarker) {
                        if ((i - currentStart) > 0) {
                            parts.push({
                                text: RemoveHitHighlighting(text, currentStart, i),
                                highlighted: false
                            });
                        }
                        currentPartIsHighlighted = true;
                        currentStart = i + 1;
                    }
                } else {
                    if (text[i] === endMarker) {
                        if ((i - currentStart) > 0) {
                            parts.push({
                                text: RemoveHitHighlighting(text, currentStart, i),
                                highlighted: true
                            });
                        }
                        currentPartIsHighlighted = false;
                        currentStart = i + 1;
                    }
                }
            }
            if (currentStart !== text.length) {
                parts.push({
                    text: (currentStart === 0) ? text : RemoveHitHighlighting(text, currentStart),
                    highlighted: false
                });
            }
            return parts;
        }
        HitHighlightingParserImpl.split = split;
    })(HitHighlightingParserImpl || (HitHighlightingParserImpl = {}));
    HitHighlightingParser = HitHighlightingParserImpl;; /// <reference path='../Declarations/Threshold.Utilities.d.ts' />
    /// <reference path="../../../../../Threshold/src/Content/Script/Declarations/SearchAppWrapper.d.ts" />
    // BUGBUG: TFS 780914: TypeScript throws build error when two ts file declare the same variable
    var _w = window,
        _d = document,
        sb_ie = window["ActiveXObject"] !== undefined,
        sb_i6 = sb_ie && !_w["XMLHttpRequest"],
        _ge = function(id) {
            return _d.getElementById(id);
        },
        sb_st = function(code, delay) {
            return setTimeout(code, delay);
        },
        sb_ct = function(id) {
            clearTimeout(id);
        },
        sb_gt = function() {
            return new Date().getTime();
        },
        sj_gx;
    _w["sj_ce"] = function(tagName) {
        return _d.createElement(tagName);
    };
    // Under certain circumstances the clientCookies script
    // fails to get added from frontdoor. Declaring sk_merge
    // if it isn't already defined.
    if (!_w["sk_merge"]) {
        _w["sk_merge"] = function(cookieHeader) {
            _d.cookie = cookieHeader;
        };
    }
    var AjaxWrapper;
    (function(AjaxWrapper) {
        var bingHosts = [".bing.com", ".staging-bing-int.com", ".working-bing-int.com", ".bing-int.com", ".bing-exp.com"];
        var testAnchor = document.createElement("a");
        sj_gx = function() {
            return createAjaxWrapper();
        };

        function applyMethodThatRequiresOpened(xhrObject, method, originalArguments) {
            /* send and setREquestHeader can only be done on xhr requests that are currently opened: http://www.w3.org/TR/2009/WD-XMLHttpRequest-20090820/#opened-state */
            if (xhrObject.readyState == xhrObject.OPENED) {
                method.apply(xhrObject, originalArguments);
            }
        }

        function wrapSend(originalObject, originalMethod) {
            var wrappedMethod = function() {
                var originalArguments = arguments;
                if (!isRequestBlocked(originalObject) && originalObject.readyState == originalObject.OPENED) {
                    // If we're sending to bing, we need to append custom client headers.
                    // Some old Threshold app webviews do not have a SearchAppWrapper.  Those can just make the XHR call directly and hope for the best.
                    if (typeof ThresholdUtilities !== "undefined" && SearchAppWrapper && SearchAppWrapper.CortanaApp && hostIsBing(originalObject.url)) {
                        ThresholdUtilities.getCortanaHeaders(function(headers) {
                            if (headers) {
                                for (var headerName in headers) {
                                    if (headers.hasOwnProperty(headerName) && headerName.substring(0, 2) === "X-") {
                                        originalObject.setRequestHeader(headerName, headers[headerName]);
                                    }
                                }
                            }
                            setFlightHeaders(originalObject);
                            applyMethodThatRequiresOpened(originalObject, originalMethod, originalArguments);
                        });
                    } else {
                        if (hostIsBing(originalObject.url)) {
                            setFlightHeaders(originalObject);
                        }
                        applyMethodThatRequiresOpened(originalObject, originalMethod, originalArguments);
                    }
                } else {
                    // If we need to block the send we simulate that we did it successfully so no retries are triggered.
                    Object.defineProperties(originalObject, {
                        "readyState": {
                            get: function() {
                                return 4;
                            }
                        },
                        "status": {
                            get: function() {
                                return 200;
                            }
                        },
                        "responseText": {
                            get: function() {
                                return "";
                            }
                        },
                        "responseBody": {
                            get: function() {
                                return "";
                            }
                        }
                    });
                    if (originalObject.onreadystatechange) {
                        originalObject.onreadystatechange.apply(originalObject, null);
                    }
                }
            };
            return wrappedMethod;
        }

        function wrapOpen(originalObject, originalMethod) {
            var wrappedMethod = function() {
                // We always pass through open calls, but we record the url on the object.
                originalObject.url = arguments[1];
                originalMethod.apply(originalObject, arguments);
            };
            return wrappedMethod;
        }

        function wrapSetRequestHeader(originalObject, originalMethod) {
            return function() {
                applyMethodThatRequiresOpened(originalObject, originalMethod, arguments);
            };
        }

        function hostIsBing(url) {
            // Assume it's Bing if we can't prove otherwise
            var returnValue = true;
            testAnchor.href = url;
            var hostName = testAnchor.hostname;
            if (hostName && hostName.indexOf(".") > 0) {
                var matchedAnyHost = false;
                for (var i in bingHosts) {
                    if (hostName.indexOf(bingHosts[i]) > 0) {
                        matchedAnyHost = true;
                        break;
                    }
                }
                if (!matchedAnyHost) {
                    returnValue = false;
                }
            }
            return returnValue;
        }

        function blockRequestWrapper(originalObject) {
            return function() {
                return isRequestBlocked(originalObject);
            };
        }

        function isRequestBlocked(originalObject) {
            return typeof SearchAppWrapper !== "undefined" && SearchAppWrapper && SearchAppWrapper.CortanaApp && !SearchAppWrapper.CortanaApp.isBingEnabled && hostIsBing(originalObject.url);
        }

        function createAjaxWrapper() {
            var wrappedObject = new XMLHttpRequest();
            wrappedObject.send = wrapSend(wrappedObject, wrappedObject.send);
            wrappedObject.open = wrapOpen(wrappedObject, wrappedObject.open);
            wrappedObject.setRequestHeader = wrapSetRequestHeader(wrappedObject, wrappedObject.setRequestHeader);
            wrappedObject.isRequestBlocked = blockRequestWrapper(wrappedObject);
            return wrappedObject;
        }

        function setFlightHeaders(request) {
            // set http headers for setting external flights
            if (typeof(_CachedFlights) !== "undefined" && _CachedFlights.length) {
                request.setRequestHeader("X-MSEdge-ExternalExpType", "JointCoord");
                request.setRequestHeader("X-MSEdge-ExternalExp", _CachedFlights.join(","));
            }
        }
    })(AjaxWrapper || (AjaxWrapper = {}));; ///<reference path="..\Declarations\Shared.d.ts"/>
    function lb() {
        _w["si_sendCReq"] && sb_st(_w["si_sendCReq"], 800);
        // look for any other scripts that needs to be called/initialized, and call them
        // we need a cleaner way to allow other scripts to register for a callback during onload
        // initialization (Bug 94997)
        _w["lbc"] && _w["lbc"]();
    }; ///<reference path="..\Declarations\Shared.d.ts"/>
    // This files modifies appendChild function to check if a SCRIPT tag is being appended.
    // If yes and the script tag does not have a src attribute i.e. it is an inlined script
    // then a "//@ sourceURL=BingDynamicScriptX.js" comment is added to the script so that
    // modern browsers can parse it and add it to the javascript sources in debug window.
    (function() {
        var scriptCount = 0;
        var scriptPrefix = "//@ sourceURL=BingDynamicScript";
        var scriptSuffix = ".js\n";
        if (window["Element"] && Element.prototype) {
            var appendChild = Element.prototype.appendChild;
            Element.prototype.appendChild = function(elem) {
                if (elem.tagName === "SCRIPT" && !elem.src && elem.textContent) {
                    // Adding the sourceURL comment to the beginning of the file in case someone already
                    // has this logic for their specific file then the latest one will take effect
                    elem.textContent = scriptPrefix + scriptCount + scriptSuffix + elem.textContent;
                    scriptCount++;
                }
                return appendChild.apply(this, arguments);
            };
        }
    })();;
    //]]>
    </script>
    <script type="text/javascript" src="/rms/BingCore.Bundle/c/26320d83/b71ad0ae.js?bu=rms+answers+Shared+BingCore%24shared%2cBingCore%24env.override%2cBingCore%24event.custom.fix%2cBingCore%24event.native%2cBingCore%24dom%2cBingCore%24cookies_parser%2cBingCore%24XHRPrefetch%24rmsajax_xhrprefetch%2cBingCore%24ClientInstV2%24InstrumentationConfigDefault%2cBingCore%24ClientInstV2%24LogUploadCapFeatureDisabled%2cBingCore%24ClientInstV2%24ClientInstConfigSeparateOfflineQueue%2cBingCore%24ClientInstV2%24clientinst_xls%2cEmpty%2cBingCore%24ClientInstV2%24LogHelper%2cBingCore%24ClientInstV2%24VisibilityChangeEventHelper%2cBingCore%24Animation%2cBingCore%24fadeAnimation%2cBingCore%24framework%2cBingCore%24ShowWebView%2cBingCore%24CoreUtilities%2cBingCore%24ClientInstV2%24LogOfflineFalseConfig"></script>
    <script type="text/javascript">
    //<![CDATA[
    var SloppyClickHandler;
    (function(SloppyClickHandler) {
        var listTag = ["LI", "TR"];
        var tableTag = ["TR"];
        var anchorTag = ["A"];
        var inputTag = ["INPUT", "SELECT"];
        var getElementsByTagName = "getElementsByTagName";
        var notTargetElementClass = "b_noTarget";
        var poleContainerClassName = "b_poleContent";
        var space = " ";

        function findCardFromElement(element) {
            var link = getParentContainer(element, anchorTag);
            var returnObject = {
                element: element,
                card: link,
                link: link,
                containsLink: true
            };
            var input = getParentContainer(element, inputTag);
            if (!input) {
                var card = getParentContainer(element, listTag, poleContainerClassName);
                if (card) {
                    // If there's only one viable link in the entire LI then we'll use it by default
                    var viableLink = findLinkInAnchorTags(card);
                    // If the link is not found in the table, try again at levels above it
                    // Won't work for nested tables or lists
                    if (!viableLink && tableTag.indexOf(card.tagName) >= 0) {
                        card = getParentContainer(card.parentNode, listTag, poleContainerClassName);
                        viableLink = findLinkInAnchorTags(card);
                    }
                    // If there's more than one link we still need to see if there's a header common control.  If there's a single
                    // header control we're willing to shift the click to that.
                    if (!viableLink && card) {
                        var reservedTags = _w['TCH'].rTags;
                        for (var i = 0; i < reservedTags.length; i++) {
                            viableLink = getViableLinkFromList(card[getElementsByTagName](reservedTags[i]));
                            if (viableLink) {
                                break;
                            }
                        }
                    }
                    if (viableLink && (!link || viableLink === link)) {
                        returnObject = {
                            element: element,
                            card: card,
                            link: viableLink,
                            containsLink: true
                        };
                    }
                }
            } else {
                returnObject = null;
            }
            // Don't return anything if we don't have a link.
            if (returnObject && !returnObject.link) {
                returnObject = null;
            }
            // If we have a link, but it's the same as or a parent of our source element we mark the object as non-clickable.
            // Clicking is not required here as normal event bubbling will work.
            // But we do need to track the object still, as it is animatable.
            if (returnObject && (containsElement(returnObject.link, element) || returnObject.link === returnObject.element)) {
                returnObject.containsLink = false;
            }
            return returnObject;
        }
        SloppyClickHandler.findCardFromElement = findCardFromElement;
        var containsElement = function(parent, element) {
            if (element) {
                var candidates = parent[getElementsByTagName](element.tagName);
                for (var i = 0; i < candidates.length; i++) {
                    if (candidates[i] === element) {
                        return true;
                    }
                }
            }
            return false;
        };
        var getViableLinkFromList = function(elements) {
            var viableLink = null;
            for (var i = 0; i < elements.length; i++) {
                var possibleLink = findLinkInAnchorTags(elements[i]);
                if (possibleLink) {
                    if (!viableLink) {
                        viableLink = possibleLink;
                    } else if (possibleLink.href !== viableLink.href) {
                        // We found more than one heading with a viable link - the click is ambiguous so there is no click.
                        viableLink = null;
                        break;
                    }
                } else if (elements[i][getElementsByTagName](anchorTag).length > 1) {
                    // A single header has more than one link, and they're not viable - we're confused so we stop.
                    viableLink = null;
                    break;
                }
            }
            return viableLink;
        };
        var isViableLink = function(element) {
            return element && element.className.indexOf(notTargetElementClass) < 0;
        };
        var findLinkInAnchorTags = function(element) {
            var viableLink = null;
            if (element) {
                var anchorTags = element[getElementsByTagName](anchorTag);
                var anchorTagCount = anchorTags.length;
                var linksMatch = true;
                var matchingLink = null;
                var firstLinkUrl = null;
                for (var i = 0; i < anchorTagCount; i++) {
                    /* Only compare the viable links */
                    if (isViableLink(anchorTags[i])) {
                        if (!firstLinkUrl) {
                            matchingLink = anchorTags[i];
                            firstLinkUrl = anchorTags[i].href;
                        } else if (firstLinkUrl !== anchorTags[i].href) {
                            linksMatch = false;
                            break;
                        }
                    }
                }
                /* We need to have found at least one viable link */
                if (linksMatch && firstLinkUrl) {
                    viableLink = matchingLink;
                }
            }
            return viableLink;
        };
        var getParentContainer = function(target, tags, className) {
            for (; target !== document && target; target = target.parentNode) {
                if (target) {
                    for (var i = 0; i < tags.length; ++i) {
                        if (target.tagName === tags[i] || (className && target.className && (space + target.className + space).indexOf(space + className + space) >= 0)) {
                            return target;
                        }
                    }
                }
            }
        };
    })(SloppyClickHandler || (SloppyClickHandler = {}));; ///<reference path="..\Declarations\Shared.d.ts"/>
    ///<reference path="..\..\..\..\..\Web\Content\Content\Script\Declarations\SloppyClickHandler.d.ts"/>
    // See Hyperlink and FdHyperlink at the FD for what this all means
    // BUGBUG: TFS 780914: TypeScript throws build error when two ts file declare the same variable
    _w["si_ct"] = function(el, noRecurse, evt) {
        var getAttribute = "getAttribute",
            ct, ctf, found;
        try {
            for (; el !== document.body; el = el.parentNode) {
                // The 'h' or '_ct' attribute contains the payload for the click tracking function
                // Stop on the first anchor with an 'h' attribute or the first element found with a '_ct' attribute present
                ct = (el.tagName == "A" && el[getAttribute]("h")) || el[getAttribute]("_ct") || el[getAttribute]("data-h");
                if (ct) {
                    // The '_ctf' attribute contains the name of the overriden global click
                    // tracking function which is optional, default is si_T
                    ctf = el[getAttribute]("_ctf");
                    var clickType = -1;
                    if (evt != null && evt.button != null) {
                        clickType = evt.button;
                    }
                    if (!ctf || !_w[ctf]) {
                        ctf = "si_T";
                    }
                    // Try to fire the gping by calling the click-tracking function with the 'ct' payload and the clicked element
                    _w[ctf] && _w[ctf]('&' + ct, el, evt, clickType);
                    break;
                }
                if (noRecurse)
                    break;
            }
        } catch (ignored) {}
        return true;
    };
    (function() {
        function leftClickHandler(evt) {
            _w["si_ct"](sb_ie ? _w.event.srcElement : evt.target, false, _w.event || evt);
        }

        function rightClickHandler(evt) {
            var clickedObject = _w["SloppyClickHandler"] ? SloppyClickHandler.findCardFromElement(sj_et(evt)) : null;
            var target = (clickedObject && clickedObject.link) ? clickedObject.link : (sb_ie ? _w.event.srcElement : evt.target);
            _w["si_ct"](target, false, _w.event || evt);
        }
        if (_w["_G"]) {
            _G["si_ct_e"] = "click";
        }
        // sj_be: Indicates bubble-phase handler (supported on all browsers as opposed to capture which IE doesn't support)
        sj_be(document, "click", leftClickHandler, false);
        sj_be(document, "contextmenu", rightClickHandler, false);
    })();;
    var wlc_d = 1500,
        wlc_t = 63580990353;; ///<reference path="..\..\..\..\..\..\Shared\Content\Content\script\Declarations\Shared.d.ts"/>
    // Performance ping instrumentation for browsers supporting the W3C Web Timing API.
    // si_PP() is the PerformancePing function used to report back performance data.
    // currentTime - a javascript Date object
    // state - "A" for abandoned, "L" for load.
    // This function is called after pageload. However, some verticals may
    // choose to call it at a different time, after setting the sb_ppCPL (custom page load) flag
    _w.si_PP = function(currentTime, state, ajaxRequest) {
        // Only fire one perf ping
        if (_G.PPS) {
            return;
        }
        // Include the impression GUID (IG)
        // The DATA field contains a JSON blob of the event.
        // pp is the name of the event.
        // S is the status to report, from parameter b.
        // PC is the elapsed time between when the <BODY> tag is opened (_G.PCT) and the start time
        // FC is the elapsed time between when the first chunk is complete (_G.FCT) and the start time.
        //    For non-CTE rendering, the value is -1
        // BC is the elapsed time between when the second chunk arrives (_G.BCT) and the start time.
        //    If there is no second chunk, the timer is inserted right after _G.PPCT
        // BS is the elapsed time between right before the BOP scripts are inserted (_G.BST) and the start time
        // H is the elapsed time between when the HTML finished being downloaded and the last inline script got executed (_G.HT), and the start time
        // FE is the elapsed time between the beginning of the first embeded image chunk and the start time, if there are embedded image chunks
        //    Otherwise, the value is -1
        // LE is the elapsed time between the end of last embedded image chunk and the start time, if there are embedded image chunks
        //    Otherwise, the value is -1
        // C1 and C2 are custom ppMetrics, available in each vertical to be overridden with vertical specific elapsed times from the start time.
        //    To use, a page can simply set
        //           _G.C1T=new Date()
        // BP is the elapsed time between when the pageLoad event begins (_G.BPT) and the start time.
        // KP is the page's KeyPoint - the point the page's owner has decided is key to users.
        //    For example, on the SERP, this could be when web results and top answers are loaded, but not BOP answers.
        //    To use, insert the following in-lined JS to the place of interest
        //           _G.KPT=new Date()
        // CT is the total client elapsed time to "Page Load", calculated from the difference between the currentTime parameter and _G.ST
        // IL is the numbers of images
        // If CID is explicitly specified in the response
        //    it should be included in our instrumention as well
        // Collect a small number of PerfPing Metrics
        // --------------------------------------------------
        var key;
        var ppMetrics = ['FC', 'BC', 'H', 'BP', null];
        while (key = ppMetrics.shift()) {
            ppMetrics.push('"' + key + '":' + (_G[key + 'T'] ? _G[key + 'T'] - _G.ST : -1));
        }
        // --------------------------------------------------
        var w3cTimings = ajaxRequest || (_w.performance && _w.performance.timing);
        var w3cPayload = null;
        if (w3cTimings) {
            var w3cFields = [
                "unloadEventStart",
                "unloadEventEnd",
                "redirectStart",
                "redirectEnd",
                "fetchStart",
                "domainLookupStart",
                "domainLookupEnd",
                "connectStart",
                "connectEnd",
                "secureConnectionStart",
                "requestStart",
                "responseStart",
                "domLoading",
                "domInteractive",
                "domContentLoadedEventStart",
                "domContentLoadedEventEnd",
                "domComplete",
                "loadEventStart",
                "loadEventEnd",
                "msFirstPaint",
                "responseEnd",
                ""
            ];
            // Check that navigationStart is a number >= 0
            var navigationStart = w3cTimings.navigationStart;
            if (navigationStart >= 0) {
                var i, t, mask, prev;
                for (mask = prev = i = 0; key = w3cFields.shift(); i++) {
                    t = w3cTimings[key];
                    if (t > 0) {
                        mask |= 1 << i;
                        t -= navigationStart;
                        w3cFields.push(t === prev ? '' : (t - prev).toString(16));
                        prev = t;
                    }
                }
                var navigation = "navigation";
                w3cPayload = ',"w3c":"' + mask.toString(16) + "," + w3cFields.join() + '","nav":' + (navigation in w3cTimings ? w3cTimings[navigation] : performance[navigation].type);
            }
        }
        // NOTE: Any changes to the following part of the string 'DATA={"pp":{' should be communicated to lsdmft because
        //       they could break some features dependent on PP.
        var payLoad = '{"pp":{"S":"' + (state || 'L') + '",' + ppMetrics.join(',') + ',"CT":' + (currentTime - _G.ST) + ',"IL":' + _d.images.length + '}' + (_G.C1 ? ',' + _G.C1 : '') + (w3cPayload !== null ? w3cPayload : '') + '}';
        if (_w['Log2']) {
            Log2.LogEvent("CPT", JSON.parse(payLoad));
        } else {
            _G.PPImg = new Image();
            _G.PPImg.src = _G.lsUrl + '&Type=Event.CPT&DATA=' + payLoad + (_G.P ? '&P=' + _G.P : '');
        }
        _G.PPS = 1; // flag set if perfping has fired
        sb_st(function() {
            sj_evt.fire('onPP');
            sj_evt.fire(_w.p1);
        }, 1);
    };
    // Bind onbefore unload so we can capture the cases of people leaving the page before
    // it has loaded (called the abandon state, denoted as 'A').
    // Note that onbeforeunload is bound to directly because this should be just about the very first script executing on the page,
    // so we don't have to worry about tromping on an existing event handler.
    _w.onbeforeunload = function() {
        si_PP(new Date, 'A');
    };; ///<reference path="..\..\..\answers\services\Shared\Content\Content\script\Declarations\Shared.d.ts"/>
    (function(perfping) {
        if (document.querySelector) {
            var logText = [];
            var customField = "ad";

            function run() {
                var start = sb_gt();
                var de = document.documentElement;
                var body = document.body;
                var adsHeight = -1;
                var adsTop = -1;
                var fold = de.clientHeight;
                var selectors = ["#b_results .b_ad", ".sb_adsWv2", ".ads"];
                // Do not attempt to log anything if body itself is missing
                if (!body)
                    return;
                for (var i = 0; i < selectors.length; i++) {
                    var selector = selectors[i];
                    var ads = document.querySelector(selector);
                    if (ads && ads.offsetTop < fold) {
                        adsHeight = ads.offsetHeight;
                        adsTop = ads.offsetTop;
                        break;
                    }
                }
                // Data in following order: Ads Top, Ads Height, Viewport Width, Viewport Height, Page Width, Page Height, Cost
                logText = [adsTop, adsHeight, de.clientWidth, fold, body.offsetWidth, body.offsetHeight, sb_gt() - start];
            }
            // Adding payload to perf-ping
            if (perfping) {
                var fn = perfping.onbeforefire;
                perfping.onbeforefire = function() {
                    if (fn)
                        fn();
                    run();
                    perfping.mark(customField, logText);
                };
            } else {
                var fn = si_PP;
                si_PP = function() {
                    run();
                    var customLog = '"' + customField + '":[' + logText.join() + ']';
                    _G.C1 = _G.C1 ? _G.C1 + ',' + customLog : customLog;
                    fn.apply(null, [].slice.apply(arguments));
                };
            }
        }
    })(_w["pp"]);; ///<reference path="..\..\..\..\..\..\Shared\Content\Content\script\Declarations\Shared.d.ts"/>
    (function(fn) {
        function extractTimestampParam(qs, key) {
            var param = '&' + key + '=';
            var pos = qs.indexOf(param);
            if (pos < 0) {
                return -1;
            }
            var offset = pos + param.length;
            var ts = qs.substr(offset);
            return parseInt(ts, 10);
        }
        _w.si_PP = function(currentTime, state) {
            var t = _w.performance && _w.performance.timing;
            if (t) {
                var data = '"NS":"' + t.navigationStart + '"';
                var location = window.location;
                var qs = window.location && location.search;
                if (qs) {
                    var st = extractTimestampParam(qs, "sbts");
                    if (!st || st < 0) {
                        var nclidts = extractTimestampParam(qs, "nclidts");
                        var tsms = extractTimestampParam(qs, "tsms");
                        if (nclidts > 0 && tsms >= 0) {
                            st = (nclidts * 1000) + tsms;
                        }
                    }
                    if (st > 0) {
                        data += ',"E2E_PLT":"' + (t.loadEventEnd - st) + '"';
                        // 
                        // Attempt to remove the timestamp parameters from the URL for the following reasons:
                        // (1) User refreshes the page 
                        // (2) Navigates forward and then uses the back button
                        // (3) User adds the page as a bookmark
                        // 
                        // In these cases the timestamps from the first impression are used in the E2E PLT calculation as well as the
                        // browser launch time calculation which yields unusable times. There is currently no way to properly sanitize
                        // all instances of these values. It also decreases perf coverage for those affected impressions.
                        if (window.history && history.replaceState) {
                            var historyUrl = location.href.replace(/(&(sbts|nclidts|tsms)=\d+)/g, "");
                            if (historyUrl !== location.href) {
                                history.replaceState(null, null, historyUrl);
                            }
                        }
                    }
                }
                _G.C1 = _G.C1 ? _G.C1 + ',' + data : data;
            }
            if (fn) {
                fn(currentTime, state);
            }
        };
    })(_w.si_PP);;
    _TC = {
        SP: "search,images,images\/search,videos\/search,local,local\/fetchlocalpivot,local\/fetchlocalelv,news,news\/search,devicecontent,people411,meetingprep,tasklineth\/search,stores,profile\/interests\/v2,account\/permissions,cabs\/search,cabs\/searchasync,cabs\/book,cabs\/driver,cabs\/driverupdate,events\/search,showtimesth,showmoremoviesth,themebasedlocalrecommendation\/search,transitline,morescholarinfo\/search,financemywatchlist\/search,trainschedule,billpay,nearbyshowmore\/search"
    };;
    //]]>
    </script>
    <!-- FD: 83D5ED2615C276827088FD1DE85F29CB -->
</head>

<body class=" " onload="if(_w.lb)lb();" style="overflow-y: hidden;">
    <script type="text/javascript">
    //<![CDATA[
    // Promise implementation from http://documentup.com/kriskowal/q/

    ! function(a) {
        if ("function" == typeof bootstrap) bootstrap("promise", a);
        else if ("object" == typeof exports) module.exports = a();
        else if ("function" == typeof define && define.amd) define(a);
        else if ("undefined" != typeof ses) {
            if (!ses.ok()) return;
            ses.makeQ = a
        } else Q = a()
    }(function() {
        "use strict";

        function a(a) {
            return function() {
                return X.apply(a, arguments)
            }
        }

        function b(a) {
            return a === Object(a)
        }

        function c(a) {
            return "[object StopIteration]" === db(a) || a instanceof T
        }

        function d(a, b) {
            if (Q && b.stack && "object" == typeof a && null !== a && a.stack && -1 === a.stack.indexOf(fb)) {
                for (var c = [], d = b; d; d = d.source) d.stack && c.unshift(d.stack);
                c.unshift(a.stack);
                var f = c.join("\n" + fb + "\n");
                a.stack = e(f)
            }
        }

        function e(a) {
            for (var b = a.split("\n"), c = [], d = 0; d < b.length; ++d) {
                var e = b[d];
                h(e) || f(e) || !e || c.push(e)
            }
            return c.join("\n")
        }

        function f(a) {
            return -1 !== a.indexOf("(module.js:") || -1 !== a.indexOf("(node.js:")
        }

        function g(a) {
            var b = /at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);
            if (b) return [b[1], Number(b[2])];
            var c = /at ([^ ]+):(\d+):(?:\d+)$/.exec(a);
            if (c) return [c[1], Number(c[2])];
            var d = /.*@(.+):(\d+)$/.exec(a);
            return d ? [d[1], Number(d[2])] : void 0
        }

        function h(a) {
            var b = g(a);
            if (!b) return !1;
            var c = b[0],
                d = b[1];
            return c === S && d >= U && kb >= d
        }

        function i() {
            if (Q) try {
                throw new Error
            } catch (a) {
                var b = a.stack.split("\n"),
                    c = b[0].indexOf("@") > 0 ? b[1] : b[2],
                    d = g(c);
                if (!d) return;
                return S = d[0], d[1]
            }
        }

        function j(a, b, c) {
            return function() {
                return "undefined" != typeof console && "function" == typeof console.warn && console.warn(b + " is deprecated, use " + c + " instead.", new Error("").stack), a.apply(a, arguments)
            }
        }

        function k(a) {
            return r(a) ? a : s(a) ? D(a) : C(a)
        }

        function l() {
            function a(a) {
                b = a, f.source = a, Z(c, function(b, c) {
                    W(function() {
                        a.promiseDispatch.apply(a, c)
                    })
                }, void 0), c = void 0, d = void 0
            }
            var b, c = [],
                d = [],
                e = ab(l.prototype),
                f = ab(o.prototype);
            if (f.promiseDispatch = function(a, e, f) {
                    var g = Y(arguments);
                    c ? (c.push(g), "when" === e && f[1] && d.push(f[1])) : W(function() {
                        b.promiseDispatch.apply(b, g)
                    })
                }, f.valueOf = function() {
                    if (c) return f;
                    var a = q(b);
                    return r(a) && (b = a), a
                }, f.inspect = function() {
                    return b ? b.inspect() : {
                        state: "pending"
                    }
                }, k.longStackSupport && Q) try {
                throw new Error
            } catch (g) {
                f.stack = g.stack.substring(g.stack.indexOf("\n") + 1)
            }
            return e.promise = f, e.resolve = function(c) {
                b || a(k(c))
            }, e.fulfill = function(c) {
                b || a(C(c))
            }, e.reject = function(c) {
                b || a(B(c))
            }, e.notify = function(a) {
                b || Z(d, function(b, c) {
                    W(function() {
                        c(a)
                    })
                }, void 0)
            }, e
        }

        function m(a) {
            if ("function" != typeof a) throw new TypeError("resolver must be a function.");
            var b = l();
            try {
                a(b.resolve, b.reject, b.notify)
            } catch (c) {
                b.reject(c)
            }
            return b.promise
        }

        function n(a) {
            return m(function(b, c) {
                for (var d = 0, e = a.length; e > d; d++) k(a[d]).then(b, c)
            })
        }

        function o(a, b, c) {
            void 0 === b && (b = function(a) {
                return B(new Error("Promise does not support operation: " + a))
            }), void 0 === c && (c = function() {
                return {
                    state: "unknown"
                }
            });
            var d = ab(o.prototype);
            if (d.promiseDispatch = function(c, e, f) {
                    var g;
                    try {
                        g = a[e] ? a[e].apply(d, f) : b.call(d, e, f)
                    } catch (h) {
                        g = B(h)
                    }
                    c && c(g)
                }, d.inspect = c, c) {
                var e = c();
                "rejected" === e.state && (d.exception = e.reason), d.valueOf = function() {
                    var a = c();
                    return "pending" === a.state || "rejected" === a.state ? d : a.value
                }
            }
            return d
        }

        function p(a, b, c, d) {
            return k(a).then(b, c, d)
        }

        function q(a) {
            if (r(a)) {
                var b = a.inspect();
                if ("fulfilled" === b.state) return b.value
            }
            return a
        }

        function r(a) {
            return b(a) && "function" == typeof a.promiseDispatch && "function" == typeof a.inspect
        }

        function s(a) {
            return b(a) && "function" == typeof a.then
        }

        function t(a) {
            return r(a) && "pending" === a.inspect().state
        }

        function u(a) {
            return !r(a) || "fulfilled" === a.inspect().state
        }

        function v(a) {
            return r(a) && "rejected" === a.inspect().state
        }

        function w() {
            !ib && "undefined" != typeof window && window.console && console.warn("[Q] Unhandled rejection reasons (should be empty):", gb), ib = !0
        }

        function x() {
            for (var a = 0; a < gb.length; a++) {
                var b = gb[a];
                console.warn("Unhandled rejection reason:", b)
            }
        }

        function y() {
            gb.length = 0, hb.length = 0, ib = !1, jb || (jb = !0, "undefined" != typeof process && process.on && process.on("exit", x))
        }

        function z(a, b) {
            jb && (hb.push(a), b && "undefined" != typeof b.stack ? gb.push(b.stack) : gb.push("(no stack) " + b), w())
        }

        function A(a) {
            if (jb) {
                var b = $(hb, a); - 1 !== b && (hb.splice(b, 1), gb.splice(b, 1))
            }
        }

        function B(a) {
            var b = o({
                when: function(b) {
                    return b && A(this), b ? b(a) : this
                }
            }, function() {
                return this
            }, function() {
                return {
                    state: "rejected",
                    reason: a
                }
            });
            return z(b, a), b
        }

        function C(a) {
            return o({
                when: function() {
                    return a
                },
                get: function(b) {
                    return a[b]
                },
                set: function(b, c) {
                    a[b] = c
                },
                "delete": function(b) {
                    delete a[b]
                },
                post: function(b, c) {
                    return null === b || void 0 === b ? a.apply(void 0, c) : a[b].apply(a, c)
                },
                apply: function(b, c) {
                    return a.apply(b, c)
                },
                keys: function() {
                    return cb(a)
                }
            }, void 0, function() {
                return {
                    state: "fulfilled",
                    value: a
                }
            })
        }

        function D(a) {
            var b = l();
            return W(function() {
                try {
                    a.then(b.resolve, b.reject, b.notify)
                } catch (c) {
                    b.reject(c)
                }
            }), b.promise
        }

        function E(a) {
            return o({
                isDef: function() {}
            }, function(b, c) {
                return K(a, b, c)
            }, function() {
                return k(a).inspect()
            })
        }

        function F(a, b, c) {
            return k(a).spread(b, c)
        }

        function G(a) {
            return function() {
                function b(a, b) {
                    var g;
                    if (eb) {
                        try {
                            g = d[a](b)
                        } catch (h) {
                            return B(h)
                        }
                        return g.done ? g.value : p(g.value, e, f)
                    }
                    try {
                        g = d[a](b)
                    } catch (h) {
                        return c(h) ? h.value : B(h)
                    }
                    return p(g, e, f)
                }
                var d = a.apply(this, arguments),
                    e = b.bind(b, "next"),
                    f = b.bind(b, "throw");
                return e()
            }
        }

        function H(a) {
            k.done(k.async(a)())
        }

        function I(a) {
            throw new T(a)
        }

        function J(a) {
            return function() {
                return F([this, L(arguments)], function(b, c) {
                    return a.apply(b, c)
                })
            }
        }

        function K(a, b, c) {
            return k(a).dispatch(b, c)
        }

        function L(a) {
            return p(a, function(a) {
                var b = 0,
                    c = l();
                return Z(a, function(d, e, f) {
                    var g;
                    r(e) && "fulfilled" === (g = e.inspect()).state ? a[f] = g.value : (++b, p(e, function(d) {
                        a[f] = d, 0 === --b && c.resolve(a)
                    }, c.reject, function(a) {
                        c.notify({
                            index: f,
                            value: a
                        })
                    }))
                }, void 0), 0 === b && c.resolve(a), c.promise
            })
        }

        function M(a) {
            return p(a, function(a) {
                return a = _(a, k), p(L(_(a, function(a) {
                    return p(a, V, V)
                })), function() {
                    return a
                })
            })
        }

        function N(a) {
            return k(a).allSettled()
        }

        function O(a, b) {
            return k(a).then(void 0, void 0, b)
        }

        function P(a, b) {
            return k(a).nodeify(b)
        }
        var Q = !1;
        try {
            throw new Error
        } catch (R) {
            Q = !!R.stack
        }
        var S, T, U = i(),
            V = function() {},
            W = function() {
                function a() {
                    for (; b.next;) {
                        b = b.next;
                        var c = b.task;
                        b.task = void 0;
                        var e = b.domain;
                        e && (b.domain = void 0, e.enter());
                        try {
                            c()
                        } catch (g) {
                            if (f) throw e && e.exit(), setTimeout(a, 0), e && e.enter(), g;
                            setTimeout(function() {
                                throw g
                            }, 0)
                        }
                        e && e.exit()
                    }
                    d = !1
                }
                var b = {
                        task: void 0,
                        next: null
                    },
                    c = b,
                    d = !1,
                    e = void 0,
                    f = !1;
                if (W = function(a) {
                        c = c.next = {
                            task: a,
                            domain: f && process.domain,
                            next: null
                        }, d || (d = !0, e())
                    }, "undefined" != typeof process && process.nextTick) f = !0, e = function() {
                    process.nextTick(a)
                };
                else if ("function" == typeof setImmediate) e = "undefined" != typeof window ? setImmediate.bind(window, a) : function() {
                    setImmediate(a)
                };
                else if ("undefined" != typeof MessageChannel) {
                    var g = new MessageChannel;
                    g.port1.onmessage = function() {
                        e = h, g.port1.onmessage = a, a()
                    };
                    var h = function() {
                        g.port2.postMessage(0)
                    };
                    e = function() {
                        setTimeout(a, 0), h()
                    }
                } else e = function() {
                    setTimeout(a, 0)
                };
                return W
            }(),
            X = Function.call,
            Y = a(Array.prototype.slice),
            Z = a(Array.prototype.reduce || function(a, b) {
                var c = 0,
                    d = this.length;
                if (1 === arguments.length)
                    for (;;) {
                        if (c in this) {
                            b = this[c++];
                            break
                        }
                        if (++c >= d) throw new TypeError
                    }
                for (; d > c; c++) c in this && (b = a(b, this[c], c));
                return b
            }),
            $ = a(Array.prototype.indexOf || function(a) {
                for (var b = 0; b < this.length; b++)
                    if (this[b] === a) return b;
                return -1
            }),
            _ = a(Array.prototype.map || function(a, b) {
                var c = this,
                    d = [];
                return Z(c, function(e, f, g) {
                    d.push(a.call(b, f, g, c))
                }, void 0), d
            }),
            ab = Object.create || function(a) {
                function b() {}
                return b.prototype = a, new b
            },
            bb = a(Object.prototype.hasOwnProperty),
            cb = Object.keys || function(a) {
                var b = [];
                for (var c in a) bb(a, c) && b.push(c);
                return b
            },
            db = a(Object.prototype.toString);
        T = "undefined" != typeof ReturnValue ? ReturnValue : function(a) {
            this.value = a
        };
        var eb;
        try {
            new Function("(function* (){ yield 1; })"), eb = !0
        } catch (R) {
            eb = !1
        }
        var fb = "From previous event:";
        k.resolve = k, k.nextTick = W, k.longStackSupport = !1, k.defer = l, l.prototype.makeNodeResolver = function() {
            var a = this;
            return function(b, c) {
                b ? a.reject(b) : arguments.length > 2 ? a.resolve(Y(arguments, 1)) : a.resolve(c)
            }
        }, k.promise = m, k.passByCopy = function(a) {
            return a
        }, o.prototype.passByCopy = function() {
            return this
        }, k.join = function(a, b) {
            return k(a).join(b)
        }, o.prototype.join = function(a) {
            return k([this, a]).spread(function(a, b) {
                if (a === b) return a;
                throw new Error("Can't join: not the same: " + a + " " + b)
            })
        }, k.race = n, o.prototype.race = function() {
            return this.then(k.race)
        }, k.makePromise = o, o.prototype.toString = function() {
            return "[object Promise]"
        }, o.prototype.then = function(a, b, c) {
            function e(b) {
                try {
                    return "function" == typeof a ? a(b) : b
                } catch (c) {
                    return B(c)
                }
            }

            function f(a) {
                if ("function" == typeof b) {
                    d(a, h);
                    try {
                        return b(a)
                    } catch (c) {
                        return B(c)
                    }
                }
                return B(a)
            }

            function g(a) {
                return "function" == typeof c ? c(a) : a
            }
            var h = this,
                i = l(),
                j = !1;
            return W(function() {
                h.promiseDispatch(function(a) {
                    j || (j = !0, i.resolve(e(a)))
                }, "when", [function(a) {
                    j || (j = !0, i.resolve(f(a)))
                }])
            }), h.promiseDispatch(void 0, "when", [void 0, function(a) {
                var b, c = !1;
                try {
                    b = g(a)
                } catch (d) {
                    if (c = !0, !k.onerror) throw d;
                    k.onerror(d)
                }
                c || i.notify(b)
            }]), i.promise
        }, k.when = p, o.prototype.thenResolve = function(a) {
            return this.then(function() {
                return a
            })
        }, k.thenResolve = function(a, b) {
            return k(a).thenResolve(b)
        }, o.prototype.thenReject = function(a) {
            return this.then(function() {
                throw a
            })
        }, k.thenReject = function(a, b) {
            return k(a).thenReject(b)
        }, k.nearer = q, k.isPromise = r, k.isPromiseAlike = s, k.isPending = t, o.prototype.isPending = function() {
            return "pending" === this.inspect().state
        }, k.isFulfilled = u, o.prototype.isFulfilled = function() {
            return "fulfilled" === this.inspect().state
        }, k.isRejected = v, o.prototype.isRejected = function() {
            return "rejected" === this.inspect().state
        };
        var gb = [],
            hb = [],
            ib = !1,
            jb = !0;
        k.resetUnhandledRejections = y, k.getUnhandledReasons = function() {
            return gb.slice()
        }, k.stopUnhandledRejectionTracking = function() {
            y(), "undefined" != typeof process && process.on && process.removeListener("exit", x), jb = !1
        }, y(), k.reject = B, k.fulfill = C, k.master = E, k.spread = F, o.prototype.spread = function(a, b) {
            return this.all().then(function(b) {
                return a.apply(void 0, b)
            }, b)
        }, k.async = G, k.spawn = H, k["return"] = I, k.promised = J, k.dispatch = K, o.prototype.dispatch = function(a, b) {
            var c = this,
                d = l();
            return W(function() {
                c.promiseDispatch(d.resolve, a, b)
            }), d.promise
        }, k.get = function(a, b) {
            return k(a).dispatch("get", [b])
        }, o.prototype.get = function(a) {
            return this.dispatch("get", [a])
        }, k.set = function(a, b, c) {
            return k(a).dispatch("set", [b, c])
        }, o.prototype.set = function(a, b) {
            return this.dispatch("set", [a, b])
        }, k.del = k["delete"] = function(a, b) {
            return k(a).dispatch("delete", [b])
        }, o.prototype.del = o.prototype["delete"] = function(a) {
            return this.dispatch("delete", [a])
        }, k.mapply = k.post = function(a, b, c) {
            return k(a).dispatch("post", [b, c])
        }, o.prototype.mapply = o.prototype.post = function(a, b) {
            return this.dispatch("post", [a, b])
        }, k.send = k.mcall = k.invoke = function(a, b) {
            return k(a).dispatch("post", [b, Y(arguments, 2)])
        }, o.prototype.send = o.prototype.mcall = o.prototype.invoke = function(a) {
            return this.dispatch("post", [a, Y(arguments, 1)])
        }, k.fapply = function(a, b) {
            return k(a).dispatch("apply", [void 0, b])
        }, o.prototype.fapply = function(a) {
            return this.dispatch("apply", [void 0, a])
        }, k["try"] = k.fcall = function(a) {
            return k(a).dispatch("apply", [void 0, Y(arguments, 1)])
        }, o.prototype.fcall = function() {
            return this.dispatch("apply", [void 0, Y(arguments)])
        }, k.fbind = function(a) {
            var b = k(a),
                c = Y(arguments, 1);
            return function() {
                return b.dispatch("apply", [this, c.concat(Y(arguments))])
            }
        }, o.prototype.fbind = function() {
            var a = this,
                b = Y(arguments);
            return function() {
                return a.dispatch("apply", [this, b.concat(Y(arguments))])
            }
        }, k.keys = function(a) {
            return k(a).dispatch("keys", [])
        }, o.prototype.keys = function() {
            return this.dispatch("keys", [])
        }, k.all = L, o.prototype.all = function() {
            return L(this)
        }, k.allResolved = j(M, "allResolved", "allSettled"), o.prototype.allResolved = function() {
            return M(this)
        }, k.allSettled = N, o.prototype.allSettled = function() {
            return this.then(function(a) {
                return L(_(a, function(a) {
                    function b() {
                        return a.inspect()
                    }
                    return a = k(a), a.then(b, b)
                }))
            })
        }, k.fail = k["catch"] = function(a, b) {
            return k(a).then(void 0, b)
        }, o.prototype.fail = o.prototype["catch"] = function(a) {
            return this.then(void 0, a)
        }, k.progress = O, o.prototype.progress = function(a) {
            return this.then(void 0, void 0, a)
        }, k.fin = k["finally"] = function(a, b) {
            return k(a)["finally"](b)
        }, o.prototype.fin = o.prototype["finally"] = function(a) {
            return a = k(a), this.then(function(b) {
                return a.fcall().then(function() {
                    return b
                })
            }, function(b) {
                return a.fcall().then(function() {
                    throw b
                })
            })
        }, k.done = function(a, b, c, d) {
            return k(a).done(b, c, d)
        }, o.prototype.done = function(a, b, c) {
            var e = function(a) {
                    W(function() {
                        if (d(a, f), !k.onerror) throw a;
                        k.onerror(a)
                    })
                },
                f = a || b || c ? this.then(a, b, c) : this;
            "object" == typeof process && process && process.domain && (e = process.domain.bind(e)), f.then(void 0, e)
        }, k.timeout = function(a, b, c) {
            return k(a).timeout(b, c)
        }, o.prototype.timeout = function(a, b) {
            var c = l(),
                d = setTimeout(function() {
                    c.reject(new Error(b || "Timed out after " + a + " ms"))
                }, a);
            return this.then(function(a) {
                clearTimeout(d), c.resolve(a)
            }, function(a) {
                clearTimeout(d), c.reject(a)
            }, c.notify), c.promise
        }, k.delay = function(a, b) {
            return void 0 === b && (b = a, a = void 0), k(a).delay(b)
        }, o.prototype.delay = function(a) {
            return this.then(function(b) {
                var c = l();
                return setTimeout(function() {
                    c.resolve(b)
                }, a), c.promise
            })
        }, k.nfapply = function(a, b) {
            return k(a).nfapply(b)
        }, o.prototype.nfapply = function(a) {
            var b = l(),
                c = Y(a);
            return c.push(b.makeNodeResolver()), this.fapply(c).fail(b.reject), b.promise
        }, k.nfcall = function(a) {
            var b = Y(arguments, 1);
            return k(a).nfapply(b)
        }, o.prototype.nfcall = function() {
            var a = Y(arguments),
                b = l();
            return a.push(b.makeNodeResolver()), this.fapply(a).fail(b.reject), b.promise
        }, k.nfbind = k.denodeify = function(a) {
            var b = Y(arguments, 1);
            return function() {
                var c = b.concat(Y(arguments)),
                    d = l();
                return c.push(d.makeNodeResolver()), k(a).fapply(c).fail(d.reject), d.promise
            }
        }, o.prototype.nfbind = o.prototype.denodeify = function() {
            var a = Y(arguments);
            return a.unshift(this), k.denodeify.apply(void 0, a)
        }, k.nbind = function(a, b) {
            var c = Y(arguments, 2);
            return function() {
                function d() {
                    return a.apply(b, arguments)
                }
                var e = c.concat(Y(arguments)),
                    f = l();
                return e.push(f.makeNodeResolver()), k(d).fapply(e).fail(f.reject), f.promise
            }
        }, o.prototype.nbind = function() {
            var a = Y(arguments, 0);
            return a.unshift(this), k.nbind.apply(void 0, a)
        }, k.nmapply = k.npost = function(a, b, c) {
            return k(a).npost(b, c)
        }, o.prototype.nmapply = o.prototype.npost = function(a, b) {
            var c = Y(b || []),
                d = l();
            return c.push(d.makeNodeResolver()), this.dispatch("post", [a, c]).fail(d.reject), d.promise
        }, k.nsend = k.nmcall = k.ninvoke = function(a, b) {
            var c = Y(arguments, 2),
                d = l();
            return c.push(d.makeNodeResolver()), k(a).dispatch("post", [b, c]).fail(d.reject), d.promise
        }, o.prototype.nsend = o.prototype.nmcall = o.prototype.ninvoke = function(a) {
            var b = Y(arguments, 1),
                c = l();
            return b.push(c.makeNodeResolver()), this.dispatch("post", [a, b]).fail(c.reject), c.promise
        }, k.nodeify = P, o.prototype.nodeify = function(a) {
            return a ? (this.then(function(b) {
                W(function() {
                    a(null, b)
                })
            }, function(b) {
                W(function() {
                    a(b)
                })
            }), void 0) : this
        };
        var kb = i();
        return k
    });

    Promise = Q;

    function Promise(value) {
        return Q(value);
    }; ///<reference path="../../../../Shared/Content/Content/Script/Declarations/Shared.d.ts" />
    ///<reference path="./Declarations/ClientTestHooks.d.ts" />
    // Cannot depend on ThresholdUtilities, as it's used for Edge as well as Cortana
    var ClientTestHooksImpl;
    (function(ClientTestHooksImpl) {
        function AppendMessageToLog(message, logDivId, exception, skipConsole) {
            if (!skipConsole) {
                if (exception) {
                    console.log(message, exception);
                } else {
                    console.log(message);
                }
            }
            var element = _ge(logDivId);
            if (element) {
                var newEl = _w.document.createElement("div");
                if (exception) {
                    var lines = message.split("\n", 3);
                    if (lines.length > 1 && lines[1].indexOf("at") != -1) {
                        newEl.innerText = lines[0] + "\n" + lines[1].replace("at", "").trim();
                    } else if (lines.length > 2 && lines[2].indexOf("at") != -1) {
                        newEl.innerText = lines[0] + "\n" + lines[1] + "\n" + lines[2].replace("at", "").trim();
                    } else {
                        newEl.innerText = message;
                    }
                } else {
                    newEl.innerText = message;
                }
                element.appendChild(newEl);
            }
        }

        function ClientLog(debugString, exception) {
            AppendMessageToLog(debugString, "ClientLog", exception);
            if (exception) {
                if (typeof _G == "undefined") {
                    _G = {};
                }
                _G["errors"] = _G["errors"] || [];
                _G.errors.push(exception);
            }
        }
        ClientTestHooksImpl.ClientLog = ClientLog;

        function ClientApiLogNoConsole(debugString) {
            var args = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                args[_i - 1] = arguments[_i];
            }
            var argumentString = "";
            for (var i = 0; i < args.length; i++) {
                if (i > 0) {
                    argumentString += ", ";
                }
                argumentString += stringifyParameter(args[i]);
            }
            debugString += "(" + argumentString + ")";
            AppendMessageToLog(debugString, "ClientApiLog", null, true);
        }
        ClientTestHooksImpl.ClientApiLogNoConsole = ClientApiLogNoConsole;

        function resetLog() {
            ["ClientApiLog", "ClientLog"].forEach(function(logDivId) {
                var element = _ge(logDivId);
                element.innerHTML = "";
            });
        }
        ClientTestHooksImpl.resetLog = resetLog;
        var url;

        function setUrl() {
            if (!url) {
                // we use manifest url instead of _w.location so this still works with fiddler autoresponder
                var html = _d.getElementsByTagName("html")[0];
                var manifest = html ? html.getAttribute("manifest") : null;
                url = manifest && manifest != "InvalidManifest" ? manifest.toLowerCase() : _w.location.href.toLowerCase();
            }
        }

        function isTesthookParamSet(testHook) {
            setUrl();
            return url.indexOf("&" + testHook.toLowerCase() + "=1") != -1;
        }
        ClientTestHooksImpl.isTesthookParamSet = isTesthookParamSet;

        function getUrlValue(param, defaultValue) {
            setUrl();
            var pos = url.indexOf("&" + param.toLowerCase() + "=");
            if (pos == -1) {
                pos = url.indexOf("?" + param.toLowerCase() + "=");
            }
            if (pos >= 0) {
                param = url.substr(pos + param.length + 2);
                pos = param.indexOf("&");
                if (pos >= 0) {
                    return param.substring(0, pos);
                } else {
                    return param;
                }
            } else {
                return defaultValue;
            }
        }
        ClientTestHooksImpl.getUrlValue = getUrlValue;
        var noResult = "___";

        function ClientApiLog(debugString) {
            var args = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                args[_i - 1] = arguments[_i];
            }
            ClientApiLogWithResult.apply(null, [debugString, noResult].concat(args));
        }
        ClientTestHooksImpl.ClientApiLog = ClientApiLog;

        function ClientApiLogWithResult(debugString, result) {
            var args = [];
            for (var _i = 2; _i < arguments.length; _i++) {
                args[_i - 2] = arguments[_i];
            }
            if (args.length > 0) {
                var argumentString = "";
                for (var i = 0; i < args.length; i++) {
                    if (i > 0) {
                        argumentString += ", ";
                    }
                    argumentString += stringifyParameter(args[i]);
                }
                debugString += "(" + argumentString + ")";
            }
            if (result !== noResult) {
                debugString += " = " + stringifyParameter(result);
            }
            console.log(debugString);
            var debugId = "ClientApiLog";
            var debugContainer = _ge(debugId);
            if (!debugContainer) {
                // We're not using b_hide, because this file is also used in the settings page where don't have a style for b_hide.
                debugContainer = sj_ce("div", debugId);
                debugContainer.setAttribute("data-tag", "threshold.DebugItems");
                debugContainer.style.display = "none";
                if (_d.body) {
                    _d.body.appendChild(debugContainer);
                } else {
                    sj_be(_w, "load", function() {
                        _d.body.appendChild(debugContainer);
                    });
                }
            }
            var debugItem = sj_ce("div");
            debugItem.setAttribute("data-tag", "threshold.DebugItem");
            debugItem.innerText = debugString;
            debugContainer.appendChild(debugItem);
            sj_evt.fire("ClientApiLog", {
                DebugString: debugString,
                Result: result,
                Arguments: args
            });
        }
        ClientTestHooksImpl.ClientApiLogWithResult = ClientApiLogWithResult;

        function stringifyParameter(parameter) {
            var returnValue;
            var parameterArray = parameter;
            if (parameter == null) {
                returnValue = "null";
            } else if (typeof parameter === "object") {
                if (parameter.length) {
                    // If the argument is an array format it to look like one
                    returnValue = "[" + parameterArray.join(", ") + "]";
                } else {
                    returnValue = JSON.stringify(parameter);
                }
            } else if (typeof parameter === "string") {
                returnValue = parameter;
            } else {
                returnValue = parameter.toString();
            }
            return returnValue;
        }
    })(ClientTestHooksImpl || (ClientTestHooksImpl = {}));
    ClientTestHooks = ClientTestHooksImpl;
    sj_evt.bind("ErrorInstrumentation", function(args) {
        return ClientTestHooks.ClientLog(args[2].Text);
    });;
    var CoreUtilities;
    (function(CoreUtilities) {
        // Contains utility functions that are common to Threshold clients - Cortana, Spartan OneBox etc.
        // Do not include client specfic code here.
        function deferFunction(functionPointer) {
            var originalArgs = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                originalArgs[_i - 1] = arguments[_i];
            }
            return deferMethod.apply(null, [null, functionPointer].concat(originalArgs));
        }
        CoreUtilities.deferFunction = deferFunction;

        function deferMethod(sourceObject, functionPointer) {
            var originalArgs = [];
            for (var _i = 2; _i < arguments.length; _i++) {
                originalArgs[_i - 2] = arguments[_i];
            }
            return function() {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i - 0] = arguments[_i];
                }
                if (!args || args.length === 0) {
                    args = originalArgs;
                } else {
                    for (var i in originalArgs) {
                        if (originalArgs.hasOwnProperty(i)) {
                            args.push(originalArgs[i]);
                        }
                    }
                }
                return functionPointer.apply(sourceObject, args);
            };
        }
        CoreUtilities.deferMethod = deferMethod;
        // Legacy Support
        window["sj_df"] = deferFunction;
        window["sj_dm"] = deferMethod;
    })(CoreUtilities || (CoreUtilities = {}));; /// <reference path="..\Declarations\Shared.d.ts"/>
    /// <reference path="..\Declarations\Threshold.Utilities.d.ts"/>
    var ThresholdDiagnosticsTest = (function() {
        function ThresholdDiagnosticsTest() {
            this.debugStrings = [];
            this.submitCallbackBound = false;
            sj_evt.bind("ajax.WindowsFeedback.Form.Shown", sj_dm(this, this.onFeedbackFormShown));
            sj_evt.bind("ajax.threshold.pageStart", sj_dm(this, this.clearDebugStrings));
        }
        ThresholdDiagnosticsTest.prototype.recordApiString = function(debugString) {
            console.log(debugString);
            var debugId = "ApiDebug";
            var element = _ge(debugId);
            if (!element) {
                element = sj_ce("div", debugId);
                element.style.display = "none";
                element.setAttribute("data-tag", "threshold.ApiDebug");
                if (_d.body) {
                    _d.body.appendChild(element);
                } else {
                    sj_be(_w, "load", function() {
                        _d.body.appendChild(element);
                    });
                }
            }
            var newTag = sj_ce("div");
            newTag.setAttribute("data-tag", "threshold.ApiDebug");
            newTag.innerHTML = debugString;
            element.appendChild(newTag);
            this.debugStrings.push(debugString);
        };
        ThresholdDiagnosticsTest.prototype.clearDebugStrings = function() {
            this.debugStrings.length = 0;
        };
        ThresholdDiagnosticsTest.prototype.onFeedbackFormShown = function() {
            var form = _ge("fdbkfrm");
            if (form) {
                if (!this.submitCallbackBound) {
                    var deferredSubmitCallback = sj_dm(this, this.onFeedbackFormSubmit, form);
                    var formButtons = form.getElementsByClassName("fdbkactionbtns");
                    if (formButtons && formButtons.length == 1) {
                        // onFeedbackFormSubmit is bound to a parent of the submit button (the div containing the submit/cancel buttons).
                        // It is bound with useCapture=true to ensure that a click on the submit button reaches our callback before the feedback 
                        // form's normal submission callback (which is bound to "click" on the button itself).
                        sj_be(formButtons[0], "click", deferredSubmitCallback, true);
                        this.submitCallbackBound = true;
                    }
                }
            } else {
                // If the form is missing, a new method would need to be created and bound
                this.submitCallbackBound = false;
            }
        };
        ThresholdDiagnosticsTest.prototype.onFeedbackFormSubmit = function(event, form) {
            var apiDebug = "apiDebug";
            var pageDebug = _w["PageDebug"];
            var screenshotCheckbox = form.elements["screenshot"];
            // We assume that if there was no screenshot input element we didn't need the user's permission to get one
            if (!screenshotCheckbox || screenshotCheckbox.checked) {
                pageDebug[apiDebug] = this.debugStrings.toString();
            } else if (pageDebug[apiDebug]) {
                delete pageDebug[apiDebug];
            }
        };
        return ThresholdDiagnosticsTest;
    })();
    _w["ThresholdDiagnostics"] = new ThresholdDiagnosticsTest();; /// <reference path="..\Declarations\Shared.d.ts"/>
    /// <reference path="..\Declarations\Promise.d.ts"/>
    /// <reference path="..\Declarations\Threshold.Utilities.d.ts"/>
    /// <reference path="..\..\..\..\..\Threshold\Src\Content\Script\Declarations\SearchAppWrapper.d.ts"/>
    var FailedPromise = (function() {
        function FailedPromise() {
            this.isActive = true;
            this.operation = null;
        }
        FailedPromise.prototype.then = function(onComplete, onError, onProgress) {
            this.handleError(onError);
            return this;
        };
        FailedPromise.prototype.done = function(onComplete, onError, onProgress) {
            this.handleError(onError);
        };
        FailedPromise.prototype.handleError = function(onError) {
            if (this.isActive) {
                if (onError) {
                    _w.setImmediate(function() {
                        return onError(null);
                    });
                }
            }
        };
        FailedPromise.prototype.cancel = function() {
            this.isActive = false;
        };
        return FailedPromise;
    })();
    var ThresholdUtilitiesM2 = (function() {
        function ThresholdUtilitiesM2() {
            this.regExes = {};
            this.guidCleaner = /[-{}]/g;
            this.ampersandSanitizer = /&+$|((\?|&|#)&+)/g;
            this.isFirstPageStart = true;
            this.startTime = (_w.performance) ? _w.performance.timing.navigationStart : si_ST;
            this.apiSequenceNumber = 0;
            this.headersAsyncPromise = null;
            this.headersCallComplete = false;
            this.cortanaHeaders = null;
            this.themeColor = null;
            this.headersCallTimeout = 3000;
            this.headersCallbacks = [];
            // list contains supported RTL languages by Win10
            this.langArray = ["ar", "dv", "fa", "he", "ku-arab", "pa-arab", "prs", "ps", "sd-arab", "syr", "ug", "ur", "qps-plocm"];
            sj_evt.bind("ajax.threshold.pageStart", sj_dm(this, this.onPageStart), 1);
        }
        ThresholdUtilitiesM2.prototype.getUrlParameter = function(url, parameterName) {
            var parameterValue = null;
            var regex = this.getParameterRegex(parameterName);
            // Match the last parameter value if there are multiples.
            // Some of our test code can keep appending parameters before and after the hash.
            var nextMatch;
            var match;
            var i = 0;
            while (nextMatch = regex.exec(url)) {
                match = nextMatch;
            }
            if (match && match.length >= 2) {
                parameterValue = match[1];
            } else if (parameterName === "mock") {
                // The mock parameter is often unnamed, so it's special and a bit harder to find
                parameterValue = this.getMockParameter(url);
            }
            return parameterValue;
        };
        // if parameterValue is null then it will remove  parameterName from url
        ThresholdUtilitiesM2.prototype.setUrlParameter = function(url, parameterName, parameterValue) {
            var finishedUrl = url;
            var match = this.getParameterRegex(parameterName).exec(url);
            var token = "&";
            if (match) {
                token = match[0].substring(0, 1);
                var insertStart = match.index;
                var insertEnd = match.index + match[0].length;
                // We matched an existing parameter so we either need to change the value or remove it
                finishedUrl = url.substring(0, insertStart);
                if (parameterValue) {
                    finishedUrl += token + parameterName + "=" + parameterValue;
                }
                finishedUrl += url.substring(insertEnd);
            } else if (parameterValue) {
                // No matching parameter was found so we're going to have to add it to the end
                // But we only add something if we've been given a value
                // /devicecontent urls default to providing a hash
                // everything else expects a ?
                var isDeviceContent = this.getRegex("devicecontent");
                if (isDeviceContent.test(url)) {
                    // We assume everything should be after the hash if there isn't one
                    if (url.indexOf("#") < 0) {
                        token = "#";
                    }
                } else {
                    if (url.indexOf("?") < 0) {
                        token = "?";
                    }
                }
                finishedUrl = url + token + parameterName + "=" + parameterValue;
            }
            return finishedUrl;
        };
        ThresholdUtilitiesM2.prototype.getDecodedQuery = function(url) {
            var source = url;
            if (!source) {
                source = _w.location.href;
            }
            var baseQuery = this.getUrlParameter(source, "q");
            if (baseQuery) {
                // process unique characters that the server otherwise would handle
                baseQuery = decodeURIComponent(baseQuery.replace(this.getRegex("\\+"), " ")).trim();
            }
            return baseQuery;
        };
        ThresholdUtilitiesM2.prototype.getUrlReadyQuery = function(query) {
            return encodeURIComponent(query).replace(this.getRegex("%20"), "+");
        };
        ThresholdUtilitiesM2.prototype.recordApiTimeDetail = function(metricLabel, methodName, timingHandle) {
            var measurementTime = new Date();
            if (metricLabel) {
                _G.ApiTimes = _G.ApiTimes || {};
                _G.ApiTimes[metricLabel] = measurementTime.getTime() - this.startTime;
            }
            if (!timingHandle) {
                timingHandle = {
                    time: measurementTime,
                    label: metricLabel || methodName,
                    sequence: this.apiSequenceNumber++
                };
            } else {
                // Return new handle with the new time to preserve old timestamp
                // if caller holds a reference to the old timing handle and wants that time value.
                var h = {};
                for (var k in timingHandle) {
                    if (timingHandle.hasOwnProperty(k)) {
                        h[k] = timingHandle[k];
                    }
                }
                timingHandle = h;
                timingHandle.time = measurementTime;
            }
            var msWriteProfilerMark = _w.msWriteProfilerMark;
            var markLabel = timingHandle.sequence + "," + (metricLabel || timingHandle.label);
            if (msWriteProfilerMark) {
                // There is a 32 character limit for profile mark labels, any extra will be truncated.
                msWriteProfilerMark(markLabel);
            }
            if (_w.performance && performance.mark) {
                performance.mark(markLabel);
            }
            return timingHandle;
        };
        ThresholdUtilitiesM2.prototype.recordApiTime = function(metricLabel) {
            this.recordApiTimeDetail(metricLabel);
            return null;
        };
        ThresholdUtilitiesM2.prototype.uploadApiTimes = function(metricLabel) {
            var apiTimes = _G.ApiTimes;
            this.recordApiTime(metricLabel);
            if (apiTimes && typeof Log2 !== "undefined" && Log2) {
                Log2.LogEvent("CPT2", {
                    "wt": apiTimes
                });
                _G.ApiTimes = {};
            }
        };
        ThresholdUtilitiesM2.prototype.wrapSynchronousApiCall = function(o, methodName, instrumentationKey, scope) {
            var _this = this;
            var args = [];
            for (var _i = 4; _i < arguments.length; _i++) {
                args[_i - 4] = arguments[_i];
            }
            var apiStart = this.recordApiTimeDetail((instrumentationKey) ? instrumentationKey + "S" : null, methodName);
            var returnValue;
            var instrumentApiCall = function(state, error) {
                var apiEnd = _this.recordApiTimeDetail((instrumentationKey) ? instrumentationKey + state : null, methodName, apiStart);
                var errorString = (error) ? " exception: " + error["stack"] : "";
                _this.recordApiString("ApiEnd " + state + " \t\"" + ((scope) ? scope : "") + "\"\t" + methodName + "(" + args.join(", ") + ")\t" + (apiEnd.time.getTime() - apiStart.time.getTime()) + "ms elapsed" + errorString);
            };
            try {
                returnValue = o[methodName].apply(o, args);
                instrumentApiCall("C");
            } catch (ex) {
                instrumentApiCall("E", ex);
                SharedLogHelper.LogError("Exception", "Failed while calling overrideMethod: " + methodName, ex);
                returnValue = null;
            }
            return returnValue;
        };
        ThresholdUtilitiesM2.prototype.wrapApiCall = function(o, methodName, instrumentationKey, scope) {
            var args = [];
            for (var _i = 4; _i < arguments.length; _i++) {
                args[_i - 4] = arguments[_i];
            }
            var args = [];
            for (var i = 0; i < arguments.length; i++) {
                args.push(arguments[i]);
            }
            // Shove in default values for timeout and callback.  As is the TS compiler is actually passing an array to the callee which won't resolve properly in the subsequent call.
            args.splice(4, 0, 0, null);
            return this.wrapApiCallWithTimeout.apply(this, args);
        };
        ThresholdUtilitiesM2.prototype.wrapApiCallWithTimeout = function(o, methodName, instrumentationKey, scope, timeout, failureCallback) {
            var args = [];
            for (var _i = 6; _i < arguments.length; _i++) {
                args[_i - 6] = arguments[_i];
            }
            if (_w["SearchAppWrapperLogging"]) {
                return o[methodName].apply(o, args);
            } else {
                var thresholdUtilities = this;
                var apiStart = this.recordApiTimeDetail((instrumentationKey) ? instrumentationKey + "S" : null, methodName);
                var timeoutId;
                var returnValue;
                var instrumentApiCall = function(state, error) {
                    var stackProperty = "stack";
                    var apiEnd = thresholdUtilities.recordApiTimeDetail((instrumentationKey) ? instrumentationKey + state : null, methodName, apiStart);
                    var errorString = (error && error[stackProperty]) ? " exception: " + error[stackProperty] : "";
                    if (error && errorString === "") {
                        errorString = " Windows error: " + error.message;
                    }
                    thresholdUtilities.recordApiString("ApiEnd " + state + " \t\"" + ((scope) ? scope : "") + "\"\t" + methodName + "(" + args.join(", ") + ")\t" + (apiEnd.time.getTime() - apiStart.time.getTime()) + "ms elapsed" + errorString);
                };
                try {
                    returnValue = o[methodName].apply(o, args);
                    this.recordApiTimeDetail((instrumentationKey) ? instrumentationKey + "P" : null, methodName);
                    if (timeout && timeout > 0) {
                        timeoutId = sb_st(function() {
                            if (returnValue && returnValue.cancel) {
                                returnValue.cancel();
                            }
                            instrumentApiCall("T");
                            if (failureCallback) {
                                failureCallback(null);
                            }
                        }, timeout);
                    }
                    returnValue.then(function(r) {
                        if (timeoutId) {
                            sb_ct(timeoutId);
                        }
                        instrumentApiCall("C");
                        return r;
                    }, function(r) {
                        if (timeoutId) {
                            sb_ct(timeoutId);
                        }
                        instrumentApiCall("E", r);
                        SharedLogHelper.LogError("Exception", "Failed in overrideMethod callback: " + methodName, r);
                        if (failureCallback) {
                            failureCallback(null);
                        }
                    } /* Trigger the failure if the error callback on the promise returns */ );
                } catch (ex) {
                    if (timeoutId) {
                        sb_ct(timeoutId);
                    }
                    instrumentApiCall("E", ex);
                    SharedLogHelper.LogError("Exception", "Failed while calling overrideMethod: " + methodName, ex);
                    var failedPromise = new FailedPromise();
                    returnValue = failedPromise.then(null, failureCallback);
                }
                return returnValue;
            }
        };
        ThresholdUtilitiesM2.prototype.cleanGuid = function(guid) {
            var returnValue = guid;
            if (returnValue) {
                returnValue = returnValue.replace(this.guidCleaner, "");
            }
            return returnValue;
        };
        ThresholdUtilitiesM2.prototype.parseJSON = function(jsonString) {
            var jsonObject;
            var exception = null;
            // Avoid unnecessary exception handling by checking for obvious failures first
            if (jsonString) {
                try {
                    jsonObject = JSON.parse(jsonString);
                } catch (e) {
                    exception = e;
                }
            }
            if (!jsonObject) {
                console.log("Unable to parse JSON input: " + jsonString + ((exception) ? ".  Exception: " + exception : ""));
            }
            return jsonObject;
        };
        // Because of the async nature of Cortana methods, this has to be callback-driven as well
        // The method calls callback if the API call returns within *timeout* ms from being called
        ThresholdUtilitiesM2.prototype.getCortanaHeaders = function(callback, timeout) {
            var thresholdUtilities = this;
            if (this.headersCallComplete) {
                callback(this.cortanaHeaders);
                return;
            }
            if (!this.headersAsyncPromise) {
                var timeoutHandle = null;
                var cancelCallback = false;

                function resetTimeout() {
                    if (timeoutHandle) {
                        sb_ct(timeoutHandle);
                        timeoutHandle = null;
                    }
                    thresholdUtilities.headersCallComplete = true;
                }

                function invokeCallbacks(headers) {
                    if (!cancelCallback) {
                        var callbacks = thresholdUtilities.headersCallbacks;
                        var callbackCount = callbacks.length;
                        for (var i = 0; i < callbackCount; i++) {
                            callbacks[i](headers);
                        }
                    }
                }

                function onHeadersCallSuccess(headers) {
                    resetTimeout();
                    thresholdUtilities.cortanaHeaders = headers;
                    invokeCallbacks(headers);
                }

                function onHeadersCallError(err) {
                    resetTimeout();
                    invokeCallbacks(null);
                    // BUGBUG: Add error logging as per TFS 1489906
                }
                timeoutHandle = sb_st(function() {
                    invokeCallbacks(null);
                    cancelCallback = true;
                }, this.headersCallTimeout);
                this.headersAsyncPromise = this.wrapApiCall(SearchAppWrapper.CortanaApp, "getQueryHeadersAsync", "GQH_", "getQueryHeaders").then(onHeadersCallSuccess, onHeadersCallError);
            }
            this.headersCallbacks.push(callback);
        };
        ThresholdUtilitiesM2.prototype.getThemeColor = function(callback, timeout) {
            var _this = this;
            var thresholdUtilities = this;
            if (this.themeColor === null) {
                this.getCortanaHeaders(function(headers) {
                    processColorFromHeaders(headers);
                    callback(_this.themeColor);
                });
            } else {
                callback(this.themeColor);
            }

            function processColorFromHeaders(headers) {
                if (this.themeColor == null && headers) {
                    var value = headers["X-BM-Theme"];
                    if (value) {
                        var accentColor = value.split(";")[1];
                        if (accentColor && accentColor != this._accentColor) {
                            thresholdUtilities.themeColor = "#" + accentColor;
                        }
                    }
                }
            }
        };
        ThresholdUtilitiesM2.prototype.setBodyLangAttributes = function(lang) {
            _d.body.setAttribute("dir", this.langArray.some(function(el) {
                lang = lang.toLocaleLowerCase();
                return lang == el || lang.indexOf(el + '-') == 0;
            }) ? "rtl" : "ltr");
            _d.body.setAttribute("lang", lang);
        };
        ThresholdUtilitiesM2.prototype.getEmptyTaskFrame = function(rawQuery) {
            return {
                CustomTaskFrame: true,
                Status: "InProgress",
                Uri: "",
                TypeId: "b89d219d-7b61-48e7-8f3c-367e4a0e631b",
                RawTextQuery: {
                    Uri: "entity://TextData",
                    TypeId: "ae77cbd2-cf71-438c-95b4-d3b86dc4a60e",
                    State: "Filled",
                    Source: "Unknown",
                    ClientUpdate: false,
                    Value: rawQuery,
                    ProfanityMasked: rawQuery
                }
            };
        };
        ThresholdUtilitiesM2.prototype.recordApiString = function(debugString) {
            ThresholdDiagnostics.recordApiString(debugString);
        };
        ThresholdUtilitiesM2.prototype.pushOntoArray = function(mainArray, additionalContent) {
            if (mainArray && additionalContent) {
                for (var i in additionalContent) {
                    mainArray.push(additionalContent[i]);
                }
            }
        };
        ThresholdUtilitiesM2.prototype.navigateTo = function(url, instItem) {
            var link = sj_ce("a", "b_hide");
            link.href = url;
            link.setAttribute("data-h", instItem.GetNamespacedKValue());
            _d.body.appendChild(link);
            link.click();
        };
        ThresholdUtilitiesM2.prototype.getParameterRegex = function(parameterName) {
            return this.getRegex("[?&#]" + parameterName.toLowerCase() + "=([^&#]*)");
        };
        ThresholdUtilitiesM2.prototype.getRegex = function(expression, caseSensitive, notGlobal) {
            var regex = this.regExes[expression];
            if (!regex) {
                regex = new RegExp(expression, ((notGlobal) ? "" : "g") + ((caseSensitive) ? "" : "i"));
                this.regExes[expression] = regex;
            }
            // Reset the match iterator
            regex.lastIndex = 0;
            return regex;
        };
        ThresholdUtilitiesM2.prototype.getMockParameter = function(url) {
            var mockParameter = null;
            var hashString = null;
            var hashIndex = url.indexOf("#");
            if (hashIndex > 0 && hashIndex < url.length - 1) {
                var parameters = url.substr(hashIndex + 1).split("&");
                // Find the one 
                var unlabeledParameters = parameters.filter(this.unlabeledParameterFilter);
                if (unlabeledParameters.length > 0) {
                    mockParameter = unlabeledParameters[0];
                }
            }
            return mockParameter;
        };
        ThresholdUtilitiesM2.prototype.unlabeledParameterFilter = function(value) {
            return value.indexOf("=") < 0;
        };
        ThresholdUtilitiesM2.prototype.clearLocalCache = function() {
            this.cortanaHeaders = null;
            this.themeColor = null;
            this.headersAsyncPromise = null;
            this.headersCallComplete = false;
            this.headersCallbacks = [];
        };
        ThresholdUtilitiesM2.prototype.onPageStart = function(eventArgs) {
            console.log("onPageStart");
            if (!this.isFirstPageStart && eventArgs[1]) {
                this.startTime = eventArgs[1];
                this.clearLocalCache();
            }
            this.isFirstPageStart = false;
            sj_evt.fire("ajax.postload");
        };
        return ThresholdUtilitiesM2;
    })();
    _w["ThresholdUtilities"] = new ThresholdUtilitiesM2();
    sj_evt.bind("threshold.pageUnload", function() {
        sj_evt.fire("unload");
    }, 0);; /// <reference path="../../../../Shared/Content/Content/Script/Declarations/Shared.d.ts" />
    /// <reference path="../../../../Shared/Content/Content/Script/Declarations/Threshold.Utilities.d.ts"/>
    /// <reference path="../../../../Shared/Content/Content/Script/Declarations/Promise.Mock.d.ts" />
    /// <reference path="../../../../Shared/Content/Content/Script/HitHighlighting/HitHighlightingParser.d.ts"/>
    /// <reference path="../../../../Threshold/src/Content/Script/Declarations/CortanaSearch.d.ts" />
    /// <reference path="./Declarations/ClientTestHooks.d.ts"/>
    var __extends = this.__extends || function(d, b) {
        for (var p in b)
            if (b.hasOwnProperty(p)) d[p] = b[p];

        function __() {
            this.constructor = d;
        }
        __.prototype = b.prototype;
        d.prototype = new __();
    };
    var DefaultBrowserIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAzySURBVFhHvZgHWFPXHsAhTBcgKoij9LlH6x61arU++6iCVhxgna2rKuJkyEhyEwIhEFlKIEE2AiLiABciWhFFHKA4kCEzEUgYCSEkIfeed0IwhAuutu993w++7957zv//y8n/jButkYHxvRkVlKAJ7mlvRgTE9QbX5jNRCmlR2Ti0vTi9wbX5XwA//BcIQXDN/kFU8b9YSAWu8d9EM/JfFFKD6/Wl4KJB/q6QClxfiDY13IDGMvcLnHmKbh1DcUhx8Lq4jnp+9c6Y7d8Fuw7zYcIGyma9Qv0zQjiM6KHLT5N8slzSizxfVDlUc9fxSqfznlvwnphy80yL75inXJhlFXBAhxLaO6NSCM5PzQcq1NG/iEF0lk20e9rD397UezcIj/H5v9SXT3j3xIJ3ezAvc3DJZfPi9OE1N025t0xyLo6dS3fRRsJwSf+OUATBi6NHiTJCzgwjnxtJTF3AiErKchCJmDL5SWnLjtZXI4U5/QU3BhQmjGIxFqw7ZLfw4O7Zhx2Wuew8xV5cdn0YMXRFf2IgLulfEqJCj8ghtOSJJ659fzpvbdrzw1n3zj6JfFePAMACciLasEL2yLw+dWB+2CRvjxXzHA6YHUH6uTL1PIJ1iSchgzyZTuG2yfGzxxBJWu8HSRX8vRBFWWKadKfviQ41wgRJmsPJscuucnzd4lnTklB26U29PyrzAcAXtNqB8rHovf4Pkmcyo1z2x6ZsikhfSI0c6RGmh4R1x6Gyx/l5RSQsmo646iCs7vtfOkL6lKhhxFSrcy+PVEmILRhd0Hi5MkHcGgCAJ5BtBA2zQeEA8TXDmLMOztcz9uRV/F7QuD1fsPFq+VJW9gi3eD3KaXWo4QwmOWbVFMRdh/zXhKhsA2r0lKCb6+9y3ZpQHzEW1lB2qwhBZX4APQL4o8ErHSxX9+WV+cE3IokFLz2qWlx4ioM12O5SxZZCybo/BYtjC4cfP6uHRKoCmjNO7I3YYolQdTRHTiX0OdNenxo16VT2xoJGDyHwk6DxvPyiCjqKMoF8H6i1APnaklsmj7I2hOTfDqioC2ySnmgF3kJAbARHuWBPmWLzs/Y1OaJFZ4otSKl6SASsQkt/hk2IgzH5BPyomok+SwjWjRmStjK3zkkEGO3gDC+3vNZXofAHUntQNQTkaRdlzveMpdiEpy/jZFsnP950vYTCkwaKga8IkJvA0XfQqWNTodTmrnBuZNEwzyQdSsTkAK+pfiQ9JFQzEeSDQhB1I2Ni0pzEF3sbMUobiKu9X1VxHMMCQbstqBwIcrVvxM1YSPMfTIkxRKLh7DOkRBtTEyb4pm/NqfVrUTp5NoJDtdjON3L7JxKrrKaZwbkmbnGwhkxpAQRKuDqLio8JQWALAyRmWmjOZp7MRdgRyb1f8dYDAA5oXwPKB4Ic7YeJY8Yj3rpUZZF1x6WyCdQIY49425tvGUJAawauDcChCtv2Uv7LfdGyy3WTyBmGpAhdKgv3fUE+JUSJMKedX3andj9fdqr2UUntCQwNBZJVoNQY5BDSIuZYkn0InbtSd5f3oQlUjpF73Na71UwRoDSCYzywu0xh91Rild38Xcxrc9cEHUq3h5pPCMFJMY1z375YSKoszn/r39ERCNp+BiX9QY5WFHv5V8qSxC9gKlTRdaiccT6XqO/k9BbgxgcHqrAtRdJV94Q/pPOn0DMNiN2rgJqPClHYhsSY+akvd5dwUwt8FIog0G4P3vYHd7UKrixYRAvRQXp10UCVwIQUvyOnyl8IEAE4zAW/F8ttH7b+O7NpNufFQNdION3UKio+ITTMO9Uq683JF8kdYgaQHQCVpiBXi3/DknSWbY7EaFN6dekJTGCARK5JfRooArQm4KKcbgq7J21Wt1vmJb4d7pnY+1v7mBCsOEvGZZc7KbX1AUBBAtyRIE+r/sros/ciDt58Msrr7EDPuIEesUrcITFduEV3EjUAcjxqsEfc+vNPQ0TAtxm41YN9FejGwvYVd4Xfn6v5mnJRF65JvYXgn/q6hxCFM4uZdKc8FFWEAtEy8FSr5YpRajaDU1PNbhH71zbTKxvplQJfNRUCOuStgF4u8C4XeJXxqSUN8D+zTnKyFcDp5s6Hcw3dXCS1zhEuulw/1jtTH4kg0LroWwiiFiJQ2buig0WiEIAeBVVDsSztrIydoSWvo9raz6BYEgaSe5KEgiQFSIR0gAQ5iJOBWCmIlgKOBJwSK4U8oVA1uuUFrGvx4gz+BHqWPvlLhMz9gtMfUjHUF6ufgeURCtPmMZ/cYQlboxVYPAoSNW2gSicqmzMaQlHtXUKwrol84FiNbnsp/SVXvOSaYLzv7S8Q0qexdqW6ikReihY7rNCw/rwRIzPc+x2fJUOjFSAOBfEKkNCZGxqogZdK5F1CkBiZ0ilcAoJbgQ8sIy5wLJbveNK+NrNxCuNLRujrwMD7ZfD4d1xWOlFxnRAUtWtfUSlFKAvuABEdAClpWB55d6b/1RmMKzMYGTMY6ZDpEN/L0+md+EAuTfe5CJlGU/It7cJUrwuTKWkTSefHeZwb45o8zClaF+F8QqhreLxY+1KP1QoDWhrs23ONbrH+teny9V1VTW5iBVMGwhRg74NyI0osrPrPBO4kPVGu4wTlIbjLQ00PIZUNZCQz6NqLnTyha1PZrMokoz3h3qvulW6rFR8RKigSLFAO3MoaLRlpMJO6y8dR5/skSiHcOkTwCl8d617EtePyltXlDA0NWLE4Pvvnx+9+rWr7o1Hu0ob6SDF/CbYs7r4BOVKzY58QSGxDN05/F/YAJ/ZAJ86go+xBR8KNDocNOBam54nf6iF9COnTwpDre6rqbLivzJ6ftdhC9pgWX7D0QZ1tiWj7O+kBocKzDfOVgINvmoe7J31isUbYw5xjt2aXHyzm730t2P2Cb/+wzjqL91Py60nEC4auPc6KKpQyOCFj+snIvK1c3g+1+aYpJ7+Z4Egbf/LBvJtcq8Imu4q2HQ3ywyIUkWAMCbbuWompe5w23NF6vSPAO9DV2CVqZfJjCh89Xg/2VmOb38it89oWXhNMj6u0OBJDIPWxMfch9NUJ/xtPF3OLzapvDiaS/zPI2c8SOTc5oXjhvXrrV6KNVe27+R1HhShZDOht2MZbJZb084bESB0yLF64uIdDPwKZre/OHk1Jsr30nNKggPu8Qy3YXtphW9D+4x3h9OSar9wuGBw7pZlUTR9Ck4O98woncx+ZlKcPWe74u657kB6JMwK5NDmldHGeYOXrVvsa6Z5GhbMIg060VuxosWDD1aLpQRmjiIlDXWNGepyZQE+zTnnk+KyOJFDaHOCB38oUa5/Jlue2zsvgT/TPGXiY1cegdtKH0NQQ2uOnE7gPTYpSLSYdOEwgKj+KgedpM+qNKZeqfshvWlHSZs+V72tEnVswUiugQa0WlFIvRWrEpEoRuaqVXCNGGjrgCR8eFA9wwfYKdG2RzOq++Psbzd+yXwxxiiKQw5VCOD4kNCHQ517+ZG6eSUHKqDGHnAlk1U8CnP7u0SN8s6derFz0oGnl67Zfq+V7GlDHRsy1GXg2A1ILQOChRwjI8LIRuAjAoTqwpwZsLetY+1wKbZZkNs+JLbVwiSd4dA5Pn6iEut5cO68hZr4nzmXPhyP0Jt1shtPB90LKzb+fe9RI2pVpicUL7jRYPRevL5dtr1Hs5qH76tF9cDAagGMD2A/rlwd21GCbK9D1r+Wrn7Vb5bYuvfJudvjT4a7xBHeW8t1ZbdCLnkKQzmXaPXldxf2h1bcGuwTY6BODVUKdTmx9Eudraty04MwF6ZVLcxuti9psS2R2FQr7SnRjJQb/b3ir2ADr94189XOp9SOJzZ/CZalvxxLTjJ05BNLHVFQoZXBCcKZM8kdu35hQe9fkcfro1cw9g6hB+l6hxt7B04LIGyL++DVi9yIGaZxL2GxWzg8XK37KFqzIF9oUim2eSayfS1c9a1/9WLwmr3VNTvPKDO4c5p3hhyP1j4fBsN1ZVMCh6jVavYQgSqewub7Ol1O/Kb5qXnLdLCdjbOqFWWcuzgtNWeISuWY503EI4q+DsPod55gejbIkp30b/Of8qIKFCS+XpJT8eK50Ufyzuazc8cTzJvtDDZxOacMSVo2xZhaVjSad9/sWUjohYWYkuq3vDteglUjIcqdAG3u/bXORoxZuVEM3Jpx6sIHyrYrK0SVz9D05/eD+4Moe4Bw+wCnM0DlM35WlC4v3/XetRDMFTkVF56MPCqlC6JBP9fdgGrkxBh1n9HNj6nqGaJNDlT97dTbDrfpquiNooplC00NN56OPCvUOpHEfJ6GJZrNuNOPgVNR8ltAHwElogmvZhWYKnIeKzkf/RyGIZhacDaTzfi8hXIgPgDPQBNeyB+osat57qPksIVwy9SUOdfuPoU70AbqEVMBlGwc8v30OuF6fRJ2xDwLi/gsWc7lQbCRV9AAAAABJRU5ErkJggg==";
    if (!_w.setImmediate) {
        _w.setImmediate = function(callback) {
            _w.setTimeout(callback, 16);
            return 0;
        };
        _w.setImmediate.Override = true;
    }
    // Used to tag the stuff that still needs to be mocked.
    var _NYI_ = null;
    // Please avoid creating new images in this file.
    // Where possible re-use one of these mock images or call the getMockImage function to avoid bloating the file size
    function getMockImage(width, height, color, text) {
        var canvas = document.createElement("canvas");
        canvas.width = width;
        canvas.height = height;
        var ctx = canvas.getContext('2d');
        ctx.rect(0, 0, width, height);
        // draw a consistent gray border
        ctx.strokeStyle = "#666";
        var insetSize = Math.min(height, width) * 0.05;
        ctx.lineWidth = insetSize;
        ctx.strokeRect(insetSize / 2, insetSize / 2, width - insetSize, height - insetSize);
        ctx.fillStyle = color;
        ctx.fillRect(insetSize, insetSize, width - insetSize * 2, height - insetSize * 2);
        if (text) {
            var usableWidth = width - insetSize * 2;
            ctx.font = "300 " + Math.round(usableWidth / text.length) + " Helvetica";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillStyle = "#000";
            ctx.fillText(text, width / 2, height / 2, width - insetSize * 2);
        } else {
            ctx.lineWidth = Math.min(insetSize / 2, 4);
            ctx.beginPath();
            var radius = Math.min(width, height) / 3;
            ctx.arc(width / 2, height / 2, radius, 0, 2 * Math.PI);
            offset = (width - 2 * radius) / 2;
            ctx.moveTo(offset, height / 2);
            ctx.lineTo(width - offset, height / 2);
            var offset = (height - 2 * radius) / 2;
            ctx.moveTo(width / 2, offset);
            ctx.lineTo(width / 2, height - offset);
            ctx.stroke();
        }
        return canvas.toDataURL();
    }
    var greenMockImageColor = "#22B14C";
    var blueMockImageColor = "#3F48CC";
    var redMockImageColor = "#BB0F0F";
    var greenMockImage = getMockImage(200, 200, greenMockImageColor);
    var blueMockImage = getMockImage(200, 200, blueMockImageColor);
    var redMockImage = getMockImage(200, 200, redMockImageColor);
    var MockCortanaApp = (function() {
        function MockCortanaApp() {
            var _this = this;
            /* IProjectedCortanaAPI Begin */
            this.searchResultsView = new MockSearchResultsView();
            this.queryFormulationView = new MockQueryFormulationView();
            this.proactiveView = new MockProactiveView();
            this.launcher = new MockLauncher();
            this.searchBox = new MockSearchBox();
            this.bcsDataReader = new MockBcsDataReader();
            // Logged in the Client to identify App open -> App close "sessions"
            this.sessionId = "1AFB27CDE4224AD4976459A606CE461F";
            // Produced by the client & logged by the server to identify each Keystroke
            this.impressionId = "2471036FA03F426E84E235D65469B0D5";
            this.entryPoint = "WNSSTB";
            this.isCortanaEnabled = ClientTestHooks.getUrlValue("cortana") != "0";
            this.isBackButtonVisible = false;
            this.systemRAMInMB = ClientTestHooks.isTesthookParamSet("lowMemoryDevice") ? 512 : 1024;
            this.isOemEnabled = ClientTestHooks.isTesthookParamSet("oemEnabled");
            this.region = ClientTestHooks.getUrlValue("cc", "US");
            this.uiLanguage = ClientTestHooks.getUrlValue("setlang", "en-US");
            this.isBingEnabled = !ClientTestHooks.isTesthookParamSet("bingDisabled");
            this.isMobile = ClientTestHooks.isTesthookParamSet("mobile");
            /* IProjectedCortanaAPI End */
            /* IWebViewLifetime Begin */
            this.currentState = 0 /* AppHidden */ ;
            this.eventHandlers = {};
            var previousText = "";
            if (ClientTestHooks.isTesthookParamSet("searchbox")) {
                this.searchBox.addEventListener("focus", function() {
                    if (!previousText) {
                        var handlers = _this.eventHandlers["statechanged"];
                        if (handlers) {
                            handlers.forEach(function(handler) {
                                return handler({
                                    oldState: 0 /* AppHidden */ ,
                                    newState: 1 /* AppVisible */
                                });
                            });
                        }
                    }
                });
                this.searchBox.addEventListener("blur", function() {
                    if (!previousText) {
                        _this.queryFormulationView.perfMetrics.cvidResetPending = true;
                        var handlers = _this.eventHandlers["statechanged"];
                        if (handlers) {
                            handlers.forEach(function(handler) {
                                return handler({
                                    oldState: 1 /* AppVisible */ ,
                                    newState: 0 /* AppHidden */
                                });
                            });
                        }
                    }
                });
                // create same order of events as client: visible->textChanged("a")->textChanged("")->hidden
                this.searchBox.addEventListener("querytextchanged", function(searchBoxContent) {
                    if (!previousText && searchBoxContent.queryText) {
                        if (_this.queryFormulationView.perfMetrics.cvidResetPending) {
                            _this.queryFormulationView.perfMetrics.conversationId = createGuid();
                            _this.queryFormulationView.perfMetrics.cvidResetPending = false;
                        }
                        var handlers = _this.eventHandlers["statechanged"];
                        if (handlers) {
                            handlers.forEach(function(handler) {
                                return handler({
                                    oldState: 1 /* AppVisible */ ,
                                    newState: 2 /* WebViewVisible */
                                });
                            });
                        }
                    }
                });
                this.searchBox.addEventListener("afterquerytextchanged", function(searchBoxContent) {
                    if (previousText && !searchBoxContent.queryText) {
                        var handlers = _this.eventHandlers["statechanged"];
                        if (handlers) {
                            handlers.forEach(function(handler) {
                                return handler({
                                    oldState: 2 /* WebViewVisible */ ,
                                    newState: 1 /* AppVisible */
                                });
                            });
                        }
                    }
                    previousText = searchBoxContent.queryText;
                });
            } else {
                sj_be(_w, "load", function() {
                    var stateChanged = {
                        oldState: 1 /* AppVisible */ ,
                        newState: 2 /* WebViewVisible */
                    };
                    var handlers = MockCortanaAppInstance.eventHandlers["statechanged"];
                    if (handlers) {
                        handlers.forEach(function(handler) {
                            return handler(stateChanged);
                        });
                    }
                });
            }
            if (ClientTestHooks.isTesthookParamSet("clearDeviceHistory")) {
                (this.queryFormulationView.searchHistory.eventHandlers["cleardevicehistoryrequested"] || []).forEach(function(handler) {
                    return handler();
                });
            }
        }
        MockCortanaApp.prototype.logVerboseTrace = function(eventName, opCode, payloadName, payloadData, impressionId) {
            ClientTestHooks.ClientApiLogNoConsole("logVerboseTrace", eventName, opCode, payloadName, payloadData, impressionId);
        };
        MockCortanaApp.prototype.logTelemetry = function(eventName, opCode, payloadName, payloadData, impressionId) {
            ClientTestHooks.ClientApiLogNoConsole("logTelemetry", eventName, opCode, payloadName, payloadData, impressionId);
        };
        MockCortanaApp.prototype.logMeasure = function(eventName, opCode, payloadName, payloadData, impressionId) {
            this.logTelemetry(eventName, opCode, payloadName, payloadData, impressionId);
        };
        MockCortanaApp.prototype.setEmotion = function(emotion, useLargeSize, overrideSpeaking) {
            ClientTestHooks.ClientApiLog("setEmotion", emotion);
        };
        MockCortanaApp.prototype.setCortanaText = function(text) {
            ClientTestHooks.ClientApiLog("setCortanaText", text);
        };
        MockCortanaApp.prototype.setNonAnimatingCortanaText = function(text) {
            ClientTestHooks.ClientApiLog("setNonAnimatingCortanaText", text);
        };
        MockCortanaApp.prototype.fadeCortanaText = function(value) {
            ClientTestHooks.ClientApiLog("fadeCortanaText", value);
        };
        MockCortanaApp.prototype.useSmallHeader = function(value) {
            ClientTestHooks.ClientApiLog("useSmallHeader", value);
        };
        MockCortanaApp.prototype.setChromeState = function(chromeState) {
            ClientTestHooks.ClientApiLog("setChromeState", chromeState);
        };
        MockCortanaApp.prototype.respond = function(ssml, postSsmlAction, smallText, mediumText, largeText) {
            ClientTestHooks.ClientApiLog("respond", ssml, postSsmlAction, smallText, mediumText, largeText);
        };
        MockCortanaApp.prototype.speak = function(ssml) {
            ClientTestHooks.ClientApiLog("speak", ssml);
        };
        MockCortanaApp.prototype.stopSpeaking = function() {
            ClientTestHooks.ClientApiLog("stopSpeaking");
        };
        MockCortanaApp.prototype.notifyProfileUpdate = function() {
            ClientTestHooks.ClientApiLog("notifyProfileUpdate");
        };
        MockCortanaApp.prototype.dismissApp = function() {
            ClientTestHooks.ClientApiLog("dismissApp");
        };
        MockCortanaApp.prototype.showCamera = function() {
            ClientTestHooks.ClientApiLog("showCamera");
        };
        MockCortanaApp.prototype.sendAction = function(action) {
            ClientTestHooks.ClientApiLog("sendAction", action);
        };
        MockCortanaApp.prototype.processCommand = function(action) {
            ClientTestHooks.ClientApiLog("processCommand", action);
        };
        MockCortanaApp.prototype.processNLCommand = function(action, impressionId) {
            ClientTestHooks.ClientApiLog("processNLCommand", action);
        };
        MockCortanaApp.prototype.getNLMetadata = function(queryTaskFrame, impressionId) {
            ClientTestHooks.ClientApiLog("getNLMetadata", queryTaskFrame, impressionId);
            return _NYI_;
        };
        MockCortanaApp.prototype.launchExperienceByName = function(experienceName, parameters) {
            ClientTestHooks.ClientApiLog("launchExperienceByName", experienceName);
        };
        MockCortanaApp.prototype.repopulateAppCacheAsync = function() {
            ClientTestHooks.ClientApiLog("repopulateAppCacheAsync");
            var appCache = window.applicationCache;
            try {
                appCache.update();
                if (appCache.status == window.applicationCache.UPDATEREADY) {
                    appCache.swapCache();
                }
            } finally {
                return new Promise(null);
            }
        };
        MockCortanaApp.prototype.authenticateAsync = function(options, requestUri, callbackUri) {
            var result = "https://www.bing.com/agents/oauth?provider=mock";
            ClientTestHooks.ClientApiLogWithResult("authenticateAsync", result, options, requestUri, callbackUri);
            return new Promise(result);
        };
        MockCortanaApp.prototype.getQueryHeadersAsync = function() {
            ClientTestHooks.ClientApiLog("getQueryHeadersAsync");
            return new Promise({
                "X-Device-MachineId": "MOCK-1234-5678",
                "X-Device-Touch": "true",
                "X-Device-SKU": "0",
                "X-Device-OSSKU": "0",
                "X-Device-NetworkType": "0",
                "X-BM-RegionalSettings": "mo-CK",
                "X-Device-ClientSession": "MOCK",
                "X-BM-Theme": "ffffff;74b300",
                "X-BM-DeviceDimensionsLogical": this.isMobile ? "344x465" : "344x616",
                "X-BM-DeviceDimensions": this.isMobile ? "344x465" : "344x616"
            });
        };
        MockCortanaApp.prototype.getVcdKeywordsAsync = function() {
            ClientTestHooks.ClientApiLog("getVcdKeywordsAsync");
            var keywords = {};
            keywords["netflix"] = 2 /* Prefix */ ;
            return new Promise(keywords);
        };
        MockCortanaApp.prototype.getDefaultBrowserInfo = function() {
            return {
                progId: "FirefoxURL",
                path: "C:\Program Files\Mozilla Firefox\firefox.exe"
            };
        };
        MockCortanaApp.prototype.setDefaultUriLaunchPolicy = function(policy) {
            ClientTestHooks.ClientApiLog("setDefaultUriLaunchPolicy", policy);
            this.launcher.launchPolicy = policy;
        };
        MockCortanaApp.prototype.createObjectMap = function() {
            return {};
        };
        MockCortanaApp.prototype.createStringMap = function() {
            return {};
        };
        MockCortanaApp.prototype.createGuid = function() {
            return createGuid();
        };
        MockCortanaApp.prototype.getImageWithLiveTokenAsync = function(url) {
            var mockImages = ClientTestHooks.isTesthookParamSet("mockImages");
            if (mockImages) {
                if (url.lastIndexOf("data:", 0) !== 0) {
                    var width;
                    var height;
                    try {
                        width = parseInt(ThresholdUtilities.getUrlParameter(url, "w"));
                        height = parseInt(ThresholdUtilities.getUrlParameter(url, "h"));
                    } catch (e) {}
                    if (isNaN(width) || isNaN(height)) {
                        width = 200;
                        height = 200;
                    }
                    url = getMockImage(width, height, "green");
                }
            }
            return new Promise(url);
        };
        MockCortanaApp.prototype.addEventListener = function(eventName, handler) {
            ClientTestHooks.ClientApiLog("addEventListener", eventName);
            if (!this.eventHandlers[eventName]) {
                this.eventHandlers[eventName] = [];
            }
            this.eventHandlers[eventName].push(handler);
        };
        /* IWebViewLifetime End */
        /* IWebViewControl  Begin */
        MockCortanaApp.prototype.navigateWebViewAsync = function(uri) {
            ClientTestHooks.ClientApiLog("navigateWebViewAsync", uri);
            if (!_w["OnlyLogNavigation"]) {
                window.location.assign(uri);
            }
            return new Promise(null);
        };
        MockCortanaApp.prototype.navigateWebViewWithPostAsync = function(uri, parameters) {
            ClientTestHooks.ClientApiLog("navigateWebViewWithPostAsync", uri, parameters);
            window.location.assign(uri);
            return new Promise(null);
        };
        MockCortanaApp.prototype.navigateWebViewBackAsync = function(frameCount) {
            ClientTestHooks.ClientApiLog("navigateWebViewBackAsync", frameCount);
            window.history.back();
            return new Promise(null);
        };
        MockCortanaApp.prototype.showWebViewAsync = function() {
            ClientTestHooks.ClientApiLog("showWebViewAsync");
            return new Promise(null);
        };
        MockCortanaApp.prototype.reloadWebViewAsync = function() {
            ClientTestHooks.ClientApiLog("reloadWebViewAsync");
            location.reload();
            return new Promise(null);
        };
        /* WebViewControl  End */
        /* ICortanaFeedback Begin */
        MockCortanaApp.prototype.getFeedbackFilesAsync = function() {
            ClientTestHooks.ClientApiLog("getFeedbackFilesAsync");
            return new Promise(_NYI_);
        };
        MockCortanaApp.prototype.closeFeedbackPage = function() {
            ClientTestHooks.ClientApiLog("closeFeedbackPage");
        };
        return MockCortanaApp;
    })();
    var MockSearchResultsView = (function() {
        function MockSearchResultsView() {
            // taskFrame: string = "{\"Uri\":\"action://FindMyStuff/FindDocument\",\"TypeId\":\"b89d219d-7b61-48e7-8f3c-367e4a0e631b\",\"HandlerId\":\"fa234ba3-eca9-483c-8a60-c79401e3e9d3\",\"Status\":\"InProgress\",\"RawTextQuery\":{\"Uri\":\"entity://TextData\",\"TypeId\":\"ae77cbd2-cf71-438c-95b4-d3b86dc4a60e\",\"State\":\"Filled\",\"Source\":\"Unknown\",\"ClientUpdate\":false,\"Value\":\"photos from december\",\"ProfanityMasked\":\"photos from december\"},\"IsVoiceInput\":{\"Uri\":\"entity://BoolData\",\"TypeId\":\"174ba2cb-b6de-4255-b4b3-57f8ae3d5a40\",\"State\":\"Filled\",\"ClientUpdate\":false,\"flag\":false},\"Time\":{\"Uri\":\"entity://Timex3\",\"Version\":\"1.0\",\"TypeId\":\"30ab024c-4d37-4ac4-990e-09e2a6d8c44b\",\"type\":\"Date\",\"value\":\"2014-12\"},\"FileType\":{\"Uri\":\"entity://StringData\",\"TypeId\":\"93b60f74-15b0-4ccf-a7ed-296c82e5598c\",\"State\":\"Filled\",\"Source\":\"Unknown\",\"ClientUpdate\":false,\"Value\":\"Picture\"}}";
            this.taskFrame = "";
            this.deviceSearch = new MockDeviceSearch();
            this.perfMetrics = new MockPerfMetrics();
            this.impressionGuid = "GUID";
        }
        MockSearchResultsView.prototype.executeSearchAsync = function(query, taskFrame, impressionId, sortType) {
            var taskFrameString = (taskFrame) ? ", " + taskFrame : "";
            var impressionIdString = (impressionId) ? ", " + impressionId : "";
            if (sortType && sortType !== 0 /* SearchQuerySort_Default */ ) {
                ClientTestHooks.ClientApiLog("executeSearchAsync", query, taskFrameString, impressionIdString, sortType);
            } else {
                ClientTestHooks.ClientApiLog("executeSearchAsync", query, taskFrameString, impressionIdString);
            }
            if (this.throwOnExecuteSearch) {
                throw new Error("Mock Error");
            }
            var mockFolders = new MockMyStuffResultsFolders(sortType, this.indexedState);
            var returnPromise;
            if (this.executeSearchTimeout && this.executeSearchTimeout > 0) {
                returnPromise = Promise.defer(mockFolders, this.executeSearchTimeout).promise;
            } else {
                returnPromise = new Promise(mockFolders);
            }
            return returnPromise;
        };
        MockSearchResultsView.prototype.getTaskFrameAsync = function(rawQuery) {
            ClientTestHooks.ClientApiLog("getTaskFrameAsync", rawQuery);
            return new Promise(this.taskFrame);
        };
        MockSearchResultsView.prototype.setTaskFrame = function(searchQuery, taskFrame) {
            ClientTestHooks.ClientApiLog("setTaskFrame", searchQuery, taskFrame);
        };
        MockSearchResultsView.prototype.updateSearchBoxText = function(queryText) {
            ClientTestHooks.ClientApiLog("updateSearchBoxText", queryText);
        };
        return MockSearchResultsView;
    })();
    var MockQueryFormulationView = (function() {
        function MockQueryFormulationView() {
            this.deviceSearch = new MockDeviceSearch();
            this.searchHistory = new MockSearchHistory();
            this.perfMetrics = new MockPerfMetrics();
            this.previousExperience = "Proactive";
        }
        MockQueryFormulationView.prototype.getIconForDefaultBrowserAsync = function(requestedSize) {
            return _NYI_;
        };
        MockQueryFormulationView.prototype.startDeviceQueryAsync = function(query) {
            ClientTestHooks.ClientApiLog("startDeviceQueryAsync", query);
            return new Promise(new MockQueryFormulationResultsFolders(query));
        };
        MockQueryFormulationView.prototype.startDeviceQuery = function(query, impressionId) {
            ClientTestHooks.ClientApiLog("startDeviceQuery", query, impressionId);
            return new MockQueryFormulationResultsFolders(query);
        };
        MockQueryFormulationView.prototype.cancelLastDeviceQuery = function() {
            ClientTestHooks.ClientApiLog("cancelLastDeviceQuery");
        };
        MockQueryFormulationView.prototype.startCommandLineQuery = function(query, impressionId) {
            ClientTestHooks.ClientApiLog("startCommandLineQuery", query, impressionId);
            return new MockQueryFormulationResultsFolders(query).commandLine;
        };
        MockQueryFormulationView.prototype.cancelLastCommandLineQuery = function() {
            ClientTestHooks.ClientApiLog("cancelLastCommandLineQuery");
        };
        MockQueryFormulationView.prototype.startPathCompletionQuery = function(query, impressionId) {
            ClientTestHooks.ClientApiLog("startPathCompletionQuery", query, impressionId);
            return new MockQueryFormulationResultsFolders(query).pathCompletion;
        };
        MockQueryFormulationView.prototype.cancelLastPathCompletionQuery = function() {
            ClientTestHooks.ClientApiLog("cancelLastPathCompletionQuery");
        };
        MockQueryFormulationView.prototype.startSlotsQuery = function(query, impressionId, taskFrame) {
            ClientTestHooks.ClientApiLog("startSlotsQuery", query, impressionId, taskFrame);
            return _NYI_;
        };
        MockQueryFormulationView.prototype.cancelLastSlotsQuery = function() {
            ClientTestHooks.ClientApiLog("cancelLastSlotsQuery");
        };
        MockQueryFormulationView.prototype.resetConversationIdNextTimeQFIsShown = function() {
            ClientTestHooks.ClientApiLog("resetConversationIdNextTimeQFIsShown");
            this.perfMetrics.cvidResetPending = true;
        };
        MockQueryFormulationView.prototype.logProviderFailure = function(providerName, reason) {
            ClientTestHooks.ClientApiLog("logProviderFailure", providerName, reason);
        };
        return MockQueryFormulationView;
    })();
    var MockProactiveView = (function() {
        function MockProactiveView() {
            this.perfMetrics = new MockPerfMetrics();
            this.entryPoint = _NYI_;
        }
        MockProactiveView.prototype.invalidateCacheAsync = function() {
            var result = true;
            ClientTestHooks.ClientApiLogWithResult("invalidateCacheAsync", result);
            return new Promise(result);
        };
        return MockProactiveView;
    })();
    var MockSearchHistory = (function() {
        function MockSearchHistory() {
            this.isDeviceHistoryEnabled = ClientTestHooks.getUrlValue("deviceHistory") != "0";
            this.eventHandlers = {};
        }
        MockSearchHistory.prototype.addEventListener = function(eventName, handler) {
            if (!this.eventHandlers[eventName]) {
                this.eventHandlers[eventName] = [];
            }
            this.eventHandlers[eventName].push(handler);
        };
        MockSearchHistory.prototype.signalClearDeviceHistoryCompleted = function(clearingSucceeded) {
            ClientTestHooks.ClientApiLog("signalClearDeviceHistoryCompleted", clearingSucceeded);
        };
        return MockSearchHistory;
    })();
    var MockDeviceItemVerb = (function() {
        function MockDeviceItemVerb(verb, displayName) {
            this.verb = verb;
            this.displayName = displayName;
        }
        MockDeviceItemVerb.prototype.executeAsync = function() {
            ClientTestHooks.ClientApiLog(this.verb + ".executeAsync");
            return new Promise(null);
        };
        MockDeviceItemVerb.Separator = new MockDeviceItemVerb("", "");
        return MockDeviceItemVerb;
    })();
    var MockJumpListCategory = (function() {
        function MockJumpListCategory(name, type, items) {
            this.name = name;
            this.type = type;
            this.items = items;
        }
        return MockJumpListCategory;
    })();
    var MockJumpListItem = (function() {
        function MockJumpListItem(displayName, usagePoints, lastAccessed, path, description) {
            this.displayName = displayName;
            this.usagePoints = usagePoints;
            this.lastAccessed = lastAccessed;
            this.path = path;
            this.description = description;
        }
        MockJumpListItem.prototype.getImageAsync = function(requestedSize) {
            ClientTestHooks.ClientApiLog("getImageAsync", requestedSize);
            return new Promise(redMockImage);
        };
        MockJumpListItem.prototype.getDescriptionAsync = function() {
            return new Promise(this.description);
        };
        MockJumpListItem.prototype.launchAsync = function() {
            ClientTestHooks.ClientApiLog(this.displayName + ".launchAsync");
            return new Promise(null);
        };
        MockJumpListItem.prototype.getVerbsAsync = function() {
            return new Promise(MockVerbsArray);
        };
        return MockJumpListItem;
    })();
    var MockDeviceItem = (function() {
        function MockDeviceItem(id, displayName, kind, properties, propertyHits) {
            this.id = id;
            this.displayName = displayName;
            this.kind = kind;
            this.properties = properties || {};
            this.propertyHits = propertyHits || [];
        }
        MockDeviceItem.prototype.getProperty = function(propertyName, enableHitHighlighting) {
            var property = this.properties[propertyName];
            if (typeof(property) == "undefined") {
                if (propertyName == "System.Search.QueryPropertyHits") {
                    return "QueryPropertyHits";
                }
                throw new Error("Property '" + propertyName + "' is unavailable.");
            }
            // GetProperty normally returns elements without hit highlighting.
            // We strip hit highlights to simulate that.
            if (!enableHitHighlighting && property && typeof property === "string") {
                property = HitHighlightingParser.RemoveHitHighlighting(property);
            }
            return property;
        };
        MockDeviceItem.prototype.getMarkedProperty = function(propertyName) {
            return this.getProperty(propertyName, true);
        };
        MockDeviceItem.prototype.equals = function(deviceItem) {
            return this.id === deviceItem.id;
        };
        return MockDeviceItem;
    })();
    var MockDeviceItemWithFileMetadata = (function(_super) {
        __extends(MockDeviceItemWithFileMetadata, _super);

        function MockDeviceItemWithFileMetadata(id, displayName, image, kind, extension, itemTypeDisplayName, properties, propertyHits, imageTimeout) {
            _super.call(this, id, displayName, kind, properties, propertyHits);
            this.canHaveContextMenu = true;
            this.image = image;
            this.imageTimeout = imageTimeout;
            this.extension = extension;
            this.itemTypeDisplayName = itemTypeDisplayName;
        }
        MockDeviceItemWithFileMetadata.prototype.getImageAsync = function(requestedSize) {
            ClientTestHooks.ClientApiLog("getImageAsync", requestedSize);
            if (this.imageTimeout && this.imageTimeout > 0) {
                return Promise.defer(this.image, this.imageTimeout).promise;
            } else {
                return new Promise(this.image);
            }
        };
        MockDeviceItemWithFileMetadata.prototype.getVerbsAsync = function() {
            return new Promise(MockVerbsArray);
        };
        return MockDeviceItemWithFileMetadata;
    })(MockDeviceItem);
    var MockFileItem = (function(_super) {
        __extends(MockFileItem, _super);

        function MockFileItem(id, displayName, image, kind, extension, itemTypeDisplayName, createdDate, lastModifiedDate, properties, propertyHits, imageTimeout) {
            _super.call(this, id, displayName, image, kind, extension, itemTypeDisplayName, properties, propertyHits, imageTimeout);
            this.createdDate = createdDate ? new Date(createdDate) : new Date();
            this.lastModifiedDate = lastModifiedDate ? new Date(lastModifiedDate) : new Date();
        }
        return MockFileItem;
    })(MockDeviceItemWithFileMetadata);
    var MockAppItem = (function(_super) {
        __extends(MockAppItem, _super);

        function MockAppItem(id, displayName, image, kind, extension, itemTypeDisplayName, createdDate, lastModifiedDate, version, isImmersive, logoBackgroundColor, totalLaunches, lastAccessed, filePath, launchArguments, isTrustedApp, properties, propertyHits, imageTimeout) {
            _super.call(this, id || "", displayName, image, kind, extension, itemTypeDisplayName, createdDate, lastModifiedDate, properties, propertyHits, imageTimeout);
            this.jumpList = MockJumpListCategoriesArray;
            this.version = version;
            this.isImmersive = isImmersive;
            this.logoBackgroundColor = logoBackgroundColor;
            this.totalLaunches = totalLaunches;
            this.lastAccessed = lastAccessed ? new Date(lastAccessed) : new Date();
            this.filePath = filePath;
            this.launchArguments = launchArguments;
            this.isTrustedApp = isTrustedApp;
            this.packageFamilyName = this.id.substr(0, this.id.indexOf("!"));
        }
        return MockAppItem;
    })(MockFileItem);;
    var MockEmailItem = (function(_super) {
        __extends(MockEmailItem, _super);

        function MockEmailItem(id, displayName, senderName, fromName, isRead, hasAttachments, properties) {
            _super.call(this, id, displayName, "email", properties);
            this.attachmentNames = ["Presentation.pptx", "Image.png"];
            this.dateReceived = new Date(2014, 12, 20);
            this.isRead = true;
            this.senderAddress = "bing@microsoft.com";
            this.senderName = "Bing Bing Bing";
            this.provider = 0 /* Microsoft */ ;
            this.senderName = senderName;
            this.fromName = fromName;
            this.isRead = isRead;
            this.hasAttachments = hasAttachments;
        }
        return MockEmailItem;
    })(MockDeviceItem);
    var MockReactiveAgentsItem = (function(_super) {
        __extends(MockReactiveAgentsItem, _super);

        function MockReactiveAgentsItem(id, displayName, kind, appId, taskFrame) {
            _super.call(this, id, displayName, kind, null);
            this.appId = appId;
            this.taskFrame = taskFrame;
        }
        return MockReactiveAgentsItem;
    })(MockDeviceItem);
    var MockCommandLineItem = (function(_super) {
        __extends(MockCommandLineItem, _super);

        function MockCommandLineItem(id, displayName, image, kind, extension, itemTypeDisplayName, encodedPath, launchArguments) {
            _super.call(this, id, displayName, image, kind, extension, itemTypeDisplayName, null);
            this.encodedPath = encodedPath;
            this.launchArguments = launchArguments;
        }
        return MockCommandLineItem;
    })(MockDeviceItemWithFileMetadata);
    var MockPowerBiItem = (function(_super) {
        __extends(MockPowerBiItem, _super);

        function MockPowerBiItem(id, displayName, kind, modelName, rankScore) {
            if (rankScore === void 0) {
                rankScore = 300;
            }
            _super.call(this, id, displayName, kind, null);
            this.modelDisplayName = modelName;
            this.rankScore = rankScore;
        }
        return MockPowerBiItem;
    })(MockDeviceItem);
    var MockDeviceSearch = (function() {
        function MockDeviceSearch() {}
        MockDeviceSearch.prototype.getItemFromDeviceItemList = function(id, collection) {
            for (var itemNumber in collection) {
                var appItem = collection[itemNumber];
                if (appItem && appItem.id === id) {
                    return appItem;
                }
            }
            return null;
        };
        MockDeviceSearch.prototype.getItemsFromCollection = function(ids, collection) {
            var map = {};
            for (var id in ids) {
                var key = ids[id];
                var item = this.getItemFromDeviceItemList(key, collection);
                if (item) {
                    map[key] = item;
                }
            }
            return map;
        };
        MockDeviceSearch.prototype.findAppsAsync = function(appIds, impressionId) {
            ClientTestHooks.ClientApiLog("findAppsAsync", appIds, impressionId);
            return new Promise(this.findApps(appIds));
        };
        MockDeviceSearch.prototype.findApps = function(appIds) {
            return this.getItemsFromCollection(appIds, MockAppItemsArray[0 /* Microsoft */ ]);
        };
        MockDeviceSearch.prototype.findSettingsAsync = function(settingIds, impressionId) {
            ClientTestHooks.ClientApiLog("findSettingsAsync", settingIds, impressionId);
            return new Promise(this.findSettings(settingIds));
        };
        MockDeviceSearch.prototype.findSettings = function(settingIds) {
            return this.getItemsFromCollection(settingIds, MockSettingItemsArray[0 /* Microsoft */ ]);
        };
        MockDeviceSearch.prototype.findFilesAsync = function(fileIds, impressionId) {
            ClientTestHooks.ClientApiLog("findFilesAsync", fileIds, impressionId);
            return new Promise(this.findFiles(fileIds));
        };
        MockDeviceSearch.prototype.findFiles = function(fileIds) {
            return this.getItemsFromCollection(fileIds, MockPictureItemsArray[0 /* Microsoft */ ].concat(MockVideoItemsArray[0 /* Microsoft */ ]).concat(MockMusicItemsArray[0 /* Microsoft */ ]).concat(MockDocumentItemsArray[0 /* Microsoft */ ]).concat(MockFolderItemsArray[0 /* Microsoft */ ]));
        };
        MockDeviceSearch.prototype.findFileItemsForOneDriveAsync = function(oneDriveRelativePaths, impressionId) {
            ClientTestHooks.ClientApiLog("findFileItemsForOneDriveAsync", oneDriveRelativePaths, impressionId);
            return new Promise({});
        };
        MockDeviceSearch.prototype.getIconForTypeAsync = function(extension, requestedSize, impressionId) {
            ClientTestHooks.ClientApiLog("getIconForTypeAsync", extension, requestedSize, impressionId);
            return new Promise(null);
        };
        MockDeviceSearch.prototype.getIconForDefaultBrowserAsync = function(requestedSize, policy) {
            ClientTestHooks.ClientApiLog("getIconForDefaultBrowserAsync", requestedSize, policy);
            return new Promise(DefaultBrowserIcon);
        };
        MockDeviceSearch.prototype.getSearchServiceStatusAsync = function() {
            ClientTestHooks.ClientApiLog("getSearchServiceStatusAsync");
            var serviceStatusRaw = parseInt(ClientTestHooks.getUrlValue("windowsServiceStatus"));
            var serviceStatus = isNaN(serviceStatusRaw) ? 3 /* Running */ : serviceStatusRaw;
            return new Promise(serviceStatus);
        };
        return MockDeviceSearch;
    })();
    var MockPerfMetrics = (function() {
        function MockPerfMetrics() {
            this.cvidResetPending = false;
            this.fallbackDate = new Date(-933981677285477);
            this.conversationId = createGuid();
        }
        MockPerfMetrics.prototype.lookup = function(perfMetricKey) {
            var offset = 0;
            switch (perfMetricKey) {
                case 0 /* Default */ :
                    offset = 5000;
                    break;
                case 1 /* CortanaAppStarted */ :
                    offset = 10000;
                    break;
                case 2 /* QueryInvoke */ :
                    offset = 5000;
                    break;
                case 3 /* DeviceQueryStarted */ :
                    offset = 5000;
                    break;
                case 4 /* AppsQueryFinished */ :
                    offset = 2000;
                    break;
                case 5 /* FileQueryFinished */ :
                    offset = 2000;
                    break;
                case 7 /* PicturesAndVideoQueryFinished */ :
                    offset = 2000;
                    break;
                case 8 /* SettingsQueryFinished */ :
                    offset = 2000;
                    break;
                case 9 /* LocalHistoryQueryFinished */ :
                    offset = 2000;
                    break;
                case 10 /* QueryFormulationShown */ :
                    offset = 5000;
                    break;
                case 11 /* QueryFormulationInit */ :
                    offset = 10000;
                    break;
                case 12 /* QueryFormulationCacheLoadStart */ :
                    offset = 10000;
                    break;
                case 13 /* QueryFormulationCacheLoadStop */ :
                    offset = 5000;
                    break;
                case 14 /* SrvLaunchFromQF */ :
                    offset = 15000;
                    break;
                case 25 /* ProactiveQueryStarted */ :
                    offset = 5000;
                    break;
                case 32 /* QueryFormulationFallback */ :
                    return this.fallbackDate;
            }
            var returnDate = new Date();
            returnDate.setTime(returnDate.getTime() - offset);
            return returnDate;
        };
        return MockPerfMetrics;
    })();
    var MockMyStuffResultsFolders = (function() {
        function MockMyStuffResultsFolders(sortTypeArg, indexedState) {
            this.sortType = sortTypeArg;
            this.apps = new MockDeviceQueryResults("", MockAppItemsArray, "apps", 1 /* MockBaseProviderMap */ , this.sortType, indexedState);
            this.settings = new MockDeviceQueryResults("", MockSettingItemsArray, "settings", 1 /* MockBaseProviderMap */ , this.sortType, indexedState);
            this.music = new MockDeviceQueryResults("", MockMusicItemsArray, "music", 0 /* MockDualProviderMap */ , this.sortType, indexedState);
            this.pictures = new MockDeviceQueryResults("", MockPictureItemsArray, "pictures", 0 /* MockDualProviderMap */ , this.sortType, indexedState);
            this.video = new MockDeviceQueryResults("", MockVideoItemsArray, "video", 0 /* MockDualProviderMap */ , this.sortType, indexedState);
            this.files = new MockDeviceQueryResults("", MockDocumentItemsArray, "files", 0 /* MockDualProviderMap */ , this.sortType, indexedState);
            this.windowsDeviceSearchEmails = new MockDeviceQueryResults("", MockEmailItemsArray, "windowsDeviceSearchEmails", 0 /* MockDualProviderMap */ , this.sortType, indexedState);
            this.folders = new MockDeviceQueryResults("", MockFolderItemsArray, "folders", 0 /* MockDualProviderMap */ , this.sortType, indexedState);
        }
        return MockMyStuffResultsFolders;
    })();
    var MockQueryFormulationResultsFolders = (function() {
        function MockQueryFormulationResultsFolders(query) {
            this.apps = new MockDeviceQueryResults(query, MockAppItemsArray, "apps");
            this.settings = new MockDeviceQueryResults(query, MockSettingItemsArray, "settings");
            this.media = new MockDeviceQueryResults(query, MockMediaItemsArray, "media");
            this.files = new MockDeviceQueryResults(query, MockFileItemsArray, "files");
            this.windowsDeviceSearchEmails = new MockDeviceQueryResults(query, MockEmailItemsArray, "windowsDeviceSearchEmails");
            this.reactiveAgents = new MockDeviceQueryResults(query, MockReactiveAgentsItemsArray, "reactiveAgents");
            this.pathCompletion = new MockDeviceQueryResults(query, MockPathCompletionItemsArray, "pathCompletion");
            this.commandLine = new MockDeviceQueryResults(query, MockCommandLineItemsArray, "commanding");
            this.powerBi = new MockDeviceQueryResults(query, MockPowerBiItemsArray, "powerBi");
        }
        return MockQueryFormulationResultsFolders;
    })();
    var MockMicrosoftService = (function() {
        function MockMicrosoftService() {
            this.id = "Microsoft";
            this.displayName = "";
            this.account = "";
            this.provider = 0 /* Microsoft */ ;
        }
        return MockMicrosoftService;
    })();
    var MockOemService = (function() {
        function MockOemService() {
            this.id = "OEM";
            this.displayName = "";
            this.account = "";
            this.provider = 1 /* OEM */ ;
        }
        return MockOemService;
    })();
    var MockProviderMap = (function() {
        function MockProviderMap() {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i - 0] = arguments[_i];
            }
            this.size = args.length;
            this.serviceList = args;
        }
        MockProviderMap.prototype.first = function() {
            return new MockIterable(this.serviceList);
        };
        return MockProviderMap;
    })();
    var MockIterable = (function() {
        function MockIterable(serviceList) {
            this.hasCurrent = false;
            this.currentIndex = 0;
            this.serviceList = serviceList;
            this.hasCurrent = this.serviceList.length > this.currentIndex;
            if (this.hasCurrent) {
                this.current = this.getCurrentKeyValuePair();
            }
        }
        MockIterable.prototype.moveNext = function() {
            var returnValue = false;
            this.currentIndex++;
            if (this.currentIndex < this.serviceList.length) {
                this.current = this.getCurrentKeyValuePair();
            } else {
                this.hasCurrent = false;
            }
            return returnValue;
        };
        MockIterable.prototype.getCurrentKeyValuePair = function() {
            var currentItem = this.serviceList[this.currentIndex];
            var key = currentItem[0].provider;
            return new MockKeyValuePair(key, currentItem);
        };
        return MockIterable;
    })();
    var MockKeyValuePair = (function() {
        function MockKeyValuePair(key, value) {
            this.key = key;
            this.value = value;
        }
        return MockKeyValuePair;
    })();
    var ProviderMapEnum;
    (function(ProviderMapEnum) {
        ProviderMapEnum[ProviderMapEnum["MockDualProviderMap"] = 0] = "MockDualProviderMap";
        ProviderMapEnum[ProviderMapEnum["MockBaseProviderMap"] = 1] = "MockBaseProviderMap";
    })(ProviderMapEnum || (ProviderMapEnum = {}));
    var MockIndexerSearchResult = (function() {
        function MockIndexerSearchResult(state, resultSet) {
            this.state = 0 /* Unknown */ ;
            this.state = state;
            this.resultSet = resultSet;
        }
        return MockIndexerSearchResult;
    })();
    var ignoreQueryForMockResults = false;
    var MockDeviceQueryResults = (function() {
        function MockDeviceQueryResults(query, deviceItems, folder, providerMap, sortType, indexedState) {
            if (providerMap === void 0) {
                providerMap = 1 /* MockBaseProviderMap */ ;
            }
            this.query = query.toLowerCase();
            this.deviceItems = deviceItems;
            this.folder = folder;
            this.providerMap = providerMap;
            this.sortType = sortType;
            if (!indexedState) {
                var indexedStateRaw = parseInt(ClientTestHooks.getUrlValue("windowsIndexState"));
                indexedState = isNaN(indexedStateRaw) ? 3 /* FullyIndexed */ : indexedStateRaw;
            }
            this.indexedState = indexedState;
            this.getItemsAsyncDelay = parseInt(ClientTestHooks.getUrlValue("localProvidersDelay", "0"));
        }
        MockDeviceQueryResults.prototype.getItemsAsync = function(startIndex, maxNumberOfItems, provider, serviceIDs) {
            var _this = this;
            var deviceItems;
            var endIndex = startIndex + maxNumberOfItems;
            if (!provider) {
                provider = 0 /* Microsoft */ ;
            }
            var deviceItems = (this.deviceItems[provider] || []);
            if (this.query) {
                deviceItems = deviceItems.filter(function(x) {
                    return ignoreQueryForMockResults || x.displayName.toLowerCase().indexOf(_this.query) == 0;
                });
            }
            if (_w["DCPageConfig"] && !_w["DCPageConfig"].CountOfItemsForGetProperties && provider === 0 /* Microsoft */ && this.deviceItems != MockSettingItemsArray) {
                // For the Microsoft provider our feature code has to pass in an endIndex even though the parameter is supposed to be a count of items (except for settings, which correctly takes a count of items).
                // Since internally our mock uses an endIndex we need to accomodate Provider.Microsoft as a corner-case for now.
                endIndex = maxNumberOfItems;
            }
            if (startIndex <= deviceItems.length) {
                deviceItems = deviceItems.slice(startIndex, Math.min(deviceItems.length, endIndex));
            }
            if (this.sortType === 3) {
                deviceItems.sort(function(a, b) {
                    return SortAlgos.MostRecentToOldest(a, b);
                });
            }
            var searchResult = new MockIndexerSearchResult(this.indexedState, deviceItems);
            ClientTestHooks.ClientApiLogWithResult(this.folder + ".getItemsAsync", searchResult, startIndex, endIndex, provider, serviceIDs);
            if (this.getItemsAsyncDelay && this.getItemsAsyncDelay > 0) {
                return Promise.defer(searchResult, this.getItemsAsyncDelay).promise;
            }
            return new Promise(searchResult);
        };
        MockDeviceQueryResults.prototype.getItemCountAsync = function(provider, serviceIDs) {
            var deviceItems;
            if (provider) {
                deviceItems = this.deviceItems[provider];
            } else {
                deviceItems = this.deviceItems[0 /* Microsoft */ ];
            }
            var count = deviceItems ? deviceItems.length : 0;
            ClientTestHooks.ClientApiLogWithResult(this.folder + ".getItemCountAsync", count);
            return new Promise(count);
        };
        MockDeviceQueryResults.prototype.tryGetResultAsync = function() {
            return this.getItemsAsync(0, 1).then(function(x) {
                return x.resultSet[0];
            });
        };
        MockDeviceQueryResults.prototype.getProviders = function() {
            var providers = new MockProviderMap();
            if (this.providerMap === 1 /* MockBaseProviderMap */ ) {
                providers = new MockProviderMap([new MockMicrosoftService()]);
            } else if (this.providerMap === 0 /* MockDualProviderMap */ ) {
                providers = new MockProviderMap([new MockMicrosoftService()], [new MockOemService()]);
            }
            ClientTestHooks.ClientApiLogWithResult("getProviders", providers);
            return providers;
        };
        MockDeviceQueryResults.prototype.telemetryEvent = function(provider, eventName, eventData) {
            ClientTestHooks.ClientApiLog("telemetryEvent", provider, eventName, eventData);
        };
        return MockDeviceQueryResults;
    })();
    var SortAlgos = (function() {
        function SortAlgos() {}
        SortAlgos.MostRecentToOldest = function(a, b) {
            var returnValue = 0;
            var aProp = null;
            var bProp = null;
            try {
                aProp = a.getProperty("System.DateModified");
            } catch (ex) {}
            try {
                var bProp = b.getProperty("System.DateModified");
            } catch (ex) {}
            if (aProp && !bProp) {
                returnValue = -1;
            } else if (!aProp && bProp) {
                returnValue = 1;
            } else if (!aProp && !bProp) {
                returnValue = 0;
            } else if (aProp && bProp) {
                var aDate = new Date(aProp);
                var bDate = new Date(bProp);
                if (aDate.getTime() < bDate.getTime()) {
                    returnValue = 1;
                } else if (aDate.getTime() > bDate.getTime()) {
                    returnValue = -1;
                } else {
                    returnValue = 0;
                }
            }
            return returnValue;
        };
        return SortAlgos;
    })();

    function guid4HexDigits() {
        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
    }

    function createGuid() {
        return "{" + guid4HexDigits() + guid4HexDigits() + "-" + guid4HexDigits() + "-" + guid4HexDigits() + "-" + guid4HexDigits() + "-" + guid4HexDigits() + guid4HexDigits() + guid4HexDigits() + "}";
    }
    var MockLauncher = (function() {
        function MockLauncher() {}
        MockLauncher.prototype.createLaunchOptions = function() {
            return new MockLaunchOptions();
        };
        MockLauncher.prototype.createAppLaunchOptions = function() {
            return new MockAppLaunchOptions();
        };
        MockLauncher.prototype.launchSearchItemAsync = function(searchItem, options) {
            ClientTestHooks.ClientApiLog("launchSearchItemAsync", searchItem, options);
            return new Promise(null);
        };
        MockLauncher.prototype.addEventListener = function(eventName, handler) {};
        MockLauncher.prototype.createUriLaunchOptions = function() {
            return new MockUriLaunchOptions(this.launchPolicy);
        };
        MockLauncher.prototype.launchUriAsync = function(uri, options) {
            var result = true;
            ClientTestHooks.ClientApiLogWithResult("launchUriAsync", result, uri, options);
            return new Promise(result);
        };
        MockLauncher.prototype.createSearchLaunchOptions = function() {
            return new MockSearchLaunchOptions();
        };
        MockLauncher.prototype.launchSearchAsync = function(options) {
            ClientTestHooks.ClientApiLog("launchSearchAsync", options);
        };
        MockLauncher.prototype.startLaunchFolder = function(path) {
            ClientTestHooks.ClientApiLog("startLaunchFolder", path);
        };
        MockLauncher.prototype.launchCat1Async = function(rawQuery, taskFrame, instrumentationParameters) {
            ClientTestHooks.ClientApiLog("launchCat1Async", rawQuery, taskFrame, instrumentationParameters);
        };
        MockLauncher.prototype.launchCat2Async = function(rawQuery, formCode, taskFrame, instrumentationParameters) {
            ClientTestHooks.ClientApiLog("launchCat2Async", rawQuery, formCode, taskFrame, instrumentationParameters);
        };
        MockLauncher.prototype.launchRAFAsync = function(rawQuery, formCode, instrumentationParameters) {
            ClientTestHooks.ClientApiLog("launchRAFAsync", rawQuery, formCode, instrumentationParameters);
        };
        MockLauncher.prototype.navigateReactiveViewAsync = function(rawQuery, formCode) {
            ClientTestHooks.ClientApiLog("navigateReactiveViewAsync", rawQuery, formCode);
        };
        MockLauncher.prototype.launchMyStuffAsync = function(rawQuery, pivot, intentWeights, formCode, instrumentationParameters) {
            ClientTestHooks.ClientApiLog("launchMyStuffAsync", rawQuery, pivot, intentWeights, formCode, instrumentationParameters);
        };
        MockLauncher.prototype.launchMyStuffTaskFrameAsync = function(rawQuery, formCode, taskFrame, instrumentationParameters) {
            ClientTestHooks.ClientApiLog("launchMyStuffTaskFrameAsync", rawQuery, formCode, taskFrame, instrumentationParameters);
        };
        MockLauncher.prototype.launchSearchInApp = function(destApp, rawQuery, provider) {
            ClientTestHooks.ClientApiLog("launchSearchInApp", destApp, rawQuery, provider);
        };
        MockLauncher.prototype.preLaunchBrowser = function(uri) {
            ClientTestHooks.ClientApiLog("preLaunchBrowser", uri);
        };
        MockLauncher.prototype.launchUriWithSchemeCheckAsync = function(uri, packageFamilyName) {
            var returnValue = true;
            ClientTestHooks.ClientApiLogWithResult("launchUriWithSchemeCheckAsync", returnValue, uri, packageFamilyName);
            return new Promise(returnValue);
        };
        MockLauncher.prototype.startPhoneCallAsync = function(phoneNumber, displayName) {
            ClientTestHooks.ClientApiLog("startPhoneCallAsync", phoneNumber, displayName);
            return new Promise(null);
        };
        return MockLauncher;
    })();
    var MockLaunchOptions = (function() {
        function MockLaunchOptions() {
            this.desiredRemainingView = 0 /* Default */ ;
        }
        return MockLaunchOptions;
    })();
    var MockAppLaunchOptions = (function(_super) {
        __extends(MockAppLaunchOptions, _super);

        function MockAppLaunchOptions() {
            _super.apply(this, arguments);
        }
        return MockAppLaunchOptions;
    })(MockLaunchOptions);
    var MockUriLaunchOptions = (function(_super) {
        __extends(MockUriLaunchOptions, _super);

        function MockUriLaunchOptions(launchPolicy) {
            _super.call(this);
            this.newTab = false;
            this.launchPolicy = launchPolicy;
        }
        return MockUriLaunchOptions;
    })(MockLaunchOptions);
    var MockSearchLaunchOptions = (function(_super) {
        __extends(MockSearchLaunchOptions, _super);

        function MockSearchLaunchOptions() {
            _super.apply(this, arguments);
            this.mode = 0 /* MyStuff */ ;
            this.isVoiceInput = false;
            this.isCAT2Request = false;
        }
        return MockSearchLaunchOptions;
    })(MockLaunchOptions);
    var NavigationKeyCodes = [
        38 /* ArrowUp */ ,
        40 /* ArrowDown */ ,
        9 /* Tab */ ,
    ];
    var ModifierKeyCodes = [
        3 /* Break */ ,
        16 /* Shift */ ,
        17 /* Control */ ,
        18 /* Alt */ ,
        19 /* Pause */ ,
        20 /* CapsLock */ ,
        45 /* Insert */ ,
        91 /* WinL */ ,
        92 /* WinR */ ,
        93 /* Menu */ ,
        144 /* NumLock */ ,
        145 /* ScrollLock */ ,
    ];

    function isNavigationKey(keyCode) {
        return NavigationKeyCodes.indexOf(keyCode) != -1;
    }

    function isModifierKey(keyCode) {
        return ModifierKeyCodes.indexOf(keyCode) != -1;
    }

    function isContextMenuKey(keyCode, shiftKeyPressed) {
        return keyCode == 93 /* Menu */ || keyCode == 121 /* F10 */ && shiftKeyPressed;
    }
    var MockSearchBox = (function() {
        function MockSearchBox() {
            this.isMock = true;
            this.eventHandlers = {};
        }
        MockSearchBox.prototype.getSearchBox = function() {
            if (!this.searchBox) {
                this.searchBox = _ge("sb_form_q");
                this.init(this.searchBox);
            }
            return this.searchBox;
        };
        MockSearchBox.prototype.init = function(sb) {
            var _this = this;
            if (sb) {
                sb.addEventListener("focus", function() {
                    var handlers = _this.eventHandlers["focus"];
                    if (handlers) {
                        handlers.forEach(function(handler) {
                            return handler();
                        });
                    }
                });
                sb.addEventListener("blur", function() {
                    var handlers = _this.eventHandlers["blur"];
                    if (handlers) {
                        handlers.forEach(function(handler) {
                            return handler();
                        });
                    }
                });
                var previousText = sb.value;
                var previousCaret = sb.selectionEnd;
                sb.addEventListener("keyup", function(evt) {
                    // we don't fire queryChanged if a modifier key (shift, ctrl...) is pressed, or if the user is navigating (up and down) around the suggestions
                    // we keep firing for left/right arrow keys because the autocomplete selection may have been accepted with that
                    if (!isModifierKey(evt.keyCode) && !isNavigationKey(evt.keyCode) && evt.keyCode != 13 /* Enter */ && !isContextMenuKey(evt.keyCode, evt.shiftKey) && (sb.value != previousText || sb.selectionEnd != previousCaret)) {
                        var searchBoxChangedHandlers = _this.eventHandlers["querytextchanged"];
                        if (searchBoxChangedHandlers) {
                            searchBoxChangedHandlers.forEach(function(handler) {
                                return handler({
                                    queryText: sb.value,
                                    cursorPosition: sb.selectionEnd
                                });
                            });
                        }
                        searchBoxChangedHandlers = _this.eventHandlers["afterquerytextchanged"];
                        if (searchBoxChangedHandlers) {
                            searchBoxChangedHandlers.forEach(function(handler) {
                                return handler({
                                    queryText: sb.value,
                                    cursorPosition: sb.selectionEnd
                                });
                            });
                        }
                        previousText = sb.value;
                        previousCaret = sb.selectionEnd;
                    }
                });
                sb.addEventListener("keydown", function(evt) {
                    if (evt.keyCode == 9 /* Tab */ ) {
                        sj_pd(evt);
                    }
                });
            }
        };
        MockSearchBox.prototype.setQueryText = function(query) {
            this.getSearchBox().value = query;
        };
        MockSearchBox.prototype.getQueryText = function() {
            return {
                queryText: this.getSearchBox().value,
                cursorPosition: this.getSearchBox().selectionEnd,
                impressionId: null
            };
        };
        MockSearchBox.prototype.setAutoCompleteQueryText = function(query, impressionId) {
            var sb = this.getSearchBox();
            if (query.toLowerCase().indexOf(sb.value.toLowerCase()) != 0) {
                // there is already a different partial query (this auto-complete text is obsolete)
                return;
            }
            var selectionStart = sb.value.length;
            sb.value = sb.value + query.substr(sb.value.length);
            sb.selectionStart = selectionStart;
            sb.selectionEnd = sb.value.length;
        };
        MockSearchBox.prototype.addEventListener = function(eventName, handler) {
            if (!this.eventHandlers[eventName]) {
                this.eventHandlers[eventName] = [];
            }
            this.eventHandlers[eventName].push(handler);
        };
        MockSearchBox.prototype.simulateKeys = function() {
            var keycodes = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                keycodes[_i - 0] = arguments[_i];
            }
            if (keycodes) {
                var keyDownHandlers = this.eventHandlers["keydown"];
                var keyUpHandlers = this.eventHandlers["keyup"];
                keycodes.forEach(function(keycode) {
                    if (keyDownHandlers) {
                        keyDownHandlers.forEach(function(handler) {
                            return handler({
                                keyCode: keycode,
                                isShiftKeyPressed: false,
                                isControlKeyPressed: false
                            });
                        });
                    }
                    if (keyUpHandlers) {
                        keyUpHandlers.forEach(function(handler) {
                            return handler({
                                keyCode: keycode,
                                isShiftKeyPressed: false,
                                isControlKeyPressed: false
                            });
                        });
                    }
                });
            }
        };
        return MockSearchBox;
    })();
    var MockBcsDataReader = (function() {
        function MockBcsDataReader() {
            this.position = 0;
            this.currentString = "";
            this.data = "";
            this.lastUrl = "";
            this.mockData = "\
    [\"10\", 4, 4]\n\
    {\"1\": [\"AAA_SettingsPageTimeRegionLanguage\", \"2\"] }\n\
    {\"2\": [\"AAA_SettingsPageTimeRegionSpelling\", \"2\"] }\n\
    {\"3\": [\"Classic_{EDB046FF-3554-4BD0-B152-DE4DF7071CA8}\", \"1\"] }\n\
    {\"4\": [\"{D65231B0-B2F1-4857-A4CE-A8E7C6EA7D27}\\\\calc.exe\", \"1\"] }\n\
    {\"micos\": {\"TSK\": [1], \"SUP\": [2], \"FTR\": [0.7232472324723247, 0.03622945320362295, 0.030526668903052667, 0.20563569272056356, 0.0003354579000335458, 0.0003354579000335458, 0.0036900369003690036, 0.0, 1.0627253590049182e-05] } }\n\
    {\"not\": {\"TSK\": [1,2,4], \"SUP\": [4], \"FTR\": [0.28885298869143783, 0.002584814216478191, 0.1037156704361874, 0.46138933764135703, 0.0012924071082390954, 0.0, 0.1421647819063005, 0.0, 1.1033663153707555e-05] } }\n\
    {\"note\": {\"TSK\": [4], \"SUP\": [1], \"FTR\": [0.3955965909090909, 0.02130681818181818, 0.16619318181818182, 0.3821022727272727, 0.013494318181818182, 0.0, 0.02130681818181818, 0.0, 5.019514610798138e-06] } }\n\
    {\"zune\": {\"TSK\": [4], \"SUP\": [1], \"FTR\": [0.3955965909090909, 0.02130681818181818, 0.16619318181818182, 0.3821022727272727, 0.013494318181818182, 0.0, 0.02130681818181818, 0.0, 5.019514610798138e-06] } }\n";
        }
        MockBcsDataReader.prototype.tryOpenFileAsync = function(url) {
            var _this = this;
            this.position = 0;
            if (url == "http://BuiltInBcs") {
                this.lastUrl = url;
                this.data = this.mockData;
                return new Promise(true);
            } else {
                if (this.lastUrl == url) {
                    return new Promise(this.data.length > 0);
                } else {
                    this.data = "";
                    this.lastUrl = url;
                    var request = sj_gx();
                    request.open("GET", url, true);
                    request.onreadystatechange = function() {
                        if (request.readyState == 4 && request.status == 200 && _this.lastUrl == url) {
                            _this.data = request.responseText;
                        }
                    };
                    request.send();
                    return new Promise(false);
                }
            }
        };
        MockBcsDataReader.prototype.loadAsync = function(count) {
            this.currentString = this.data.slice(this.position, this.position + count);
            this.position = this.position + this.currentString.length;
            return new Promise(this.currentString.length);
        };
        MockBcsDataReader.prototype.readString = function(codeUnitCount) {
            return this.currentString;
        };
        MockBcsDataReader.prototype.readStringAsync = function(numBytes) {
            this.currentString = this.data.slice(this.position, this.position + numBytes);
            this.position = this.position + this.currentString.length;
            return new Promise(this.currentString);
        };
        MockBcsDataReader.prototype.close = function() {
            this.position = 0;
            this.currentString = "";
        };
        MockBcsDataReader.prototype.cleanupFilesAsync = function() {
            return new Promise(null);
        };
        return MockBcsDataReader;
    })();

    function empty() {
        var map = {};
        map[0 /* Microsoft */ ] = [];
        map[1 /* OEM */ ] = [];
        return map;
    }
    var MockAppItemsArray = empty();
    var MockSettingItemsArray = empty();
    var MockMediaItemsArray = empty();
    var MockPictureItemsArray = empty();
    var MockVideoItemsArray = empty();
    var MockMusicItemsArray = empty();
    var MockDocumentItemsArray = empty();
    var MockFileItemsArray = empty();
    var MockFolderItemsArray = empty();
    var MockEmailItemsArray = empty();
    var MockReactiveAgentsItemsArray = empty();
    var MockPathCompletionItemsArray = empty();
    var MockCommandLineItemsArray = empty();
    var MockPowerBiItemsArray = empty();
    var MockJumpListCategoriesArray = [];
    var MockVerbsArray = [];
    var MockCortanaAppInstance = new MockCortanaApp();; // ------------------------------------------------------------------------------
    // <copyright file="SearchApp.Mock.ts" company="Microsoft Corporation">
    //     Copyright (c) Microsoft Corporation. All Rights Reserved.
    //     Information Contained Herein is Proprietary and Confidential.
    // </copyright>
    // ------------------------------------------------------------------------------
    /// <reference path="..\..\..\..\Cortana\src\Content\Script\Declarations\CortanaSearch.Mock.d.ts" />
    /// <reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Threshold.Utilities.d.ts"/>
    // These functions are here to ease the merge between QF and MyStuff mocks, which had different sets of parameters
    function createNewMockAppItem(id, version, displayName, properties, imageTimeout, image) {
        if (imageTimeout === void 0) {
            imageTimeout = 0;
        }
        return new MockAppItem(id, displayName, image, null, null, null, null, null, version, true, "red", 0, "2015/05/08", null, null, false, properties, null, imageTimeout);
    }

    function createNewMockSettingItem(id, displayName, properties, imageTimeout, image) {
        return new MockFileItem(id, displayName, image, null, null, null, null, null, properties, null, imageTimeout);
    }

    function createNewMockFileItem(id, displayName, image, properties, kind, propertyHits, imageTimeout) {
        return new MockFileItem(id, displayName, image, kind, null, "OOXML Text Document", null, null, properties, propertyHits, imageTimeout);
    }

    function createNewMockEmailItem(id, displayName) {
        return new MockEmailItem(id, displayName, null, null);
    }
    MockVerbsArray = [
        new MockDeviceItemVerb("RunAsAdministrator", "Run As Administrator")
    ];
    var mockAppImage = getMockImage(32, 32, greenMockImageColor);
    MockAppItemsArray[0 /* Microsoft */ ] = [
        createNewMockAppItem("Microsoft.BingFinance_8wekyb3d8bbwe!AppexFinance", "3.0.2.234", "Bing Finance", {
            "System.ItemNameDisplay": "Bing Finance"
        }, 0, mockAppImage),
        createNewMockAppItem("WikimediaFoundation.Wikipedia_54ggd3ev8bvz6!App", "1.0.45", "Wikipedia", {
            "System.ItemNameDisplay": "Wikipedia"
        }, 0, getMockImage(16, 16, greenMockImageColor)),
        createNewMockAppItem("Microsoft.BingNews_8wekyb3d8bbwe!AppexNews", "3.0.1", "Bing News", {
            "System.ItemNameDisplay": "Bing News"
        }, 0, getMockImage(48, 48, greenMockImageColor)),
        createNewMockAppItem("Microsoft.ZuneMusic_8wekyb3d8bbwe!Microsoft.ZuneMusic", "2.1.119.0", "Xbox Music", {
            "System.ItemNameDisplay": "Xbox Music"
        }, 0, getMockImage(32, 16, greenMockImageColor)),
        createNewMockAppItem("Microsoft.WhatsApp_8wekyb3d8bbwe!AppexNews", "3.0.1", "WhatsApp", {
            "System.ItemNameDisplay": "WhatsApp"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.Instagram_8wekyb3d8bbwe!AppexNews", "3.0.1", "Instagram", {
            "System.ItemNameDisplay": "Instagram"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.Facebook_8wekyb3d8bbwe!AppexNews", "3.0.1", "Facebook", {
            "System.ItemNameDisplay": "Facebook"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.Skype_8wekyb3d8bbwe!AppexNews", "3.0.1", "Skype", {
            "System.ItemNameDisplay": "Skype"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.Lync_8wekyb3d8bbwe!AppexNews", "3.0.1", "Lync", {
            "System.ItemNameDisplay": "Lync"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.PvZ_8wekyb3d8bbwe!AppexNews", "3.0.1", "Plants vs Zombies", {
            "System.ItemNameDisplay": "Plants vs Zombies"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.BvD_8wekyb3d8bbwe!AppexNews", "3.0.1", "Bushes vs Orcs", {
            "System.ItemNameDisplay": "Bushes vs Orcs"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.AngryBirds_8wekyb3d8bbwe!AppexNews", "3.0.1", "Angry Birds", {
            "System.ItemNameDisplay": "Angry Birds"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.HappyBirds_8wekyb3d8bbwe!AppexNews", "3.0.1", "Happy Birds", {
            "System.ItemNameDisplay": "Happy Birds"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.ApatheticBirds_8wekyb3d8bbwe!AppexNews", "3.0.1", "Apathetic Birds", {
            "System.ItemNameDisplay": "Apathetic Birds"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.BewilderedBirds_8wekyb3d8bbwe!AppexNews", "3.0.1", "Bewildered Birds", {
            "System.ItemNameDisplay": "Bewildered Birds"
        }, 0, mockAppImage),
        createNewMockAppItem("Microsoft.FlabbergastedBirds_8wekyb3d8bbwe!AppexNews", "3.0.1", "Flabbergasted Birds", {
            "System.ItemNameDisplay": "Flabbergasted Birds"
        }, 0, mockAppImage)
    ];
    var mockSettingsImage = getMockImage(32, 32, "rgba(255,255,255,0)", "S");
    MockSettingItemsArray[0 /* Microsoft */ ] = [
        createNewMockSettingItem("windows.immersivecontrolpanel_cw5n1h2txyewy!microsoft.windows.immersivecontrolpanel", "PC Settings", {
            "System.ItemNameDisplay": "PC Settings"
        }, 0, mockSettingsImage),
        createNewMockSettingItem("windows.immersivecontrolpanel_cw5n1h2txyewy!microsoft.windows.immersivecontrolpanel1", "Typing Settings", {
            "System.ItemNameDisplay": "Typing Settings"
        }, 0, mockSettingsImage),
        createNewMockSettingItem("windows.immersivecontrolpanel_cw5n1h2txyewy!microsoft.windows.immersivecontrolpane2l", "Region and Language Settings", {
            "System.ItemNameDisplay": "Region and Language Settings"
        }, 0, mockSettingsImage)
    ];
    var mockImages = [{
        'title': 'Maui',
        'size': 92359,
        'width': 610,
        'height': 458,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(610, 458, redMockImageColor)
    }, {
        'title': 'Florida',
        'size': 57650,
        'width': 880,
        'height': 586,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(880, 586, blueMockImageColor)
    }, {
        'title': 'Seattle',
        'size': 63690,
        'width': 341,
        'height': 227,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(341, 227, redMockImageColor)
    }, {
        'title': 'Denver',
        'size': 39079,
        'width': 300,
        'height': 225,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'JPG',
        'url': getMockImage(300, 225, blueMockImageColor)
    }, {
        'title': 'Nice place',
        'size': 20834,
        'width': 159,
        'height': 239,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(159, 239, redMockImageColor)
    }, {
        'title': 'St. Maarten Islands',
        'size': 84267,
        'width': 342,
        'height': 257,
        'time': '2007-08-29T09:30:28.000',
        'ext': 'jpg',
        'url': getMockImage(342, 257, blueMockImageColor)
    }, {
        'title': 'World Most Beautiful Places in China',
        'size': 100110,
        'width': 500,
        'height': 375,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 375, blueMockImageColor)
    }, {
        'title': 'Norway Beautiful Places',
        'size': 8760,
        'width': 149,
        'height': 89,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(149, 89, redMockImageColor)
    }, {
        'title': 'Place Rossetti Nice France',
        'size': 37066,
        'width': 298,
        'height': 450,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(298, 450, blueMockImageColor)
    }, {
        'title': 'Trolltunga ODDA Norway',
        'size': 61315,
        'width': 437,
        'height': 239,
        'time': '2003-07-20T04:11:10.000',
        'ext': 'jpg',
        'url': getMockImage(437, 239, redMockImageColor)
    }, {
        'title': 'very tall image',
        'size': 63079,
        'width': 69,
        'height': 280,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(69, 280, blueMockImageColor)
    }, {
        'title': 'small image',
        'size': 99521,
        'width': 40,
        'height': 80,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(40, 80, redMockImageColor)
    }, {
        'title': 'damaged image',
        'size': 27435,
        'width': null,
        'height': null,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(16, 16, greenMockImageColor)
    }, {
        'title': 'ie icon',
        'size': 5861,
        'width': 93,
        'height': 101,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'gif',
        'url': getMockImage(93, 101, redMockImageColor)
    }, {
        'title': 'Haiti Nice Places',
        'size': 51287,
        'width': 280,
        'height': 196,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(280, 196, blueMockImageColor)
    }, {
        'title': 'all of its good places are a good place to sightsee this is why it is ...',
        'size': 71649,
        'width': 250,
        'height': 166,
        'time': '2008-01-12T02:12:00.000',
        'ext': 'jpg',
        'url': getMockImage(250, 166, redMockImageColor)
    }, {
        'title': 'Description Nice tramway place Garibaldi.jpg',
        'size': 87340,
        'width': 302,
        'height': 178,
        'time': '2010-08-10T02:48:09.000',
        'ext': 'jpg',
        'url': getMockImage(302, 178, blueMockImageColor)
    }, {
        'title': 'nice place',
        'size': 50828,
        'width': 550,
        'height': 412,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(550, 412, redMockImageColor)
    }, {
        'title': 'NICE PLACE',
        'size': 71298,
        'width': 800,
        'height': 600,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(800, 600, blueMockImageColor)
    }, {
        'title': 'Beautiful Nature Landscape',
        'size': 78769,
        'width': 612,
        'height': 408,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpe',
        'url': getMockImage(612, 408, redMockImageColor)
    }, {
        'title': 'Description Nice place by river morava.JPG',
        'size': 11654,
        'width': 229,
        'height': 119,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'JPG',
        'url': getMockImage(229, 119, blueMockImageColor)
    }, {
        'title': 'NICE PLACES WALLPAPERS',
        'size': 48960,
        'width': 302,
        'height': 285,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(302, 285, redMockImageColor)
    }, {
        'title': 'Nice France at Night',
        'size': 75261,
        'width': 265,
        'height': 176,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(265, 176, blueMockImageColor)
    }, {
        'title': 'Nice places | Cascais | Portugal',
        'size': 101249,
        'width': 800,
        'height': 532,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(800, 532, redMockImageColor)
    }, {
        'title': 'Camp Bay Cape Town South Africa In',
        'size': 23454,
        'width': 330,
        'height': 213,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(330, 213, blueMockImageColor)
    }, {
        'title': 'Alabama',
        'size': 23454,
        'width': 400,
        'height': 300,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(400, 300, blueMockImageColor)
    }, {
        'title': 'Alaska',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, blueMockImageColor)
    }, {
        'title': 'Arizona',
        'size': 23454,
        'width': 500,
        'height': 300,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 300, redMockImageColor)
    }, {
        'title': 'Arkansas',
        'size': 23454,
        'width': 200,
        'height': 100,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(200, 100, blueMockImageColor)
    }, {
        'title': 'California',
        'size': 23454,
        'width': 400,
        'height': 200,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(400, 200, greenMockImageColor)
    }, {
        'title': 'Colorado',
        'size': 23454,
        'width': 400,
        'height': 300,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(400, 300, redMockImageColor)
    }, {
        'title': 'Connecticut',
        'size': 23454,
        'width': 424,
        'height': 242,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(424, 242, blueMockImageColor)
    }, {
        'title': 'Delaware',
        'size': 23454,
        'width': 535,
        'height': 353,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(535, 353, blueMockImageColor)
    }, {
        'title': 'Georgia',
        'size': 23454,
        'width': 123,
        'height': 111,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(123, 111, redMockImageColor)
    }, {
        'title': 'Idaho',
        'size': 23454,
        'width': 432,
        'height': 543,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(432, 543, blueMockImageColor)
    }, {
        'title': 'Illinois',
        'size': 23454,
        'width': 600,
        'height': 500,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(600, 500, blueMockImageColor)
    }, {
        'title': 'Indiana',
        'size': 23454,
        'width': 400,
        'height': 500,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(400, 500, redMockImageColor)
    }, {
        'title': 'Iowa',
        'size': 23454,
        'width': 432,
        'height': 543,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(432, 543, blueMockImageColor)
    }, {
        'title': 'Iowa',
        'size': 23454,
        'width': 543,
        'height': 432,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(543, 432, greenMockImageColor)
    }, {
        'title': 'Kansas',
        'size': 23454,
        'width': 321,
        'height': 432,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(321, 432, blueMockImageColor)
    }, {
        'title': 'Kentucky',
        'size': 23454,
        'width': 234,
        'height': 123,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(234, 123, blueMockImageColor)
    }, {
        'title': 'Louisiana',
        'size': 23454,
        'width': 666,
        'height': 555,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(666, 555, blueMockImageColor)
    }, {
        'title': 'Maine',
        'size': 23454,
        'width': 444,
        'height': 555,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(444, 555, redMockImageColor)
    }, {
        'title': 'Maryland',
        'size': 23454,
        'width': 444,
        'height': 333,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(444, 333, blueMockImageColor)
    }, {
        'title': 'Massachusetts',
        'size': 23454,
        'width': 444,
        'height': 333,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(444, 333, blueMockImageColor)
    }, {
        'title': 'Michigan',
        'size': 23454,
        'width': 222,
        'height': 333,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(222, 333, redMockImageColor)
    }, {
        'title': 'Minnesota',
        'size': 23454,
        'width': 323,
        'height': 434,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(323, 434, blueMockImageColor)
    }, {
        'title': 'Mississippi',
        'size': 23454,
        'width': 666,
        'height': 555,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(666, 555, blueMockImageColor)
    }, {
        'title': 'Missouri',
        'size': 23454,
        'width': 555,
        'height': 444,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(555, 444, redMockImageColor)
    }, {
        'title': 'Montana',
        'size': 23454,
        'width': 700,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(700, 400, blueMockImageColor)
    }, {
        'title': 'Nebraska',
        'size': 23454,
        'width': 444,
        'height': 333,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(444, 333, blueMockImageColor)
    }, {
        'title': 'Nevada',
        'size': 23454,
        'width': 333,
        'height': 222,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(333, 222, blueMockImageColor)
    }, {
        'title': 'New Hampshire',
        'size': 23454,
        'width': 455,
        'height': 344,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(455, 344, blueMockImageColor)
    }, {
        'title': 'New Jersey',
        'size': 23454,
        'width': 40,
        'height': 30,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(40, 30, blueMockImageColor)
    }, {
        'title': 'New Mexico',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, blueMockImageColor)
    }, {
        'title': 'New Mexico',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, redMockImageColor)
    }, {
        'title': 'New York',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, greenMockImageColor)
    }, {
        'title': 'North Carolina',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, blueMockImageColor)
    }, {
        'title': 'North Dakota',
        'size': 23454,
        'width': 600,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(600, 400, blueMockImageColor)
    }, {
        'title': 'Ohio',
        'size': 23454,
        'width': 600,
        'height': 200,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(600, 200, blueMockImageColor)
    }, {
        'title': 'Oklahoma',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, blueMockImageColor)
    }, {
        'title': 'Oregon',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, blueMockImageColor)
    }, {
        'title': 'Pennsylvania',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, blueMockImageColor)
    }, {
        'title': 'Rhode Island',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, blueMockImageColor)
    }, {
        'title': 'South Carolina',
        'size': 23454,
        'width': 500,
        'height': 400,
        'time': '2011-04-24T11:16:18.999Z',
        'ext': 'jpg',
        'url': getMockImage(500, 400, blueMockImageColor)
    }];
    MockPictureItemsArray[0 /* Microsoft */ ] = [];
    mockImages.forEach(function(v, i) {
        return MockPictureItemsArray[0 /* Microsoft */ ].push(createNewMockFileItem('mock' + i, v.title, v.url, {
            "System.ItemNameDisplay": v.title,
            "System.Image.VerticalSize": v.height,
            "System.Image.HorizontalSize": v.width,
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Pictures\\album2",
            "System.DateModified": new Date(v.time),
            "System.FileExtension": "." + v.ext,
            "System.Size": v.size
        }, "picture"));
    });
    var mockOemImages = mockImages.reverse();
    mockOemImages.forEach(function(x) {
        x.title = "OEM " + x.title;
    });
    mockOemImages.forEach(function(v, i) {
        return MockPictureItemsArray[1 /* OEM */ ].push(createNewMockFileItem('mock' + i, v.title, v.url, {
            "System.ItemNameDisplay": v.title,
            "System.Image.VerticalSize": v.height,
            "System.Image.HorizontalSize": v.width,
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Pictures\\album2",
            "System.DateModified": new Date(v.time),
            "System.FileExtension": "." + v.ext,
            "System.Size": v.size
        }, "picture"));
    });
    var startMarker = String.fromCharCode(57344);
    var endMarker = String.fromCharCode(57345);
    MockVideoItemsArray[0 /* Microsoft */ ] = [
        createNewMockFileItem("01_A_Man_Without_Honor", "01 A Man Without Honor", redMockImage, {
            "System.ItemNameDisplay": "01 A Man Without" + startMarker + " Honor" + endMarker,
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Videos\\TV\\Game of Thrones\\Season 02\\",
            "System.Media.Duration": "32037440000",
            "System.FileExtension": "MP4",
            "System.DateCreated": new Date("2014-11-19T21:31:01.000Z"),
            "System.DateModified": new Date("2014-12-20T21:31:01.000Z"),
            "System.Size": 30000,
            "System.Image.Dimensions": "300x1000"
        }, "TvShow", ["System.ItemType"]),
        createNewMockFileItem("prettyVideo", "Pretty Video Pretty Video Pretty Video Pretty Video Pretty Video Pretty Video Pretty Video", blueMockImage, {
            "System.ItemNameDisplay": "Pretty Video Pretty Video Pretty Video Pretty Video Pretty Video Pretty Video Pretty Video",
            "System.ItemFolderPathDisplay": startMarker + "C:\\Users\\foobar\\Videos\\TV\\Game of Thrones\\Season 02\\" + endMarker,
            "System.Media.Duration": "15:07",
            "System.FileExtension": "mov",
            "System.DateCreated": new Date("2014-11-19T21:31:01.000Z"),
            "System.DateModified": new Date("2014-12-20T21:31:01.000Z"),
            "System.Size": 1234567890
        }, "TvShow"),
        createNewMockFileItem("01_Fun_Run", "Fun Run", redMockImage, {
            "System.ItemNameDisplay": "Fun Run",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Videos\\TV\\The Office\\Season 01\\",
            "System.Media.Duration": startMarker + "2:01:17" + endMarker,
            "System.FileExtension": "wmp",
            "System.DateCreated": new Date("2014-11-19T21:31:01.000Z"),
            "System.DateModified": new Date("2014-12-20T21:31:01.000Z"),
            "System.Size": 100
        }, "TvShow"),
        createNewMockFileItem("02_Fun_Run", "Fun Run", redMockImage, {
            "System.ItemNameDisplay": "Fun Run",
            "System.ItemFolderPathDisplay": "C:\\Users\\" + startMarker + "foobar" + endMarker + "\\Videos\\TV\\The Office\\Season 02\\",
            "System.Media.Duration": "2:01:17",
            "System.FileExtension": "wmp",
            "System.DateCreated": new Date("2014-11-19T21:31:01.000Z"),
            "System.DateModified": new Date("2014-12-20T21:31:01.000Z"),
            "System.Size": 100
        }, "TvShow"),
        createNewMockFileItem("03_Fun_Run", "Fun Run", redMockImage, {
            "System.ItemNameDisplay": startMarker + "Fun Run" + endMarker,
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Videos\\TV\\The Office\\Season 03\\",
            "System.Media.Duration": "2:01:17",
            "System.FileExtension": "wmp",
            "System.DateCreated": new Date("2014-11-19T21:31:01.000Z"),
            "System.DateModified": new Date("2014-12-20T21:31:01.000Z"),
            "System.Size": 100
        }, "TvShow"),
    ];
    MockVideoItemsArray[1 /* OEM */ ] = [
        createNewMockFileItem("OEM Video 1", "OEM terse description.", redMockImage, {
            "System.ItemNameDisplay": "OEM terse description.",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Videos\\TV\\" + startMarker + "Game of Thrones" + endMarker + "\\Season 02\\",
            "System.Media.Duration": "32037440000",
            "System.FileExtension": "MP4",
            "System.DateCreated": new Date("2014-11-19T21:31:01.000Z"),
            "System.Size": 30000,
            "System.Image.Dimensions": "300x1000"
        }, "TvShow", ["System.ItemType"]),
        createNewMockFileItem("OEM Video 2", "OEM long caption with exceptional verbosity, appropriate loquacity, and requisite pompousness.", blueMockImage, {
            "System.ItemNameDisplay": "OEM long caption with exceptional" + startMarker + " verbosity" + endMarker + ", appropriate loquacity, and requisite pompousness.",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Videos\\TV\\Game of Thrones\\Season 02\\",
            "System.Media.Duration": "15:07",
            "System.FileExtension": "mov",
            "System.DateCreated": new Date("2014-11-19T21:31:01.000Z"),
            "System.Size": 1234567890
        }, "TvShow"),
    ];
    var mockWordIcon = getMockImage(32, 32, blueMockImageColor, "W");
    var mockExcelIcon = getMockImage(32, 32, greenMockImageColor, "X");
    MockDocumentItemsArray[0 /* Microsoft */ ] = [
        createNewMockFileItem("someId1", "Awesome banana bread recipe", mockWordIcon, {
            "System.ItemNameDisplay": "Awesome" + startMarker + " banana bread " + endMarker + "recipe",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 15360,
            "System.Author": "Paula Dean"
        }, "doc", ["System.Author"]),
        createNewMockFileItem("someId2", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies" + startMarker + ".docx" + endMarker,
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Pictures\\Desktop",
            "System.DateModified": "1/2/2014 10:22PM",
            "System.Size": 57671680,
            "System.Title": "Butter cookies"
        }, "doc", ["System.Title", "System.DateModified"]),
        createNewMockFileItem("someId3", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition facts",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents\\NEstedFolder\\Long Path\\Truncated",
            "System.Search.QueryFocusedSummary": "... your query was found here in the document ...",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.DateCreated": "2/2/2014 5:00PM",
            "System.Size": 123456789
        }, "doc", ["System.Search.QueryFocusedSummary", "System.ItemPathDisplay", "System.DateCreated"]),
        createNewMockFileItem("someId4", "Fat witch White brownie recipe", mockWordIcon, {
            "System.ItemNameDisplay": "<div class=\"foo\">'\"Fat witch White brownie recipe</div>",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents\\NEstedFolder\\Long Path\\Truncated",
            "System.Title": "<div class=\"bar\">'\"Fat witch White brownie recipe</div>"
        }, "doc", ["System.Title", "System.DateModified"]),
        createNewMockFileItem("someId5", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": startMarker + "Butter" + endMarker + " cookies"
        }),
        createNewMockFileItem("someId6", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition facts"
        }),
        createNewMockFileItem("someId7", "Fat witch White brownie recipe", mockWordIcon),
        createNewMockFileItem("someId8", startMarker + "Butter cookies" + endMarker, mockWordIcon),
        createNewMockFileItem("someId9", "Butter cookies nutrition facts", mockExcelIcon),
        createNewMockFileItem("someId1", "Awesome banana bread recipe 2", mockWordIcon, {
            "System.ItemNameDisplay": "Awesome banana bread recipe 2",
            "System.ItemFolderPathDisplay": startMarker + "C:\\Users" + endMarker + "\\foobar\\Documents",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 15360,
            "System.Author": "Paula Dean"
        }, "doc", ["System.Author"]),
        createNewMockFileItem("someId2", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Pictures\\Desktop",
            "System.DateModified": "1/2/2014 10:22PM",
            "System.Size": 57671680
        }),
        createNewMockFileItem("someId3", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition facts",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents\\NEstedFolder\\Long Path\\Truncated",
            "System.Search.QueryFocusedSummary": "... your query was found here in the document ...",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 123456789
        }, "doc", ["System.Search.QueryFocusedSummary", "System.ItemPathDisplay"]),
        createNewMockFileItem("someId4", "Fat witch White brownie recipe", mockWordIcon, {
            "System.ItemNameDisplay": "Fat witch White brownie recipe"
        }),
        createNewMockFileItem("someId5", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies"
        }),
        createNewMockFileItem("someId6", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies " + startMarker + "nutrition facts" + endMarker
        }),
        createNewMockFileItem("someId7", "Fat witch White brownie recipe", mockWordIcon),
        createNewMockFileItem("someId8", "Butter cookies", mockWordIcon),
        createNewMockFileItem("someId9", "Butter cookies nutrition facts", mockExcelIcon),
        createNewMockFileItem("someId1", "Awesome banana bread recipe 3", mockWordIcon, {
            "System.ItemNameDisplay": "Awesome banana bread recipe 3",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 15360,
            "System.Author": "Paula Dean"
        }, "doc", ["System.Author"]),
        createNewMockFileItem("someId2", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Pictures\\Desktop",
            "System.DateModified": "1/2/2014 10:22PM",
            "System.Size": 57671680
        }),
        createNewMockFileItem("someId3", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition facts",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents\\NEstedFolder\\Long Path\\Truncated",
            "System.Search.QueryFocusedSummary": "... your query was found here in the document ...",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 123456789
        }, "doc", ["System.Search.QueryFocusedSummary", "System.ItemPathDisplay"]),
        createNewMockFileItem("someId4", "Fat witch White brownie recipe", mockWordIcon, {
            "System.ItemNameDisplay": "Fat witch White brownie recipe"
        }),
        createNewMockFileItem("someId5", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies"
        }),
        createNewMockFileItem("someId6", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition facts"
        }),
        createNewMockFileItem("someId7", "Fat witch White brownie recipe", mockWordIcon),
        createNewMockFileItem("someId8", "Butter cookies", mockWordIcon),
        createNewMockFileItem("someId9", "Butter cookies nutrition facts", mockExcelIcon),
        createNewMockFileItem("someId1", "Awesome banana bread " + startMarker + "recipe" + endMarker + " 4", mockWordIcon, {
            "System.ItemNameDisplay": "Awesome banana bread recipe 4",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 15360,
            "System.Author": "Paula Dean"
        }, "doc", ["System.Author"]),
        createNewMockFileItem("someId2", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Pictures\\Desktop",
            "System.DateModified": "1/2/2014 10:22PM",
            "System.Size": 57671680
        }),
        createNewMockFileItem("someId3", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition facts",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents\\NEstedFolder\\Long Path\\Truncated",
            "System.Search.QueryFocusedSummary": "... your query was found here in the document ...",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 123456789
        }, "doc", ["System.Search.QueryFocusedSummary", "System.ItemPathDisplay"]),
        createNewMockFileItem("someId4", "Fat witch White brownie recipe", mockWordIcon, {
            "System.ItemNameDisplay": "Fat witch White brownie recipe"
        }),
        createNewMockFileItem("someId5", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies"
        }),
        createNewMockFileItem("someId6", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition facts"
        }),
        createNewMockFileItem("someId7", "Fat witch White brownie recipe", mockWordIcon),
        createNewMockFileItem("someId8", "Butter cookies", mockWordIcon),
        createNewMockFileItem("someId9", "Butter cookies nutrition facts", mockExcelIcon),
        createNewMockFileItem("someId1", "Awesome banana bread recipe 5", mockWordIcon, {
            "System.ItemNameDisplay": "Awesome banana bread recipe 5",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 15360,
            "System.Author": "Paula Dean"
        }, "doc", ["System.Author"]),
        createNewMockFileItem("someId2", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Pictures\\" + startMarker + "Desktop" + endMarker,
            "System.DateModified": "1/2/2014 10:22PM",
            "System.Size": 57671680
        }),
        createNewMockFileItem("someId3", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition facts",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents\\NEstedFolder\\Long Path\\Truncated",
            "System.Search.QueryFocusedSummary": "... your query was found here in the document ...",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 123456789
        }, "doc", ["System.Search.QueryFocusedSummary", "System.ItemPathDisplay"]),
        createNewMockFileItem("someId4", "Fat witch White brownie recipe", mockWordIcon, {
            "System.ItemNameDisplay": "Fat witch White brownie recipe"
        }),
        createNewMockFileItem("someId5", "Butter cookies", mockWordIcon, {
            "System.ItemNameDisplay": "Butter cookies"
        }),
        createNewMockFileItem("someId6", "Butter cookies nutrition facts", mockExcelIcon, {
            "System.ItemNameDisplay": "Butter cookies nutrition" + startMarker + " facts" + endMarker
        }),
        createNewMockFileItem("someId7", "Fat witch White brownie recipe", mockWordIcon),
        createNewMockFileItem("someId8", "Butter cookies", mockWordIcon),
        createNewMockFileItem("someId9", "Butter cookies nutrition facts", mockExcelIcon),
        createNewMockFileItem("someId10", "Fat witch White brownie recipe", mockWordIcon)
    ];
    MockDocumentItemsArray[1 /* OEM */ ] = [
        createNewMockFileItem("someId20", "OEM Item One", mockWordIcon, {
            "System.ItemNameDisplay": "OEM " + startMarker + "Item One" + endMarker,
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents",
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 15360
        }),
        createNewMockFileItem("someId21", "OEM Item Two", mockWordIcon, {
            "System.ItemNameDisplay": "OEM Item Two",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\" + startMarker + "Documents" + endMarker,
            "System.DateModified": "2/2/2014 5:00PM",
            "System.Size": 15360
        })
    ];
    MockFolderItemsArray[0 /* Microsoft */ ] = [
        createNewMockFileItem("someId1", "Awesome folder", mockWordIcon, {
            "System.ItemNameDisplay": startMarker + "Awesome folder" + endMarker,
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\" + startMarker + "Awesome folder" + endMarker,
            "System.DateModified": "2/2/2014 5:00PM"
        }, "doc"),
        createNewMockFileItem("someId2", "Impressive folder", mockWordIcon, {
            "System.ItemNameDisplay": startMarker + "Impressive" + endMarker + " folder",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Pictures\\" + startMarker + "Impressive" + endMarker + " folder",
            "System.DateModified": "1/2/2014 10:22PM"
        }, "doc"),
        createNewMockFileItem("someId3", "OK folder", mockExcelIcon, {
            "System.ItemNameDisplay": "OK folder",
            "System.ItemFolderPathDisplay": "C:\\Users\\foobar\\Documents\\NEstedFolder\\Long Path\\OK folder",
            "System.DateModified": "2/2/2014 5:00PM"
        }, "doc"),
    ];
    MockMusicItemsArray[0 /* Microsoft */ ] = [
        createNewMockFileItem("someId11", "\t\tAguas de Marco", getMockImage(96, 96, redMockImageColor, "Music"), {
            "System.ItemNameDisplay": startMarker + "Aguas" + endMarker + " de Marco"
        }),
        createNewMockFileItem("someId12", "Como�nossos\r\n pais", getMockImage(96, 96, blueMockImageColor, "Music"), {
            "System.Title": startMarker + "Como nossos pais" + endMarker,
            "System.ItemNameDisplay": "Como nossos pais.mp3",
            "System.Music.AlbumTitle": "Elia Ao Vivo",
            "System.Music.Artist": "Elis Regina",
            "System.Music.Genre": "MPB"
        })
    ];
    MockMusicItemsArray[1 /* OEM */ ] = [
        createNewMockFileItem("someId21", startMarker + "OEM" + endMarker + " Song�1", getMockImage(96, 96, blueMockImageColor, "Music"), {
            "System.ItemNameDisplay": startMarker + "OEM" + endMarker + " Song 1"
        }),
        createNewMockFileItem("someId22", "OEM Song\r\n 2", getMockImage(96, 96, redMockImageColor, "Music"), {
            "System.ItemNameDisplay": "OEM Song 2",
            "System.Music.AlbumTitle": startMarker + "Elia" + endMarker + " Ao Vivo",
            "System.Music.Artist": "Elis Regina",
            "System.Music.Genre": "MPB"
        })
    ];
    MockEmailItemsArray[0 /* Microsoft */ ] = [
        new MockEmailItem("someId13", "Nice email subject", null, null, true, true, {
            "System.Message.SenderName": startMarker + "Satya Nadella" + endMarker,
            "System.Message.SenderAddress": "satyan@microsoft.com",
            "System.Subject": "Great work on Cortana!",
            "System.Message.DateSent": "5/7/2015 3:27PM",
            "System.Communication.AccountName": "abby@microsoft.com"
        }),
        new MockEmailItem("someId14", "Happy Cats", null, null, false, false, {
            "System.Message.SenderAddress": startMarker + "lumbergh@initech.com" + endMarker,
            "System.Subject": "Updated TPS Report Cover Page Template",
            "System.Message.DateSent": "5/4/2015 1:18PM",
            "System.Communication.AccountName": "abby@microsoft.com"
        })
    ];
    MockEmailItemsArray[1 /* OEM */ ] = MockEmailItemsArray[0 /* Microsoft */ ];
    var SearchAppWrapper = function() {
        function overridePropertiesOnObject(baseObject, sourceObject, ignoreUnimplemented) {
            if (sourceObject && baseObject) {
                for (var propertyName in sourceObject) {
                    var sourceProperty = sourceObject[propertyName];
                    if (typeof sourceProperty === "function" && propertyName !== "done" && propertyName !== "then") {
                        // Wrap functions to try and bridge the gap around unimplemented methods
                        baseObject[propertyName] = wrapMethod(baseObject, baseObject[propertyName], sourceObject, sourceProperty);
                    } else if (typeof sourceProperty === "object" && sourceProperty && typeof sourceProperty.length === "undefined" && baseObject[propertyName]) {
                        // Copy any underlying properties from objects recursively
                        // Ignore arrays though - we'll take them verbatim to allow complete overwriting
                        overridePropertiesOnObject(baseObject[propertyName], sourceProperty, ignoreUnimplemented);
                    } else {
                        if (!ignoreUnimplemented || (ignoreUnimplemented && sourceProperty !== null)) {
                            baseObject[propertyName] = sourceProperty;
                        }
                    }
                }
            }
        }

        function wrapMethod(originalObject, originalMethod, overrideObject, overrideMethod) {
            var wrappedMethod = function() {
                var returnValue = null;
                // If there's an override method we'll call that one first
                if (overrideMethod) {
                    try {
                        // This calls overrideMethod from the context of its parent (overrideObject) using the arguments array the wrapper was called with.
                        // Basically a total pass-through
                        returnValue = overrideMethod.apply(overrideObject, arguments);
                        if (!returnValue) {
                            console.log("OverrideMethod returned null.  OverrideMethod = " + overrideMethod);
                        }
                    } catch (e) {
                        console.log("Failed while calling overrideMethod OverrideMethod = " + overrideMethod + "Exception = " + e.toString());
                    }
                }
                // If there's an original method we'll call that one too, because we may get back an object we need to
                var originalValue = null;
                if (originalMethod) {
                    try {
                        originalValue = originalMethod.apply(originalObject, arguments);
                    } catch (e) {}
                }
                if (!returnValue) {
                    returnValue = originalValue;
                } else if (originalValue) {
                    // If we have one of each use the mock versions as backups for the actual ones as these functions will sometimes barf
                    returnValue = enumerateAndWrapMethods(originalValue, returnValue);
                }
                return returnValue;
            };
            return wrappedMethod;
        }
        // This method clones an object while providing a wrapMethod bridges between one implementation of a function and another.
        // We use it to make sure the object we get back from Cortana API calls can fall back to our mock implementations if Cortana APIs fail or are not implemented.
        function enumerateAndWrapMethods(originalValue, returnValue) {
            if (originalValue && returnValue) {
                var substituteObject = {};
                if (typeof returnValue === "object" && returnValue) {
                    for (var propertyName in returnValue) {
                        var sourceProperty = returnValue[propertyName];
                        var originalProperty = originalValue[propertyName];
                        if (typeof sourceProperty === "function" && propertyName !== "done" && propertyName !== "then") {
                            substituteObject[propertyName] = wrapMethod(originalValue, originalValue[propertyName], returnValue, returnValue[propertyName]);
                        } else if (typeof sourceProperty === "object") {
                            substituteObject[propertyName] = enumerateAndWrapMethods(originalProperty, sourceProperty);
                        } else {
                            substituteObject[propertyName] = sourceProperty;
                        }
                    }
                }
                returnValue = substituteObject;
            }
            return returnValue;
        }

        function processHashForArray(itemsArray, resultingArray, constructorFunction) {
            if (itemsArray) {
                if (itemsArray[0] instanceof Array) {
                    processHashForType(itemsArray[0 /* Microsoft */ ], resultingArray[0 /* Microsoft */ ], constructorFunction);
                    processHashForType(itemsArray[1 /* OEM */ ], resultingArray[1 /* OEM */ ], constructorFunction);
                } else {
                    processHashForType(itemsArray, resultingArray[0 /* Microsoft */ ], constructorFunction);
                }
            }
        }

        function processHashForType(itemsArray, resultingArray, constructorFunction) {
            if (itemsArray) {
                resultingArray.splice(0, resultingArray.length);
                itemsArray.forEach(function(item) {
                    var instanceCount = item.instanceCount === undefined ? 1 : item.instanceCount;
                    for (var i = 0; i < instanceCount; i++) {
                        var itemClone = JSON.parse(JSON.stringify(item));
                        var newItem = constructorFunction(itemClone);
                        if (instanceCount != 1) {
                            newItem.id += i.toString();
                            newItem.displayName += i.toString();
                            if (newItem.properties["System.ItemNameDisplay"] !== undefined) {
                                newItem.properties["System.ItemNameDisplay"] += i.toString();
                            }
                        }
                        resultingArray.push(newItem);
                    }
                });
            }
        }

        function createNewMockAppItemFromHash(item) {
            return createNewMockAppItem(item.id, item.version, item.displayName, item.properties, item.imageTimeout);
        }

        function createNewMockSettingsItemFromHash(item) {
            return createNewMockSettingItem(item.id, item.displayName, item.properties, item.imageTimeout);
        }

        function createNewMockEmailItemFromHash(item) {
            return createNewMockEmailItem(item.id, item.displayName);
        }

        function createNewMockFileItemFromHash(item) {
            return createNewMockFileItem(item.id, item.displayName, item.image, item.properties, null, null, item.imageTimeout);
        }

        function createNewMockPictureItemFromHash(item) {
            return createNewMockFileItem(item.id, item.displayName, item.image, item.properties, "picture");
        }

        function processHash() {
            // Proccess any overrides in the hash - they will clobber all other sources
            var hash = ThresholdUtilities.getUrlParameter(_w.location.href, "mock");
            var hashMock;
            if (hash) {
                try {
                    hashMock = JSON.parse(decodeURIComponent(hash));
                } catch (e) {
                    SharedLogHelper.LogWarning("JSON.parse", "Hash value failed to be parsed as valid JSON", e);
                    hashMock = null;
                }
            }
            if (hashMock) {
                overridePropertiesOnObject(MockCortanaAppInstance, hashMock);
                //Wire up these arrays explicitly so they can seed several mock data sources at once.
                var hashMockAny = hashMock;
                processHashForArray(hashMockAny.MockAppItemsArray, MockAppItemsArray, createNewMockAppItemFromHash);
                processHashForArray(hashMockAny.MockSettingItemsArray, MockSettingItemsArray, createNewMockSettingsItemFromHash);
                processHashForArray(hashMockAny.MockDocumentItemsArray, MockDocumentItemsArray, createNewMockFileItemFromHash);
                processHashForArray(hashMockAny.MockMusicItemsArray, MockMusicItemsArray, createNewMockFileItemFromHash);
                processHashForArray(hashMockAny.MockEmailItemsArray, MockEmailItemsArray, createNewMockEmailItemFromHash);
                processHashForArray(hashMockAny.MockPictureItemsArray, MockPictureItemsArray, createNewMockPictureItemFromHash);
                processHashForArray(hashMockAny.MockVideoItemsArray, MockVideoItemsArray, createNewMockFileItemFromHash);
                processHashForArray(hashMockAny.MockFolderItemsArray, MockFolderItemsArray, createNewMockFileItemFromHash);
            }
        }
        // Start with the MockInstance - it should always exist.
        processHash();
        if (typeof CortanaApp !== "undefined") {
            // If we have an implemented ICortanaApp try to copy all of the things it has implemented over on top of our mock
            overridePropertiesOnObject(MockCortanaAppInstance, CortanaApp, true);
        }
        sj_be(_w, "hashchange", processHash);
        return {
            CortanaApp: MockCortanaAppInstance
        };
    }();; ///<reference path="..\Declarations\Shared.d.ts"/>
    var sj_b = _d.body;;
    _G.AppVer = "8_01_2_4387647";
    var feedback = feedback || {};
    feedback.config = feedback.config || {};
    feedback.config.protocol = feedback.config.protocol || {
        url: '/customerfeedback/queue/full/verbatim',
        chunk_size: 195000,
        max_retries: 2,
        local_storage_enabled: true,
        request_timeout: 10000
    };;
    var feedback = feedback || {};
    feedback.config = feedback.config || {};
    feedback.config.dialog = feedback.config.dialog || {
        comment_length_limit: 400,
        reloadOnClose: false,
        disableMove: true,
        hideLink: true,
        restoreLink: true,
        focusToDialog: false
    };
    feedback.config.overrides = feedback.config.overrides || {
        keywords: "ThresholdM2"
    };;
    var PageDebug = {
        "canvas": "HOME",
        "client": "windows",
        "clientVersion": "1.0.0.0"
    };;
    //]]>
    </script>
    <div id="fbpgdg" class="hlig" source="cortana">
        <div id="fbpgdghd" class="hlig"><span class="hlig step1"><h2>Provide feedback</h2></span><span class="hlig step2"><h2>Thank you!</h2></span></div>
        <ul class="hlig step1">
            <li class="inline hlig">
                <input id="fbpgdgtp1" type="radio" checked="checked" value="1" name="type" class="hlig">
                <label for="fbpgdgtp1" class="hlig">Ideas</label>
            </li>
            <li class="inline hlig">
                <input id="fbpgdgtp2" type="radio" value="2" name="type" class="hlig">
                <label for="fbpgdgtp2" class="hlig">Likes</label>
            </li>
            <li class="inline hlig">
                <input id="fbpgdgtp3" type="radio" value="3" name="type" class="hlig">
                <label for="fbpgdgtp3" class="hlig">Dislikes</label>
            </li>
        </ul>
        <p id="fbpgdgptx" class="hlig step1">In your own words</p>
        <div id="fbpgdgtxpnl">
            <textarea id="fbpgdgtx" maxlength="400" data-txt="Tell us what you'd like us to know. To protect your privacy, please don't include any personal information." data-err="Please leave a comment." class="hlig step1">Tell us what you'd like us to know. To protect your privacy, please don't include any personal information.</textarea>
        </div>
        <div class="hlig step1 internal b_secondaryText">
            <h3>Microsoft internal</h3></div>
        <p class="hlig step1 internal">
            <input id="fbpgdgml" type="checkbox" checked="checked" name="send_mail" class="hlig">
            <label for="fbpgdgml" class="hlig">Send email to the Bing team</label><span dir="ltr">&nbsp;(<a href="mailto:sfeed" class="hlig" h="ID=SERP,5006.1">sfeed</a>)</span>
            <label for="fbpgdgal" class="hlig">and cc me at</label>
            <br class="hlig">
            <input id="fbpgdgal" type="text" value="Enter your alias here." data-txt="Enter your alias here." data-err="Please enter your alias." data-depends-on="fbpgdgml" name="alias" class="hlig">
        </p>
        <input type="hidden" name="safe_search" class="hlig" value="moderate">
        <div id="fbpgdgbtn" class="hlig controls step1">
            <ul class="btns">
                <li class="buttonVGap"><a href="javascript:void(0)" id="fbpgdgsbbt" class="hlig" h="ID=SERP,5002.1">Send</a></li>
                <li class="buttonVGap"><a href="javascript:void(0);" id="fbpgdgcnclbt" class="hlig" h="ID=SERP,5003.1">Cancel</a></li>
            </ul>
        </div>
        <p id="fbpgdgthnxmsg" class="step2">Thank you for helping to make Bing better.</p>
        <div class="controls step2">
            <ul class="btns">
                <li class="buttonVGap"><a href="javascript:void(0);" id="fbpgdgclbt" class="hlig" h="ID=SERP,5003.2">Close</a></li>
            </ul>
        </div>
    </div>
    <script type="text/javascript">
    //<![CDATA[
    /// <reference path="../../../../Shared/Content/Content/script/Declarations/Shared.d.ts"/>
    (function() {
        var kValueExtractionRegex = /ID=(\w+),(\d+(?:\.\d+)*)(&PR=(.*))?/i;

        function sendRequest(linkInfo, el, evt, typeOfClick) {
            if (linkInfo) {
                var gpingData = getGPingData(linkInfo, typeOfClick);
                if (_w["Log2"]) {
                    Log2.LogEvent(gpingData.eventType, gpingData.data);
                    if (_w["ThresholdUtilities"]) {
                        var utilities = _w["ThresholdUtilities"];
                        utilities.uploadApiTimes("PCE");
                    }
                    if ((typeOfClick === 0) && clickLeavesPage()) {
                        // if we are leaving the page with this click we will flush all relevant logs
                        sj_evt.fire("visibility", document["hidden"]);
                        if (_w["ClickConfig"] && ClickConfig.FlushSkipAbort) {
                            Log2.FlushMainQueueDontForce();
                        } else {
                            Log2.ForceFlush();
                        }
                        _w["clickFlushedTime"] = sb_gt();
                    }
                }
            }
        }
        _w["si_T"] = sendRequest;

        function clickLeavesPage() {
            if (_w.event && _w.event.srcElement) {
                var linkToCheck = _w.event.srcElement;
                while (!linkToCheck.href) {
                    if (linkToCheck.parentElement) {
                        linkToCheck = linkToCheck.parentElement;
                    } else {
                        // we have no further up to go, this means the user didn't click on a link
                        return false;
                    }
                }
                if (linkToCheck.href.split("#")[0] !== _d.URL.split("#")[0]) {
                    return true;
                }
            }
            return false;
        }

        function getGPingData(linkInfo, typeOfClick) {
            var matches = linkInfo.match(kValueExtractionRegex);
            var gpingData = {
                eventType: "Click",
                data: {
                    AppNS: matches[1],
                    K: matches[2],
                    Case: typeOfClick
                }
            };
            if (matches[4]) {
                gpingData.data.Properties = JSON.parse(matches[4]);
            }
            return gpingData;
        }
    })();; ///<amd-module name="onHTML" />
    define("onHTML", ["require", "exports", "event.custom"], function(require, exports, customEvents) {
        customEvents.fire("onHTML");
    });;
    (function(_onload, si_PP) {
        onload = function() {
            _G.BPT = new Date();
            if (_onload) {
                _onload();
            }
            if (!_w.sb_ppCPL && si_PP) {
                sb_st(function() {
                    si_PP(new Date);
                }, 0);
            }
        };
    })(_w.onload, _w.si_PP);; ///<reference path="Declarations\Shared.d.ts"/>
    // Prevent zooming via ctrl + mousewheel
    sj_be(_d, "mousewheel", function(evt) {
        if (evt.ctrlKey == true) {
            sj_pd(evt);
        }
    });
    // Prevent zooming via ctrl +/-
    sj_be(_d, "keydown", function(evt) {
        if (evt.ctrlKey == true && (evt.keyCode == 107 || evt.keyCode == 109 || evt.keyCode == 187 || evt.keyCode == 189)) {
            sj_pd(evt);
        }
    });; ///<reference path="Declarations\Shared.d.ts" />
    /*
    Instrumentation library for server and client powered apps in Windows smartsearch
    Per this design, Server sets the visibility to false (v=0) on all the app links and client sends the Merge update through MergeInstruction format
    setting v=1 on link being shown and also sends the Datasource merge event setting correct installstate of the app.
    */
    var AppInst;
    (function(AppInst) {
        var kValueExtractionRegex = /ID=([\w]+),([\d]+\.[\d]+)/i;
        var kValueNew = 1;
        AppInst.layoutJson = [];
        AppInst.datasourceJson = [];
        (function(InstallState) {
            InstallState[InstallState["Installed"] = 0] = "Installed";
            InstallState[InstallState["NotInstalled"] = 1] = "NotInstalled";
        })(AppInst.InstallState || (AppInst.InstallState = {}));
        var InstallState = AppInst.InstallState;
        // queues for submission or submits the instrumentation log for server powered apps in smartsearch
        function queueServerAppLog(hVisibleLayout, appInfoDsKValue, installState, hideIfNotInstalled, canSubmit) {
            if (canSubmit === void 0) {
                canSubmit = true;
            }
            var namespace = "";
            if (hVisibleLayout) {
                var matches = hVisibleLayout.match(kValueExtractionRegex);
                if (matches && matches.length >= 3) {
                    // Store the namespace and K value.
                    namespace = matches[1];
                    var kValue = matches[2];
                    if (installState !== 1 /* NotInstalled */ || !hideIfNotInstalled) {
                        AppInst.layoutJson.push({
                            "T": "L.MI",
                            "Action": "Update",
                            "AppNS": namespace,
                            "K": kValue,
                            "V": "1"
                        });
                    }
                }
            }
            if (appInfoDsKValue) {
                AppInst.datasourceJson.push({
                    "T": "D.MI",
                    "Action": "Update",
                    "AppNS": namespace,
                    "K": appInfoDsKValue,
                    "InstallState": getInstallStateString(installState)
                });
            }
            if (canSubmit) {
                submitLog();
            }
        }
        AppInst.queueServerAppLog = queueServerAppLog;

        function getInstallStateString(installState) {
            switch (installState) {
                case 0 /* Installed */ :
                    return "Installed";
                case 1 /* NotInstalled */ :
                    return "NotInstalled";
                default:
                    return "Unknown";
            }
        }

        function getUniqueId() {
            return kValueNew++;
        }
        AppInst.getUniqueId = getUniqueId;
        // submits the instrumentation log in Merge instruction (MI) format.
        function submitLog() {
            var data = [];
            if (AppInst.layoutJson.length > 0) {
                data.push({
                    "Page": AppInst.layoutJson
                });
                AppInst.layoutJson = [];
            }
            if (AppInst.datasourceJson.length > 0) {
                data.push(AppInst.datasourceJson);
                AppInst.datasourceJson = [];
            }
            if (data.length > 0) {
                postLog(JSON.stringify(data));
            }
        }
        AppInst.submitLog = submitLog;

        function postLog(data) {
            if (data) {
                if (_w["Log2"]) {
                    Log2.LogEvent("ClientInst", JSON.parse(data));
                } else {
                    // If ClientInstV2 is not supported
                    var time = sb_gt();
                    var payload = "<E><T>Event.ClientInst</T><IG>" + _G.IG + "</IG><TS>" + time + "</TS><D>" + data + "</D></E>";
                    var xml = "<ClientInstRequest><Events>" + payload + "</Events><STS>" + time + "</STS></ClientInstRequest>";
                    var request = sj_gx();
                    request.open("POST", "/fd/ls/lsp.aspx", true);
                    request.setRequestHeader("Content-Type", "text/xml");
                    request.send(xml);
                }
            }
        }
    })(AppInst || (AppInst = {}));; ///<reference path="..\Declarations\Shared.d.ts"/>
    ///<reference path="..\AppInst.ts"/>
    // this module is used to initialize the Hose page to have app context sense
    var AppApi;
    (function(AppApi) {
        // Adds a handler for the specified control name
        function AddControlHandler(controlName, handler) {
            if (!controlHandlers[controlName]) {
                controlHandlers[controlName] = handler;
            }
        }
        AppApi.AddControlHandler = AddControlHandler;
        // The map of handlers for each control type
        var controlHandlers = {};
        // holding a cache of current page apps
        var pageApps = null;
        var instrumentationEnabled = typeof(AppInst) != 'undefined';
        // update app
        function updateApp(app) {
            if (pageApps && app) {
                var elements = pageApps[app.id];
                if (elements) {
                    for (var i = 0; i < elements.length; ++i) {
                        updateAppElement(elements[i], app);
                    }
                }
            }
        }
        // Invokes the control-specific handler
        function updateAppElement(element, app) {
            var hideIfNotInstalled = Boolean(element.getAttribute("data-hideIfNotInstalled"));
            if (instrumentationEnabled) {
                // Setting canSubmit to 'false' here so that single payload can be submitted later for all the Apps through explicit call to AppInst.SubmitLog function.
                var canSubmit = false;
                var installState = app.installed ? 0 /* Installed */ : 1 /* NotInstalled */ ;
                AppInst.queueServerAppLog(element.getAttribute("h"), element.getAttribute("data-appInfoDsK"), installState, hideIfNotInstalled, canSubmit);
            }
            var controlName = element.getAttribute("data-controlName");
            if (controlName) {
                var handler = controlHandlers[controlName];
                if (handler) {
                    var minVersionStr = element.getAttribute("data-minVersion");
                    var additionalPropsStr = element.getAttribute("data-additionalProps");
                    var installedVersion = app.installedAppVersion ? stringToVersion(app.installedAppVersion) : null;
                    var requiredMinVersion = minVersionStr ? stringToVersion(minVersionStr) : null;
                    var eventArgs = {
                        appElement: element,
                        appInfo: app,
                        installedVersion: installedVersion,
                        requiredMinVersion: requiredMinVersion,
                        // if the min version is not specified, no update is needed
                        updateRequired: requiredMinVersion && installedVersion ? compareAppVersions(installedVersion, requiredMinVersion) < 0 : false,
                        updateAvailable: app.updateAvailable,
                        hideIfNotInstalled: hideIfNotInstalled,
                        additionalProps: null
                    };
                    try {
                        eventArgs.additionalProps = additionalPropsStr ? JSON.parse(additionalPropsStr) : null;
                        handler(eventArgs);
                    } catch (ex) {
                        // Nothing we can do, really...
                        Log.Log("Error", "AppApi", "Handler_" + controlName, false, "Tx", ex.message);
                    }
                    if (app.installed && hideIfNotInstalled) {
                        // Show previously hidden apps
                        element.classList.remove('b_hide');
                    }
                }
            }
        }
        // Reads the app from current page
        function readApps() {
            // We create the list of apps on first call to UpdateApp
            if (pageApps) {
                return;
            }
            pageApps = {};
            var dataAttr = "data-appid";
            // Scrape the DOM to get all the DOM Elements related to apps
            var appLinks = _d.querySelectorAll("[" + dataAttr + "]");
            for (var i = 0; i < appLinks.length; i++) {
                var appLink = appLinks[i];
                if (appLink) {
                    // Get the value of data - appid attribute
                    var appId = appLink.getAttribute(dataAttr);
                    // If the app id is valid, then add it to the collection
                    if (appId) {
                        var appElementList = pageApps[appId];
                        if (appElementList) {
                            // add it to the existing collection
                            appElementList.push(appLink);
                        } else {
                            // create a new list to hold apps
                            pageApps[appId] = [appLink];
                        }
                    }
                }
            }
        }
        // Make an element a launch link with proper instrumentation
        function setLaunchLink(targetElement, appElement, appId, launchUrl) {
            targetElement.setAttribute("href", launchUrl);
            // This code sets proper instrumentation attribute on the launch link
            // We cannot have two identical apps within the same DOM element, for example in the same pivot. We can have two
            // identical apps on different pivots, e.g. OpenTable on About and Apps, however they will have different K values
            // so we need to select the correct sibling element which contains the launch K value to use.
            var siblingInstElement = querySelector(appElement.parentElement, "[data-launchappid='" + appId + "']");
            if (siblingInstElement) {
                var hAttr = "h";
                // data-inst will only be present behind FD
                var hValue = siblingInstElement.getAttribute(hAttr);
                if (hValue && hValue.length > 0) {
                    targetElement.setAttribute(hAttr, hValue);
                }
            }
        }
        AppApi.setLaunchLink = setLaunchLink;

        function instrumentUpgradeLink(appElement) {
            // If upgrade link is instrumented with it's own InstLink and h value, then set that to be the h value of rendered link.
            // This is currently applicable for Windows app links which use separate link for upgrade state.
            var upgradeLinkElement = querySelector(appElement.parentElement, "[data-linkRole='Upgrade']");
            if (upgradeLinkElement) {
                var hUpgradeLink = upgradeLinkElement.getAttribute("h");
                if (hUpgradeLink) {
                    appElement.setAttribute("h", hUpgradeLink);
                }
            }
        }
        AppApi.instrumentUpgradeLink = instrumentUpgradeLink;
        // Shell will call this method to update app info with app list
        // This function name and its namespace can't be changed.
        function UpdateAppInfo(apps) {
            if (apps) {
                // This will only read the app element list once, caching it for all subsequent calls
                readApps();
                for (var i = 0; i < apps.length; ++i) {
                    updateApp(apps[i]);
                }
            }
            // At this point, we have enqueued the logs for all the app links through AppInst.queueServerAppLog function calls.
            // For perf reasons, we submit them all at once in single payload through the following function call.
            if (instrumentationEnabled) {
                AppInst.submitLog();
            }
        }
        AppApi.UpdateAppInfo = UpdateAppInfo;

        function stringToVersion(versionStr) {
            return versionStr.split('.').map(function(s) {
                return Number(s);
            });
        }
        // Version comparison function
        function compareAppVersions(version1, version2) {
            var commonLength = Math.min(version1.length, version2.length);
            for (var i = 0; i < commonLength; i++) {
                var diff = version1[i] - version2[i];
                if (diff != 0) {
                    return diff;
                }
            }
            // The longer version number is considered greater
            return version1.length - version2.length;
        }

        function querySelector(element, query) {
            return element.querySelector(query);
        }
    })(AppApi || (AppApi = {}));; // ------------------------------------------------------------------------------
    // <copyright file="SmartSearch.Navigation.ts" company="Microsoft Corporation">
    //     Copyright (c) Microsoft Corporation. All Rights Reserved.
    //     Information Contained Herein is Proprietary and Confidential.
    // </copyright>
    // ------------------------------------------------------------------------------
    ///<reference path="..\..\..\..\Shared\Content\Content\script\Declarations\Shared.d.ts"/>
    ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Threshold.Utilities.d.ts" />
    ///<reference path="SearchApp.Mock.ts" />
    ///<reference path="Declarations\CortanaEnums.d.ts" />
    var CachedDeviceItems = {};
    var SmartSearch;
    (function(SmartSearch) {
        var cortanaApp = SearchAppWrapper.CortanaApp;
        var supportedPaths = null;
        var baseProtocol = null;
        var baseHostname = null;
        var launchApiAllowedLatency = 100;
        var apiNameAbbreviator = /(^.)|([A-Z])/g;

        function signalComplete() {
            sj_evt.fire("NavigationComplete");
        }

        function navigateTo(targetElement, event) {
            var preventDefault = true;
            // Check if target element link is internal or external
            if (targetElement) {
                var searchUtils = ThresholdUtilities;
                var destinationPath = targetElement.pathname;
                var destinationHostname = getHostname(targetElement);
                var destinationProtocol = targetElement.protocol;
                var destinationSearch = targetElement.search;
                var destinationHash = targetElement.hash;
                if (!baseHostname || !baseProtocol) {
                    getBaseUrl();
                }
                var destinationLink = targetElement.href;
                // If the link is really a javascript invocation (like "javascript:void(0)"), bail out.
                if (destinationProtocol.toLowerCase() === "javascript:") {
                    return;
                }
                if (destinationPath.toLowerCase() === _w.location.pathname.toLowerCase() && destinationSearch.toLowerCase() === _w.location.search.toLowerCase() && destinationHash.toLowerCase() === _w.location.hash.toLowerCase()) {
                    SharedLogHelper.LogWarning("SelfNavigate");
                } else if (destinationLink) {
                    if (!destinationHostname) {
                        destinationHostname = baseHostname; // automatically accquire current domain for relative links
                    }
                    // Determine if a link is relative.
                    // Handle a weird case where the url is ms-windows-store:PDP?PFN=..., no host, and "ms-windows-store:" protocol
                    var isRelative = (!destinationProtocol || destinationProtocol.indexOf("http") === 0) && (destinationHostname === baseHostname || destinationHostname === getHostname(location));
                    var urlType = getUrlType(destinationPath, destinationHostname, isRelative);
                    var launcher = cortanaApp.launcher;
                    switch (urlType) {
                        case 5 /* Search */ :
                        case 3 /* Navigation */ :
                            if (isRelative) {
                                rebaseLink(targetElement);
                                // Need to refresh after changing the link properties
                                destinationLink = targetElement.href;
                            }
                            if (urlType === 5 /* Search */ ) {
                                // Force Cat3b (search)
                                var joiningChar = destinationLink.indexOf("?") === -1 ? "?" : "&";
                                destinationLink += joiningChar + "persona=0";
                            }
                            var navigateWebViewFunctionName = "navigateWebViewAsync";
                            if (cortanaApp[navigateWebViewFunctionName]) {
                                searchUtils.wrapApiCallWithTimeout(cortanaApp, navigateWebViewFunctionName, createInstrumentationKey(navigateWebViewFunctionName), destinationLink, launchApiAllowedLatency, null, destinationLink).done(signalComplete);
                            } else {
                                // We're in charge of the actual navigation
                                preventDefault = false;
                            }
                            break;
                        case 0 /* App */ :
                            var options = null;
                            var appContext = targetElement.getAttribute("data-appcontext");
                            if (appContext) {
                                options = launcher.createAppLaunchOptions();
                                options.appContext = appContext;
                            }
                            var itemId = targetElement.getAttribute("data-appid");
                            if (itemId) {
                                var itemSource = targetElement.getAttribute("data-source");
                                var deviceItem = CachedDeviceItems[itemId + ":" + itemSource];
                                if (deviceItem) {
                                    var launchSearchItemAsyncPromise;
                                    var functionName = "launchSearchItemAsync";
                                    if (options) {
                                        launchSearchItemAsyncPromise = searchUtils.wrapApiCallWithTimeout(launcher, functionName, createInstrumentationKey(functionName), deviceItem.id, launchApiAllowedLatency, null, deviceItem, options);
                                    } else {
                                        launchSearchItemAsyncPromise = searchUtils.wrapApiCallWithTimeout(launcher, functionName, createInstrumentationKey(functionName), deviceItem.id, launchApiAllowedLatency, null, deviceItem);
                                    }
                                    launchSearchItemAsyncPromise.done(signalComplete);
                                } else {
                                    var itemType = targetElement.getAttribute("data-itemtype");
                                    var functionName = itemType && itemType === "settings" ? "findSettingsAsync" : "findAppsAsync";
                                    searchUtils.wrapApiCallWithTimeout(cortanaApp.searchResultsView.deviceSearch, functionName, createInstrumentationKey(functionName), "Navigation", launchApiAllowedLatency, null, [itemId]).then(sj_df(launchFirstFoundItem, options));
                                }
                            }
                            break;
                        case 4 /* Experience */ :
                            var experienceName = targetElement.getAttribute("data-experiencename");
                            if (experienceName) {
                                SearchAppWrapper.CortanaApp.launchExperienceByName(experienceName, null);
                            }
                            break;
                        case 2 /* Explore */ :
                            var destination = targetElement.getAttribute("data-dest");
                            if (destination) {
                                var provider = targetElement.getAttribute("data-provider");
                                if (provider) {
                                    launcher.launchSearchInApp(destination, ThresholdUtilities.getDecodedQuery(_w.location.toString()), provider);
                                } else {
                                    launcher.launchSearchInApp(destination, ThresholdUtilities.getDecodedQuery(_w.location.toString()));
                                }
                                signalComplete();
                            }
                            break;
                        case 1 /* Web */ :
                            if (isRelative) {
                                rebaseLink(targetElement);
                                // Need to refresh after changing the link properties
                                destinationLink = targetElement.href;
                                // Instrument the time of the click to allow us to join the impressions. These requests are from two
                                // different apps, so will be seen as 2 different users, making it difficult to measure e2e perf from
                                // app click to browser page load without this query param.
                                var joiningChar = destinationLink.indexOf("?") === -1 ? "?" : "&";
                                destinationLink += joiningChar + "ts=" + sb_gt();
                                if (_G.nclid) {
                                    destinationLink += "&nclid=" + _G.nclid;
                                }
                            }
                            var functionName = "launchUriAsync";
                            searchUtils.wrapApiCallWithTimeout(launcher, functionName, createInstrumentationKey(functionName), "Navigation", launchApiAllowedLatency, null, destinationLink).then(signalComplete);
                            break;
                    }
                }
            }
            if (event && preventDefault) {
                event.preventDefault();
            }
        };

        function createInstrumentationKey(apiName) {
            return apiName.match(apiNameAbbreviator).join("").toUpperCase();
        }

        function launchFirstFoundItem(result, options) {
            if (result != null) {
                for (var i in result) {
                    var currentResult = result[i];
                    // This check seems unecessary, but the mapping returned maps IDs to empty objects when it fails to find it on the machine.
                    if (currentResult && currentResult.id) {
                        var functionName = "launchSearchItemAsync";
                        ThresholdUtilities.wrapApiCallWithTimeout(SearchAppWrapper.CortanaApp.launcher, functionName, createInstrumentationKey(functionName), null, launchApiAllowedLatency, null, currentResult, options).then(signalComplete);
                        break;
                    }
                }
            }
        }

        function getUrlType(destinationPath, destinationHostname, isRelative) {
            if (isRelative && isSupportedPath(destinationPath)) {
                // This is a requery on search
                if (destinationPath === "search" || destinationPath === "/search") {
                    return 5 /* Search */ ;
                }
                // This is a navigation link to another bing page
                return 3 /* Navigation */ ;
            } else if (destinationHostname === "ms-smartsearch") {
                if (destinationPath === "app" || destinationPath === "/app") {
                    return 0 /* App */ ;
                } else if (destinationPath === "searchInApp" || destinationPath === "/searchInApp") {
                    return 2 /* Explore */ ;
                } else if (destinationPath === "experience" || destinationPath === "/experience") {
                    return 4 /* Experience */ ;
                }
            }
            // Any other links should be launched in browser.
            return 1 /* Web */ ;
        };

        function onClickHandler(evt) {
            if (!evt.defaultPrevented) {
                var element = evt.target;
                var targetElement = getParentContainer(element, "A");
                if (targetElement) {
                    navigateTo(targetElement, evt);
                }
            }
        };

        function getParentContainer(target, tagName) {
            for (; target && target !== document; target = target.parentNode) {
                if (target.tagName === tagName) {
                    return target;
                }
            }
        };

        function isSupportedPath(path) {
            var thresholdConfig = _TC;
            if (!supportedPaths && thresholdConfig && thresholdConfig.SP) {
                supportedPaths = thresholdConfig.SP.split(",");
            }
            while (path.indexOf("/") === 0) {
                path = path.substring(1);
            }
            for (var i = 0; i < supportedPaths.length; i++) {
                var retValue = supportedPaths[i].length > 0 ? (path.toLowerCase().indexOf(supportedPaths[i]) === 0) : (path === "");
                if (retValue) {
                    return true;
                }
            }
            return false;
        }

        function getBaseUrl() {
            if (_w["_TH_BU"]) {
                var baseUrlPieces = _TH_BU.split("//", 2);
                if (baseUrlPieces.length === 2) {
                    baseProtocol = baseUrlPieces[0];
                    baseHostname = baseUrlPieces[1];
                    return;
                }
            }
            baseProtocol = location.protocol;
            baseHostname = getHostname(location);
        }

        function rebaseLink(element) {
            element.protocol = baseProtocol;
            element.hostname = baseHostname;
            element.port = baseProtocol === "https:" ? "443" : "80";
        }

        function getHostname(element) {
            if (!element) {
                return null;
            }
            var hostname = element.hostname;
            if (!hostname) {
                return null;
            }
            // Microsoft Edge drops the [ ] for IPv6 urls, and we cannot actually navigate to IPv6 hosts without them.
            // Add them if they're missing.
            if (hostname.indexOf(":") >= 0 && hostname.indexOf("[") < 0) {
                hostname = "[" + hostname + "]";
            }
            return hostname;
        }
        sj_be(_w, "click", onClickHandler);
        var UrlType;
        (function(UrlType) {
            UrlType[UrlType["App"] = 0] = "App";
            UrlType[UrlType["Web"] = 1] = "Web";
            UrlType[UrlType["Explore"] = 2] = "Explore";
            UrlType[UrlType["Navigation"] = 3] = "Navigation";
            UrlType[UrlType["Experience"] = 4] = "Experience";
            UrlType[UrlType["Search"] = 5] = "Search";
        })(UrlType || (UrlType = {}));
    })(SmartSearch || (SmartSearch = {}));; // ------------------------------------------------------------------------------
    // <copyright file="SmartSearch.ts" company="Microsoft Corporation">
    //     Copyright (c) Microsoft Corporation. All Rights Reserved.
    //     Information Contained Herein is Proprietary and Confidential.
    // </copyright>
    // ------------------------------------------------------------------------------
    ///<reference path="..\..\..\..\Shared\Content\Content\script\Declarations\AppApi.d.ts"/>
    ///<reference path="..\..\..\..\Shared\Content\Content\script\Declarations\Shared.d.ts"/>
    ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Threshold.Utilities.d.ts" />
    ///<reference path="SmartSearch.Navigation.ts"/>
    ///<reference path="SearchApp.Mock.ts"/>
    (function() {
        var appIdAttribute = "data-appid";
        if (typeof AppApi === "undefined" || typeof AppApi.UpdateAppInfo === "undefined") {
            return;
        }
        // Get app ids
        var appIds = [];
        var appLinks = document.querySelectorAll("[" + appIdAttribute + "]");
        for (var i = 0; i < appLinks.length; i++) {
            var appId = appLinks[i].getAttribute(appIdAttribute);
            if (appIds.indexOf(appId) < 0) {
                appIds.push(appId);
            }
        }
        var processApplicationMap = function(results) {
            var apps = [];
            for (var index in appIds) {
                var appId = appIds[index];
                if (results.hasKey(appId)) {
                    var item = results[appId];
                    if (item) {
                        var app = {
                            id: appId,
                            installedAppVersion: item.version,
                            installed: true
                        };
                        apps.push(app);
                        if (CachedDeviceItems && !CachedDeviceItems[appId]) {
                            CachedDeviceItems[appId] = item;
                        }
                    }
                }
            }
            AppApi.UpdateAppInfo(apps);
            ThresholdUtilities.uploadApiTimes("ALR");
        };
        // Check the app install state and update app info, only if we have some apps to check
        if (appIds.length > 0) {
            ThresholdUtilities.wrapApiCall(SearchAppWrapper.CortanaApp.searchResultsView.deviceSearch, "findAppsAsync", "AL", "AppLinking", appIds).then(processApplicationMap);
        }
    })();; ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Shared.d.ts" />
    ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\jquery.d.ts" />
    /*
     * This file contains common functionality that's used by multiple JavaScript modules.
     * Due to the above, this file is likely to be exposed to the client very often.
     */
    var Feedback;
    (function(Feedback) {
        var Core;
        (function(Core) {
            'use strict';
            /*
             * generates a random string of length (sent as a parameter) given the set 0-9 and a-Z
             */
            function GenerateString(length) {
                var str = "",
                    charSet = "abcdefghijklmnopqrstuvwxyz0123456789",
                    i;
                for (i = 0; i < length; ++i)
                    str += charSet.charAt(Math.floor(Math.random() * charSet.length));
                return str;
            }
            Core.GenerateString = GenerateString;
            /*
             * BUGBUG #320468: stringify function doesn't detect circular references when serializing JS objects to JSON
             * specification is located at http://json.org
             */
            function Stringify(obj) {
                var str = '',
                    c = 0,
                    i;
                switch (typeof obj) {
                    case 'object':
                        if (obj instanceof Array) {
                            // array
                            str += '[';
                            for (i = 0; i < obj.length; i++) {
                                if (i > 0) {
                                    str += ',';
                                }
                                str += Stringify(obj[i]);
                            }
                            str += ']';
                        } else if (obj instanceof Boolean || obj instanceof Date || obj instanceof Number || obj instanceof String) {
                            str = obj.toString();
                        } else {
                            // object
                            str += '{';
                            for (i in obj) {
                                if (obj.hasOwnProperty(i)) {
                                    if (c > 0) {
                                        str += ',';
                                    }
                                    str += '"' + i + '":' + Stringify(obj[i]);
                                    c++;
                                }
                            }
                            str += '}';
                        }
                        return str;
                    case 'boolean':
                    case 'number':
                        return obj;
                    case 'string':
                        // case 'string':
                        return '"' + obj.replace(/[\\]/g, '\\\\').replace(/[\"]/g, '\\"').replace(/[\/]/g, '\\/').replace(/[\b]/g, '\\b').replace(/[\f]/g, '\\f').replace(/[\n]/g, '\\n').replace(/[\r]/g, '\\r').replace(/[\t]/g, '\\t') + '"';
                    default:
                        return null;
                }
            }
            Core.Stringify = Stringify;
            // Fetches localStorage when accessible on browser
            function FetchLocalStorage() {
                try {
                    // check if localStorage is accessible
                    if (_w.localStorage) {
                        return _w.localStorage;
                    }
                } catch (e) {
                    // its not accessible on IE10 / Win2k12 - return undefined in that case
                    return undefined;
                }
            }
            Core.FetchLocalStorage = FetchLocalStorage;
            // get ISO Date - create string on some browsers where toISOString doesn't work
            // See compat matrix @ http://kangax.github.io/es5-compat-table/
            function GetISODate(date) {
                var dateStr = "";
                if (!Date.prototype.toISOString) {
                    dateStr = date.getUTCFullYear() + '-' + PadSingleDigit(date.getUTCMonth() + 1) + '-' + PadSingleDigit(date.getUTCDate()) + 'T' + PadSingleDigit(date.getUTCHours()) + ':' + PadSingleDigit(date.getUTCMinutes()) + ':' + PadSingleDigit(date.getUTCSeconds()) + '.' + String((date.getUTCMilliseconds() / 1000).toFixed(3)).slice(2, 5) + 'Z';
                } else {
                    dateStr = date.toISOString();
                }
                return dateStr;
            }
            Core.GetISODate = GetISODate;
            // pad number
            function PadSingleDigit(num) {
                var r = String(num);
                if (r.length === 1) {
                    r = '0' + r;
                }
                return r;
            }
        })(Core = Feedback.Core || (Feedback.Core = {}));
    })(Feedback || (Feedback = {}));; ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Shared.d.ts" />
    ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\jquery.d.ts" />
    ///<reference path="Core.ts" />
    /*
     * This module contains the protocol functions that are used to communicate with the feedback backend.
     * This version is designed to work with FrontDoor v2 (FDv2), so we assume that the HTTP POST upload limit is high (several megabytes).
     * Since this limit is high, we will make a single HTTP connection and upload the feedback item in one go. In the past we were using
     * multiple uploads, each less than 200KB, because of a limitation if FDv1. We use JSON to communicate everything to the feedback backend
     * servers, so a 'stringify' function had to be implemented. 'JSON.stringify' is supported by all major browsers, except IE7 and below.
     */
    var Feedback;
    (function(Feedback) {
        var Protocol;
        (function(Protocol) {
            'use strict';

            function AppendParameter(url, name, value) {
                return url + (url.indexOf('?') >= 0 ? '&' : '?') + name + '=' + value;
            }

            function SendToBackend(obj, moduleName, customDebugId, localStorageFlag, onSuccessCallback, onErrorCallback) {
                var feedbackUploadUrl = feedback.config.protocol.url,
                    localStorage = Feedback.Core.FetchLocalStorage(),
                    maxRetries = feedback.config.protocol.max_retries,
                    localStorageEnabled = feedback.config.protocol.local_storage_enabled,
                    requestTimeout = feedback.config.protocol.request_timeout;

                function GetStorageId(id) {
                    return 'feedback' + id;
                }

                function SendAttempt(obj, customDebugId, attemptCount, localStorageFlag, onSuccessCallback, onErrorCallback) {
                    if (localStorageFlag === void 0) {
                        localStorageFlag = undefined;
                    }
                    if (onSuccessCallback === void 0) {
                        onSuccessCallback = undefined;
                    }
                    if (onErrorCallback === void 0) {
                        onErrorCallback = undefined;
                    }
                    var debugId = (typeof customDebugId === 'undefined') ? Feedback.Core.GenerateString(8) : customDebugId,
                        isOld = (typeof localStorageFlag === 'undefined') ? false : localStorageFlag,
                        // converts object to JSON and then encodes it
                        objStr = Feedback.Core.Stringify(obj),
                        objStrEncoded = encodeURIComponent(objStr);
                    if (localStorage && localStorageEnabled) {
                        try {
                            // saves the payload across sessions in case backend is down
                            localStorage.setItem(GetStorageId(debugId), objStr);
                        } catch (ex) {}
                    }
                    $.ajax({
                        type: 'POST',
                        timeout: requestTimeout,
                        url: AppendParameter(feedbackUploadUrl, 'debugid', debugId),
                        contentType: 'application/json; charset=utf-8',
                        data: objStrEncoded,
                        success: function() {
                            OnSendSuccess(obj, debugId, attemptCount, onSuccessCallback);
                        },
                        error: function() {
                            if (attemptCount > maxRetries) {
                                OnSendFailure(obj, debugId, attemptCount, onErrorCallback);
                            } else {
                                // Note below we increment attemptCount before calling SendAttempt
                                SendAttempt(obj, debugId, ++attemptCount, isOld, onSuccessCallback, onErrorCallback);
                            }
                        }
                    });
                }

                function OnSendSuccess(obj, debugId, attemptCount, onSuccessCallback) {
                    if (onSuccessCallback === void 0) {
                        onSuccessCallback = undefined;
                    }
                    var frontendPayload = {
                        T: 'CI.PageFeedbackSuccess',
                        Counts: {
                            RetryCount: attemptCount - 1 // If the item goes through the first time, we are at retry #0 and attemptCount #1.
                        }
                    };
                    // sends data to FrontDoor as client instrumentation
                    SendToFrontend(frontendPayload);
                    if (onSuccessCallback) {
                        onSuccessCallback(debugId);
                    }
                    if (localStorage && localStorageEnabled) {
                        localStorage.removeItem(GetStorageId(debugId));
                    }
                }

                function OnSendFailure(obj, debugId, attemptCount, onErrorCallback) {
                    if (onErrorCallback === void 0) {
                        onErrorCallback = undefined;
                    }
                    var frontendPayload = {
                        T: 'CI.PageFeedbackFailure',
                        Counts: {
                            RetryCount: attemptCount - 1 // If the item fails to be sent after 3 tries, we are at retry #2 and attemptCount #3.
                        }
                    };
                    // sends data to FrontDoor as client instrumentation
                    SendToFrontend(frontendPayload);
                    if (onErrorCallback) {
                        onErrorCallback(debugId);
                    }
                }

                function SendFailedLocalStorageMessages() {
                    var i, key, match, id, obj;
                    if (localStorage && localStorageEnabled) {
                        for (i = 0; i < localStorage.length; i++) {
                            key = localStorage.key(i);
                            match = /^feedback([a-zA-Z0-9]{8})$/.exec(key);
                            if (match) {
                                id = match[1];
                                try {
                                    obj = $.parseJSON(localStorage.getItem(key));
                                } catch (ex) {
                                    // in case we can't recover an object from the string, delete the saved feedback item
                                    localStorage.removeItem(key);
                                    obj = null;
                                }
                                if (obj) {
                                    SendAttempt(obj, id, 1, true);
                                }
                            }
                        }
                    }
                }
                SendFailedLocalStorageMessages();
                SendAttempt(obj, customDebugId, 1, localStorageFlag, onSuccessCallback, onErrorCallback);
            }
            Protocol.SendToBackend = SendToBackend;

            function SendToFrontend(obj) {
                var url = _G.lsUrl + '&type=Event.ClientInst&log=UserEvent&data=' + encodeURIComponent(Feedback.Core.Stringify(obj));
                $.ajax({
                    url: url
                });
            }
            Protocol.SendToFrontend = SendToFrontend;
        })(Protocol = Feedback.Protocol || (Feedback.Protocol = {}));
    })(Feedback || (Feedback = {}));;
    var Feedback;
    (function(Feedback) {
        "use strict";
        var FeedbackFile = (function() {
            function FeedbackFile(fileName, contentType) {
                this.fileName = fileName;
                this.contentType = contentType;
            }
            return FeedbackFile;
        })();
        Feedback.FeedbackFile = FeedbackFile;
    })(Feedback || (Feedback = {}));; ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Shared.d.ts" />
    ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\jquery.d.ts" />
    ///<reference path="..\..\..\..\Threshold\src\Content\Script\Declarations\CortanaEnums.d.ts" />
    ///<reference path="..\..\..\..\Threshold\Src\Content\Script\Declarations\SearchAppWrapper.d.ts" />
    ///<reference path="CheckboxMenus.ts" />
    ///<reference path="Events.ts" />
    ///<reference path="Highlight.ts" />
    ///<reference path="PackageLoad.ts" />
    ///<reference path="Declarations\PageDebug.d.ts" />
    ///<reference path="FeedbackFile.ts" />
    /*
     * This module contains logic specific to the feedback dialog.
     * It allows the dialog to be moved when the user keeps the mouse down on the head of the dialog.
     * When dialog is closed, it refreshes the page.
     * When the user moves away from the text boxes, it prepopulates them with instructions if these are empty.
     * When submit is clicked it will use the 'Protocol.js' module to send data back (hiding the dialog before that).
     */
    var Feedback;
    (function(Feedback) {
        var Page;
        (function(Page) {
            var feedbackFiles;
            var originalFadeCortanaText;
            var originalSetCortanaText;
            var originalScrollValue;

            function LogFeedbackFailure(source, type, message) {
                var payload = {
                    T: 'CI.PageFeedbackFailure',
                    Type: type,
                    Source: source,
                    Message: message
                };
                var url = _G.lsUrl + '&type=Event.ClientInst&log=UserEvent&data=' + encodeURIComponent(Feedback.Core.Stringify(payload));
                $.ajax({
                    url: url
                });
            }
            // Since we suppress these calls earlier, let's revert them back to their original functionality
            function CortanaReset() {
                if (typeof SearchAppWrapper !== "undefined" && SearchAppWrapper.CortanaApp) {
                    if (SearchAppWrapper.CortanaApp.fadeCortanaText) {
                        SearchAppWrapper.CortanaApp.fadeCortanaText = originalFadeCortanaText;
                    }
                    if (SearchAppWrapper.CortanaApp.setCortanaText) {
                        SearchAppWrapper.CortanaApp.setCortanaText = originalSetCortanaText;
                    }
                    // Reset the ChromeState on base canvas
                    // BUGBUG #5206834:Expose CortanaApp.getChromeState() so that pages can detect what the current state is
                    if (SearchAppWrapper.CortanaApp.setChromeState) {
                        SearchAppWrapper.CortanaApp.setChromeState(2 /* StandardMedium */ );
                    }
                    if (SearchAppWrapper.CortanaApp.closeFeedbackPage) {
                        SearchAppWrapper.CortanaApp.closeFeedbackPage();
                    }
                    // resume scrolling
                    $('body').css('overflow-y', originalScrollValue);
                }
            }
            // suppress client calls to functions that change our header
            function SuppressCortanaHeaderCalls() {
                if (typeof SearchAppWrapper !== "undefined" && SearchAppWrapper.CortanaApp) {
                    if (SearchAppWrapper.CortanaApp.fadeCortanaText) {
                        originalFadeCortanaText = SearchAppWrapper.CortanaApp.fadeCortanaText;
                        SearchAppWrapper.CortanaApp.fadeCortanaText = function() {};
                    }
                    if (SearchAppWrapper.CortanaApp.setCortanaText) {
                        originalSetCortanaText = SearchAppWrapper.CortanaApp.setCortanaText;
                        SearchAppWrapper.CortanaApp.setCortanaText = function() {};
                    }
                }
            }
            // reloads the page from browser cache
            // hide badge on successful submission (currently handled by shared footer for quickback pages only)
            function Close() {
                if (feedback.config.dialog.reloadOnClose) {
                    if ($('.hlig.step2').css('display') !== 'none') {
                        location.search += '&fbg=0';
                    } else {
                        location.reload(false);
                    }
                } else {
                    $('#fbpgdg').remove();
                    // Events.ts, Highlight.ts, and CheckboxMenus.ts listen to the cleanUpFeedback event and will hide any created HTML elements.
                    // This will put the page back in a state that allows user interaction.
                    $('body').trigger('cleanUpFeedback');
                    if (feedback.config.dialog.restoreLink) {
                        var link = $('#sb_feedback');
                        link.show();
                        if (link.hasClass('clicked')) {
                            link.removeClass('clicked');
                        }
                    }
                }
                CortanaReset();
            }

            function ShowStep(index) {
                var dialog = $('#fbpgdg');
                dialog.find('.step' + (index - 1)).hide();
                dialog.find('.step' + index).show();
                if (feedback.config.dialog.focusToDialog) {
                    $(_w).scrollTop($(_d).height() + dialog.height());
                }
            }

            function EnableMove() {
                var dialog = $("#fbpgdg"),
                    dialogHeader = $("#fbpgdghd");
                dialogHeader.on("mousedown", function(e) {
                    var offset = $(this).offset(),
                        deltaX = e.pageX - offset.left,
                        deltaY = e.pageY - offset.top;
                    $(_d).on('selectstart.feedback.page', function() {
                        // disables selecting text on the page when dialog is moved
                        return false;
                    });
                    $(_d).on('mousemove.feedback.page', function(e) {
                        dialog.css({
                            left: e.clientX - deltaX,
                            top: e.clientY - deltaY,
                            // overrides properties which were set in 'Page.css'
                            right: 'auto',
                            bottom: 'auto'
                        });
                    });
                    $(_d).on('mouseup.feedback.page', function() {
                        $(_d).off('mousemove.feedback.page');
                        $(_d).off('mouseup.feedback.page');
                        $(_d).off('selectstart.feedback.page');
                    });
                });
            }

            function EnableClose() {
                var closeIcon = $("#fbpgdgcl,#fbpgdgcnclbt,#fbpgdgclbt");
                $(_d).on('keydown', function(e) {
                    // checks if escape was pressed
                    if (e.which === 27) {
                        Close();
                    }
                });
                closeIcon.on('click', Close);
            }
            // Collapse the Chrome and disable scrolling on the main body
            function CortanaInit() {
                if (typeof SearchAppWrapper !== "undefined" && SearchAppWrapper.CortanaApp && SearchAppWrapper.CortanaApp.setChromeState) {
                    SearchAppWrapper.CortanaApp.setChromeState(0 /* NoHeader */ );
                    originalScrollValue = $('body').css('overflow-y');
                    $('body').css('overflow-y', 'hidden');
                }
            }

            function EnableText() {
                var dialog = $('#fbpgdg'),
                    commentBox = $('#fbpgdgtx'),
                    targetIsShowingSystemMessage = function(target) {
                        var targetValue = target.val();
                        return (targetValue === target.attr('data-txt') || targetValue === target.attr('data-err'));
                    },
                    clear = function() {
                        var target = $(this);
                        if (targetIsShowingSystemMessage(target)) {
                            target.removeClass('error');
                            target.addClass('active');
                            target.val('');
                        }
                    },
                    restore = function() {
                        var target = $(this);
                        // enables all text inputs when current control loses focus
                        $('input[type="text"]:not([data-depends-on]), input[type="search"]:not([data-depends-on])').prop('disabled', false);
                        if (target.val().length === 0) {
                            target.removeClass('active');
                            target.val(target.attr('data-txt'));
                        }
                    },
                    disable = function() {
                        var target = $(this);
                        // disables all text inputs when current control has focus, so that any overrides of keydown actually go to the current control
                        // if not, it's possible that any key users type will go to the query box instead of the current control
                        $('input[type="text"]:not([data-depends-on]), input[type="search"]:not([data-depends-on])').filter(function() {
                            return !target.is($(this));
                        }).prop('disabled', true);
                    };
                // adds default text that serves as instructions to the user to all textbox controls inside the feedback dialog
                dialog.find('textarea, input[type="text"]').on('focus', disable).on('blur', restore).on('change', restore).on('keydown', clear).on('tap', clear).on('taphold', clear).on('mouseup', clear).on('click', clear);
                // enforces the comment box to have an upper limit on the amount of text a user can input
                commentBox.on('keyup focus', function() {
                    var target = $(this),
                        counter = $('#fbpgdgtxct'),
                        targetValue = target.val(),
                        maxLimit = feedback.config.dialog.comment_length_limit,
                        currentChars = targetValue.length,
                        remainingChars = maxLimit - currentChars;
                    if (targetIsShowingSystemMessage(target)) {
                        remainingChars = maxLimit;
                    }
                    // enforces the character limit by JavaScript because IE9 and lower doesn't respect the maxlength attribute of the textarea tag
                    if (remainingChars < 0) {
                        target.val(targetValue.substr(0, maxLimit));
                        remainingChars = 0;
                    }
                    if (counter.length) {
                        // updates the counter
                        counter.html(remainingChars.toString());
                        // this makes the counter red if there are no left over characters to be typed
                        if (remainingChars === 0) {
                            counter.addClass('error');
                        } else {
                            counter.removeClass('error');
                        }
                    }
                });
            }

            function GetTextInputValue(element) {
                var value = element.val();
                if (value === element.attr('data-txt') || value === element.attr('data-err')) {
                    // sets data as empty string if contents of textbox is the watermark text
                    // or the error text: it can happen when the user hasn't entered his alias and the error shows up, followed by the user disabling the Send email to sfeed checkbox
                    return '';
                }
                // else return the original value
                return value;
            }

            function GetInputTagValues() {
                var dialog = $('#fbpgdg'),
                    data = {};
                dialog.find('input[name][type="text"], input[name][type="radio"]:checked, input[name][type="checkbox"]:checked, input[type="hidden"]').each(function() {
                    var target = $(this),
                        type = target.attr('type'),
                        name = target.attr('name');
                    switch (type) {
                        case 'checkbox':
                            data[name] = target.prop('checked');
                            break;
                        case 'text':
                            data[name] = GetTextInputValue(target);
                            break;
                        case 'hidden':
                            // we store the PBXML in a hidden INPUT tag which needs to be cleared when data is submitted
                            // otherwise, the PBXML would be sent twice:
                            // 1. as a parameter in the JSON request
                            // 2. inside the HTML as the value of a hidden tag
                            // this is important as the PBXML is large (about 250KB in binary format)
                            data[name] = target.val();
                            target.val(''); // clears out the value
                            break;
                        default:
                            data[name] = target.val();
                    }
                });
                return data;
            }

            function GetPageDebug() {
                // PageDebug is a data structure defined in HTML/JS before we submit feedback. It is used to send us debug information from outside feedback.
                return (typeof _w["PageDebug"] === "undefined") ? {} : _w["PageDebug"];
            }

            function ShouldIncludeScreenShot() {
                var includeScreenShotCheckbox = $('#fbpgdgsschk');
                // if length is defined then we should respect the checkbox state
                if (includeScreenShotCheckbox.length) {
                    return includeScreenShotCheckbox.is(':checked');
                } else {
                    // we always include screenshots and logs on internal versions
                    return true;
                }
            }

            function EnableSubmit() {
                var submitButton = $('#fbpgdgsbbt'),
                    dialog = $('#fbpgdg'),
                    partnerSource = dialog.attr('source');
                if (typeof partnerSource === 'undefined' || partnerSource.length == 0) {
                    partnerSource = 'verbatim';
                }
                submitButton.on('click', function() {
                    var encode = encodeURIComponent,
                        isDisabled = $(this).is('[disabled]'),
                        spinIcon = $('#fbpgdgsp'),
                        commentBox = $('#fbpgdgtx'),
                        queryBox = $('#sb_form_q'),
                        comment = GetTextInputValue(commentBox),
                        type = $('input[name="type"]:checked').val(),
                        inputTags = GetInputTagValues(),
                        originalHtml = typeof feedback.core !== 'undefined' ? feedback.core.originalHTML : Feedback.PackageLoad.originalHTML,
                        html = typeof feedback.core !== 'undefined' ? feedback.core.getHTML() : Feedback.PackageLoad.GetHTML(),
                        pageDebug = GetPageDebug(),
                        pageDebugCanvas = pageDebug["canvas"],
                        originalFdVertical = (typeof _G.V === 'undefined') ? _G.P : _G.V,
                        backendPayload = {
                            impression_guid: _G.IG,
                            text: comment,
                            url: location.href,
                            vertical: (typeof pageDebugCanvas !== 'undefined') ? pageDebugCanvas : originalFdVertical,
                            original_html: originalHtml,
                            html: html,
                            width: $(_w).width(),
                            height: $(_w).height(),
                            source: partnerSource,
                            query: queryBox.val(),
                            timeStamp: Feedback.Core.GetISODate(_G.ST),
                            keywords: feedback.config.overrides.keywords
                        },
                        frontendPayload = {
                            T: 'CI.PageFeedback',
                            Feedback: {
                                Text: comment,
                                Type: type
                            }
                        },
                        isValid = true,
                        onCompleteCallback, i;
                    var shouldIncludeScreenShot = ShouldIncludeScreenShot();
                    // Do not send the HTML if the user is on Threshold and hasn't given us permission to include the screenshot
                    if ((typeof SearchAppWrapper !== "undefined" && SearchAppWrapper.CortanaApp) && !shouldIncludeScreenShot) {
                        delete backendPayload["original_html"];
                        delete backendPayload["html"];
                    }
                    var imageContentType = 'image/png';
                    if (typeof feedbackFiles !== 'undefined' && feedbackFiles.length > 0) {
                        // Verify that all of the feedback file contents have been returned
                        var numberOfEmptyFiles = 0;
                        var cleanedArray = new Array();
                        for (var j = 0; j < feedbackFiles.length; j++) {
                            var feedbackFile = feedbackFiles[j];
                            if (typeof feedbackFile !== 'undefined' && feedbackFile.base64Content && feedbackFile.contentType && feedbackFile.fileName) {
                                var fileContentType = feedbackFile.contentType.toLowerCase();
                                // Only include files that have populated content
                                if (feedbackFile.base64Content.length === 0) {
                                    LogFeedbackFailure("EnableSubmit", "FeedbackFileTimeoutError", "Did not populate base64Content before submitting for " + feedbackFile.fileName);
                                } else if (fileContentType !== imageContentType || (fileContentType === imageContentType && shouldIncludeScreenShot)) {
                                    // Submit all feedback files except images if we have not received permission
                                    cleanedArray.push(feedbackFile);
                                }
                            } else {
                                numberOfEmptyFiles++;
                            }
                        }
                        if (numberOfEmptyFiles > 0) {
                            LogFeedbackFailure("EnableSubmit", "FeedbackFileTimeoutError", numberOfEmptyFiles + " feedback files not returned in time for feedback submit.");
                        }
                        if (cleanedArray.length > 0) {
                            backendPayload["feedbackFiles"] = cleanedArray;
                        }
                    }
                    // Overwrite all fields in backendPayload with the contents of PageDebug. We already checked above if PageDebug is defined, otherwise pageDebug is empty
                    var shouldStoreInStructureData = false;
                    for (var i in pageDebug) {
                        backendPayload[i] = pageDebug[i];
                        shouldStoreInStructureData = true;
                    }
                    if (shouldStoreInStructureData) {
                        backendPayload["structured_data"] = pageDebug;
                    }
                    // don't execute button logic if the 'disabled' attribute has been set
                    // this usually happens when there's a pending operation taking place, like requesting debug data
                    if (isDisabled) {
                        return;
                    }
                    // loop through each input text and textarea and see if user has entered text in each
                    // but loop only through those which have an data-err attribute which means they're mandatory
                    dialog.find('input[type="text"][data-err], textarea[data-err]').each(function() {
                        var target = $(this),
                            dependsOn = target.attr('data-depends-on'),
                            val = target.val();
                        // check if the input box depends on a different control
                        if (typeof dependsOn !== 'undefined') {
                            // has attribute data-depends-on
                            if (!$('#' + dependsOn).is(':checked')) {
                                // the control on which it depends is not checked, so return
                                // skips validation by exiting function
                                return;
                            }
                        }
                        // else, doesn't depend on any other control, let the validation execute
                        if (target.is(commentBox) && typeof Feedback.CheckboxMenus !== 'undefined' && Feedback.CheckboxMenus.IsAtLeastOneItemChecked()) {
                            // skips the validation of the Comment text box is at least one defect/symptom is selected on the page
                            // this will make the Comment text box optional for users who submit feedback with SearchVote-like functionality
                            return;
                        }
                        if (val === target.attr('data-txt') || val === target.attr('data-err') || $.trim(val) === '') {
                            target.addClass('error');
                            target.val(target.attr('data-err'));
                            isValid = false;
                        }
                    });
                    if (isValid === false) {
                        // doesn't allow submitting the data if alias is empty or user hasn't entered any comments
                        return;
                    }
                    if (typeof fbsrc !== 'undefined') {
                        // sets the source of the feedback
                        // the fbsrc variable is set on the onclick event handler of the Report a problem link of the entity pane
                        backendPayload.source = fbsrc;
                    }
                    for (i in inputTags) {
                        if (inputTags.hasOwnProperty(i)) {
                            // sets additional data on the object to be sent
                            backendPayload[i] = inputTags[i];
                        }
                    }
                    if (feedback.hooks) {
                        feedback.hooks.settings.override = false;
                    } else if (Feedback.Events) {
                        Feedback.Events.settings.override = false;
                        Feedback.Events.CleanUp();
                    }
                    if (Feedback.Highlight) {
                        Feedback.Highlight.settings.enabled = false;
                    }
                    if (spinIcon.length > 0) {
                        // checks if the spinning icon is present on the page
                        // if so, it means we have to show up
                        spinIcon.show();
                        onCompleteCallback = function(id) {
                            spinIcon.hide();
                            // shows the second step of the dialog
                            ShowStep(2);
                        };
                    } else {
                        // shows the second step of the dialog
                        ShowStep(2);
                    }
                    // sends data to the CustomerExperience backend
                    Feedback.Protocol.SendToBackend(backendPayload, undefined, undefined, undefined, onCompleteCallback, onCompleteCallback);
                    // sends data to FrontDoor as client instrumentation
                    Feedback.Protocol.SendToFrontend(frontendPayload);
                    if (typeof feedback.checkboxMenus !== 'undefined') {
                        // once the feedback is sent, switch the checkbox menu defects in preview mode so that the user sees them.
                        Feedback.CheckboxMenus.SwitchToPreviewMode();
                    }
                });
            }

            function GetFeedbackFiles() {
                try {
                    if (typeof SearchAppWrapper !== "undefined" && SearchAppWrapper.CortanaApp && SearchAppWrapper.CortanaApp.getFeedbackFilesAsync) {
                        CortanaApp.getFeedbackFilesAsync().done(function(returnedFiles) {
                            if (typeof returnedFiles === "undefined" || returnedFiles === null) {
                                return;
                            }
                            feedbackFiles = new Array(returnedFiles.size);
                            for (var i = 0; i < returnedFiles.size; i++) {
                                var file = returnedFiles[i];
                                GetFeedbackFile(i, file);
                            }
                        });
                    }
                } catch (e) {
                    LogFeedbackFailure("GetFeedbackFiles", "FeedbackFileFetchError", "Could not get feedback files");
                }
            }

            function GetFeedbackFile(index, file) {
                try {
                    file.getBase64ContentAsync().done(function(content) {
                        var toUpload = new Feedback.FeedbackFile(file.fileName, file.contentType);
                        toUpload.base64Content = content;
                        feedbackFiles[index] = toUpload;
                    });
                } catch (e) {
                    LogFeedbackFailure("GetFeedbackFile", "FeedbackFileLoadError", "GetFeedbackFile: Could not get feedback file content");
                }
            }

            function Init() {
                var dialog, controlToFocus;
                SuppressCortanaHeaderCalls();
                // listens for the checkSelection event which is triggered by the CheckboxMenus.js file when user checks a radio button of the symptoms
                if (typeof Feedback.CheckboxMenus !== 'undefined') {
                    $('body').on('checkSelection', function(e, target) {
                        var dislikeRadioButton = $('#fbpgdgtp3');
                        // checks the dislike radio button if user selected a symptom in the checkbox menu of the selection
                        dislikeRadioButton.prop('checked', true);
                    });
                }
                CortanaInit();
                EnableText();
                EnableClose();
                EnableSubmit();
                if (feedback.config.dialog.hideLink) {
                    $('#sb_feedback').hide();
                    $('#fbpgbt').hide();
                }
                dialog = $('#fbpgdg');
                if (feedback.config.dialog.focusToDialog) {
                    $(_w).scrollTop($(_d).height() + dialog.height());
                }
                if (!feedback.config.dialog.disableMove) {
                    EnableMove();
                }
                // Stops the click event propagation when dialog box area is clicked
                dialog.on('click', function(e) {
                    e.stopPropagation();
                });
                // set focus to text area for Bing.com
                controlToFocus = $('#fbpgdgtx');
                if (typeof SearchAppWrapper !== "undefined" && SearchAppWrapper.CortanaApp) {
                    // set focus to Suggest radio button for Cortana canvases
                    controlToFocus = $('#fbpgdgtp1');
                }
                if (controlToFocus.length > 0) {
                    controlToFocus[0].focus();
                }
                GetFeedbackFiles();
            }
            Init();
        })(Page = Feedback.Page || (Feedback.Page = {}));
    })(Feedback || (Feedback = {}));; ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Shared.d.ts" />
    ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\jquery.d.ts" />
    ///<reference path="Core.ts" />
    /*
     * This module encapsulates logic for fetching and prepopulating the alias field of the feedback dialog.
     * It also allows saving the new alias as the text box changes.
     * This file will be delivered to users only when they're on corpnet, as set in the 'Feedback.ini' file.
     */
    var Feedback;
    (function(Feedback) {
        var Alias;
        (function(Alias) {
            'use strict';
            var localStorage = Feedback.Core.FetchLocalStorage();

            function GetAlias() {
                return localStorage ? localStorage.getItem('alias') : null;
            }

            function SetAlias(alias) {
                if (localStorage) {
                    localStorage.setItem('alias', alias);
                }
            }

            function EnableAlias() {
                var aliasTextbox = $('#fbpgdgal'),
                    alias = GetAlias();
                if (alias !== null && alias.length > 0) {
                    aliasTextbox.addClass('active');
                    aliasTextbox.val(alias);
                }
                aliasTextbox.on('change', function() {
                    SetAlias(aliasTextbox.val());
                });
            }

            function EnableDistributionGroup() {
                var distributionGroupCheckbox = $('#fbpgdgml');
                distributionGroupCheckbox.on('click', function() {
                    var checked = distributionGroupCheckbox.is(':checked'),
                        aliasTextbox = $('#fbpgdgal'),
                        aliasLabel = $('label[for="fbpgdgal"]'),
                        distributionGroupLabel = $('label[for="fbpgdgml"]');
                    aliasTextbox.attr('disabled', !checked);
                    aliasLabel.toggleClass('disabled');
                    distributionGroupLabel.toggleClass('disabled');
                });
            }
            EnableAlias();
            EnableDistributionGroup();
        })(Alias = Feedback.Alias || (Feedback.Alias = {}));
    })(Feedback || (Feedback = {}));;
    /*
    Client side resource management component
        
    Clients can register resources by caling RMS2.RegisterResources.
    The resources are fetched in a serial fashion using XMLHttpRequest, thus making sure RMS does not occupy more than 1 available connection 
    (out of 2 max connections per domain for some browsers). 
       
    Supports simultaneous multiple invocations of RMS.RegisterResources.    
        
    */

    RMS2 = new function() {
        /*
        _queue is an array of resource objects with the following structure: 
            
        resource = 
        {
        n:namespace, // The "namespace" of the resource, to partition out the cookie ids
        u:url,       // The URL of the resource
        c:cookieId   // The cookie id, which corresponds to the ith bit of the base64url encoded cookie crumb value
        }
        */
        var _queue = [];
        var _initialDocumentDomain = "";

        var _readyState = "readyState";
        var _onReadyStateChange = "onreadystatechange";
        var _handlerRegistered;

        var _startTime;
        var _rmsConfig = _w.RmsConfig || {};

        this.RegisterResources = function(resourceUrls, thisParamIsIgnored, namespace, cookieIds) {
            _initialDocumentDomain = _d.domain;

            for (var i = 0; i < resourceUrls.length; i++) {
                _queue.push({
                    n: namespace,
                    u: resourceUrls[i],
                    c: cookieIds[i]
                });
            }

            // We only want to bind the event handler once, since otherwise we would end up prefetching resources twice                 
            if (!_handlerRegistered) {
                _handlerRegistered = true;

                // pass 1 (true) for last arg to bind retroactively (which means we'll call the handler if the onHTML event has already fired)
                // binding retroactively so we don't have to be concerned about the rendering endpoint on this script relative to the script that fire the event
                sj_evt.bind("onP1", startPrefetch, 1, 1000); // call prefetch 1000 ms after onP1 fires - fired in OnP1_r.js
            }
        }

        function Base64UrlEncode(bitMapStr, id) {
            // NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE 
            // NOTE: If either of the alphabet or the number of bits is changed, then the RMS CookieResourceTracker, 
            //       as well as the PerfPreCheckin tests must also be changed. See bug MSN Search Tracking: PS 499673
            // NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE 

            var BitsPerChar = 6;
            // It would be great to use _table.split, but IE6 doesn't provide Array.indexOf, which we would then need.
            var _table = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";
            // buffer to hold our base32 encoded bitmap
            var _chars = bitMapStr ? bitMapStr.split("") : [];
            var val;

            // Calculate the index of the char that contains (or should contain) the bit representing the given cookie id
            var offset = ~~(id / BitsPerChar); // ~~ is equivalent to Math.floor() here

            // Pad out _chars to ensure _chars[offset] exists if required
            while (_chars.length <= offset) {
                _chars.push(_table.charAt(0)); // pad out with zero
            }

            // Calculate the new value of _chars[offset] when the bit representing the id is set
            val = _table.indexOf(_chars[offset]) | (1 << (id % BitsPerChar));

            // Set the new value of _chars[offset]
            _chars[offset] = _table.charAt(val);

            return _chars.join("");
        }

        function updateCookie(resource) {
            // read the cookie crumb 
            var crumb = sj_cook.get("RMS", resource.n /*namespace used as crumb key name*/ );

            // save off the bitmap value to the cookie crumb, with the cookieId bit set 
            sj_cook.set("RMS", resource.n, Base64UrlEncode(crumb, resource.c), 0 /*isPersistent if > 0*/ , "/" /*path*/ , 0 /*expires: in minute*/ );
        }

        function startPrefetch() {
            if (_d.domain != _initialDocumentDomain) {
                // Certain scopes like books and academic change this property... 
                // when they do so, we can't prefetch via XMLHttpRequest, since this causes an access denied error
                // so we just avoid the prefetch, and rely on network reuse of the files we'd have
                // prefetched to get the same benefits as prefetch. It is likely that most prefetched
                // files will already be in browser cache by the time the user reaches these scopes,
                // and since this is not breaking behavior (instead we're just not as optimal as we could be,
                // should the user not actually have these files in cache), we can avoid the prefetch.
                // Furthermore, if the user has the files in cache during the same browser session that
                // he visits these scopes, this script will not get rendered (since there's no prefetch
                // needed)
                return;
            }

            if (_rmsConfig.P) {
                // If persist cookie has been used for RMS, restore RMS session cookie from the persist copy.
                _rmsConfig.P();
            }
            // start fetching
            _startTime = new Date();
            fetch(0);
        }

        function fetch(i) {
            var resource = _queue[i];
            if (resource) {
                var xhr = sj_gx();
                if (!xhr) return;
                xhr.open("get", resource.u, true); // async

                var th = sb_st(function() {
                    if (xhr[_readyState] != 4) {
                        // This is because of a bug in some browsers
                        // where abort() fires onreadystatechange with readyState=4
                        // So setting onreadystatechange to an empty function so that resource i+1
                        // is not fetched twice.
                        xhr[_onReadyStateChange] = function() {};
                        xhr.abort();
                        fetch(i + 1);
                    }
                }, 5000); // we wait at most 5 seconds for any one resource

                xhr[_onReadyStateChange] = function() {
                    if (xhr[_readyState] == 4) {
                        sb_ct(th); // kill the timeout timer

                        updateCookie(_queue[i]);
                        fetch(i + 1);
                    }
                };

                xhr.send(null); // null is not optional here for FF
            } else {
                // Upon the prefetching is completed, send back RMS instrumenation ping-back if the instrumenation is enabled.
                if (_rmsConfig.I) {
                    _rmsConfig.I(_startTime);
                }
            }
        }
    };; ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Shared.d.ts" />
    ///<reference path="PackageLoad.ts" />
    var Feedback;
    (function(Feedback) {
        var Bootstrap;
        (function(Bootstrap) {
            function LoadPackage(feedbackPackage, checkPackageLoad, feedbackLinkId) {
                // checks if $ was defined by jQuery before letting it execute
                if (typeof Feedback === 'undefined' || typeof jQuery === 'undefined') {
                    setTimeout(function() {
                        LoadPackage(feedbackPackage, checkPackageLoad, feedbackLinkId);
                    }, 50);
                    return;
                }
                Feedback.PackageLoad.Load(feedbackPackage, checkPackageLoad, feedbackLinkId);
            }

            function StartFeedback(scrollToTop, feedbackPackage, checkPackageLoad, feedbackLinkId) {
                // raise an event to "warn" that the page is entering on "Feedback state"
                sj_evt.fire("onFeedbackStarting");
                LoadJQuery();
                //scrolls to the top where the feedback form is visible
                scrollToTop = (typeof scrollToTop === 'undefined') ? false : scrollToTop;
                if (scrollToTop) {
                    scrollTo(0, 0);
                }
                // checks for flag if package already present on page or not
                checkPackageLoad = (typeof checkPackageLoad === 'undefined') ? true : checkPackageLoad;
                LoadPackage(feedbackPackage, checkPackageLoad, feedbackLinkId);
            }

            function InitializeFeedback(feedbackPackage, feedbackLinkId, checkPackageLoad, scrollToTop, disableFeedbackLink, appendFormAfterLink, startOnLoad) {
                var element = _ge(feedbackLinkId);
                disableFeedbackLink = (typeof disableFeedbackLink === 'undefined') ? false : disableFeedbackLink;
                // Listen for form show event
                if (typeof sj_evt !== "undefined") {
                    sj_evt.bind("feedbackformrequested", function() {
                        StartFeedback(scrollToTop, feedbackPackage, checkPackageLoad, feedbackLinkId);
                    }, 1);
                }
                if (typeof CortanaApp !== "undefined" && CortanaApp.addEventListener) {
                    CortanaApp.addEventListener("feedbackformrequested", function(args) {
                        if (typeof args !== "undefined" && args !== null) {
                            args.isHandled = true;
                        }
                        StartFeedback(scrollToTop, feedbackPackage, checkPackageLoad, feedbackLinkId);
                    });
                }
                if (element !== null) {
                    sj_be(element, 'click', function(e) {
                        // disables feedback link after one click
                        if (disableFeedbackLink && element.classList) {
                            if (element.classList.contains('clicked')) {
                                return false;
                            } else {
                                element.classList.add('clicked');
                            }
                        }
                        // prevents default click action
                        sj_pd(e);
                        // stop propagation (example - needed to capture AS feedback)
                        sj_sp(e);
                        StartFeedback(scrollToTop, feedbackPackage, checkPackageLoad, feedbackLinkId);
                    });
                } else {
                    startOnLoad = (typeof startOnLoad === 'undefined') ? false : startOnLoad;
                    if (startOnLoad) {
                        StartFeedback(scrollToTop, feedbackPackage, checkPackageLoad, feedbackLinkId);
                    }
                }
            }
            Bootstrap.InitializeFeedback = InitializeFeedback;
        })(Bootstrap = Feedback.Bootstrap || (Feedback.Bootstrap = {}));
    })(Feedback || (Feedback = {}));; ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\Shared.d.ts" />
    ///<reference path="..\..\..\..\Shared\Content\Content\Script\Declarations\jquery.d.ts" />
    var Feedback;
    (function(Feedback) {
        var PackageLoad;
        (function(PackageLoad) {
            'use strict';
            var cache = {};
            PackageLoad.originalHTML = GetHTML();

            function GetHTML() {
                return _d.documentElement.outerHTML;
            }
            PackageLoad.GetHTML = GetHTML;
            // This call needs to be made from the bootstrap JS
            // Set checkPackageLoad to false for Cortana to make sure you load the package every time the call is made
            function Load(packages, checkPackageLoad, feedbackLinkId) {
                var id;
                checkPackageLoad = (typeof checkPackageLoad === "undefined") ? true : checkPackageLoad;
                feedbackLinkId = (typeof feedbackLinkId === "undefined") ? '' : feedbackLinkId;
                for (id in packages) {
                    if (checkPackageLoad) {
                        // checks if package was previously loaded
                        if (packages.hasOwnProperty(id) && typeof cache[id] === 'undefined') {
                            LoadPkg(id, feedbackLinkId);
                        }
                    } else {
                        LoadPkg(id, feedbackLinkId);
                    }
                }
            }
            PackageLoad.Load = Load;
            // Loads the feedback package
            function LoadPkg(id, feedbackLinkId) {
                var request, ig = _G.IG,
                    partner = (typeof _G.V === 'undefined') ? _G.P : _G.V,
                    root = '/feedback/',
                    url, matchResult;
                // 'url' looks like '/feedback/page?ig=abc&p=serp'
                url = root + id + '?ig=' + ig + '&p=' + partner;
                // see if an iid has been defined for the package we're making the request for; if so, add it to the URL
                if (typeof fbpkgiid !== 'undefined' && typeof fbpkgiid[id] !== 'undefined') {
                    url += '&iid=' + fbpkgiid[id];
                }
                // add testhooks if present
                if ((matchResult = location.href.match(/[?&]testhooks=[^?&#]*/i)) && matchResult[0]) {
                    url += "&" + matchResult[0].substring(1);
                }
                // add Cortana hooks if present
                if ((matchResult = location.href.match(/[?&]hoseassistant=[^?&#]*/i)) && matchResult[0]) {
                    url += "&" + matchResult[0].substring(1);
                }
                if ((matchResult = location.href.match(/[?&]hose=[^?&#]*/i)) && matchResult[0]) {
                    url += "&" + matchResult[0].substring(1);
                }
                if ((matchResult = location.href.match(/[?&]theme=[^?&#]*/i)) && matchResult[0]) {
                    url += "&" + matchResult[0].substring(1);
                }
                // add client hooks if present
                if ((matchResult = location.href.match(/[?&]client=[^?&#]*/i)) && matchResult[0]) {
                    url += "&" + matchResult[0].substring(1);
                }
                if ((matchResult = location.href.match(/[?&]clientversion=[^?&#]*/i)) && matchResult[0]) {
                    url += "&" + matchResult[0].substring(1);
                }
                // add fb link id if present
                if (typeof feedbackLinkId !== 'undefined' && feedbackLinkId !== '') {
                    url += '&fid=' + encodeURIComponent(feedbackLinkId);
                }
                if (!shouldUseSharedAjax()) {
                    $.ajax({
                        url: url,
                        success: AppendResponse
                    });
                } else {
                    request = Create("GET", url, true);
                    request.onreadystatechange = function() {
                        return ProcessResponse(request);
                    };
                    request.send();
                }
                cache[id] = true;
            }

            function ProcessResponse(request) {
                _ge('sb_feedback').removeAttribute('clicked');
                if (request.readyState == 4 && request.status == 200) {
                    AppendResponse(request.response);
                }
            }

            function AppendResponse(response) {
                $('body').append(response);
            }

            function shouldUseSharedAjax() {
                var metas = _d.getElementsByTagName("meta");
                for (var i = 0; i < metas.length; i++) {
                    if (metas[i].name === "bing-headers") {
                        return true;
                    }
                }
                return false;
            }
            // Create an XMLHtmlRequest with set Hose headers in order request to be
            // recognized by SnR.
            function Create(method, url, async) {
                var request = sj_gx();
                request.open(method, url, async);
                return request;
            }
        })(PackageLoad = Feedback.PackageLoad || (Feedback.PackageLoad = {}));
    })(Feedback || (Feedback = {}));;;
    _w.rms.js({
        'A:rms:answers:BoxModel:Framework': '\/rms\/Framework\/c\/98a1080c\/8f35ad43.js?bu=rms+answers+BoxModel+config.threshold%2crules%24rulesThresholdv2%2ccore%2cmodules%24scroll%2cmodules%24resize%2cmodules%24state%2cmodules%24mutation%2cmodules%24error%2cmodules%24network%2cmodules%24cursor%2cmodules%24keyboard%2cmodules%24bot'
    }, {
        'A:0': 0
    });;
    //]]>
    </script>
    <div id="ClientApiLog" data-tag="threshold.DebugItems" style="display: none;">
        <div data-tag="threshold.DebugItem">setChromeState(0)</div>
        <div data-tag="threshold.DebugItem">getQueryHeadersAsync</div>
        <div data-tag="threshold.DebugItem">showWebViewAsync</div>
    </div>
    <div id="aRmsDefer">
        <script type="text/rms">//
            <![CDATA[
Feedback.Bootstrap.InitializeFeedback({page:true},"sb_feedback",0,0,1);;
//]]>
        </script>
    </div>
    <script type="text/javascript">
    //<![CDATA[
    _G.FCT = new Date;
    //]]>
    </script>
    <script type="text/javascript">
    //<![CDATA[
    _G.BCT = new Date;
    //]]>
    </script>
    <script type="text/javascript">
    //<![CDATA[
    _G.HT = new Date;
    //]]>
    </script>
    <script type="text/javascript" data-rms="1" src="/rms/Framework/c/98a1080c/8f35ad43.js?bu=rms+answers+BoxModel+config.threshold%2crules%24rulesThresholdv2%2ccore%2cmodules%24scroll%2cmodules%24resize%2cmodules%24state%2cmodules%24mutation%2cmodules%24error%2cmodules%24network%2cmodules%24cursor%2cmodules%24keyboard%2cmodules%24bot"></script>
    <script type="text/javascript" data-rms="1">
    //@ sourceURL=BingDynamicScript0.js
    //<![CDATA[
    Feedback.Bootstrap.InitializeFeedback({
        page: true
    }, "sb_feedback", 0, 0, 1);;
    //]]>
    </script>
    <div id="ApiDebug" data-tag="threshold.ApiDebug" style="display: none;">
        <div data-tag="threshold.ApiDebug">ApiEnd C "getQueryHeaders" getQueryHeadersAsync() 17ms elapsed</div>
        <div data-tag="threshold.ApiDebug">ApiEnd C "" showWebViewAsync() 16ms elapsed</div>
    </div>
</body>

</html>
